<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.10">
<title>CDB X Conceptual Model with Prototyping Examples and Recommendations</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/* Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment @import statement to use as custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*::before,*::after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto;tab-size:4;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite::before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed;word-wrap:break-word}
:not(pre)>code.nobreak{word-wrap:normal}
:not(pre)>code.nowrap{white-space:nowrap}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details>summary:first-of-type{cursor:pointer;display:list-item;outline:none;margin-bottom:.75em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class="highlight"],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos{border-right:1px solid currentColor;opacity:.35;padding-right:.5em}
pre.pygments .lineno{border-right:1px solid currentColor;opacity:.35;display:inline-block;margin-right:.75em}
pre.pygments .lineno::before{content:"";margin-right:-.125em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;text-align:left;margin-right:0}
table.tableblock{max-width:100%;border-collapse:separate}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
td.tableblock>.content>:last-child.sidebarblock{margin-bottom:0}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>thead>tr>.tableblock,table.grid-all>tbody>tr>.tableblock{border-width:0 1px 1px 0}
table.grid-all>tfoot>tr>.tableblock{border-width:1px 1px 0 0}
table.grid-cols>*>tr>.tableblock{border-width:0 1px 0 0}
table.grid-rows>thead>tr>.tableblock,table.grid-rows>tbody>tr>.tableblock{border-width:0 0 1px}
table.grid-rows>tfoot>tr>.tableblock{border-width:1px 0 0}
table.grid-all>*>tr>.tableblock:last-child,table.grid-cols>*>tr>.tableblock:last-child{border-right-width:0}
table.grid-all>tbody>tr:last-child>.tableblock,table.grid-all>thead:last-child>tr>.tableblock,table.grid-rows>tbody>tr:last-child>.tableblock,table.grid-rows>thead:last-child>tr>.tableblock{border-bottom-width:0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot,table.frame-ends{border-width:1px 0}
table.stripes-all tr,table.stripes-odd tr:nth-of-type(odd),table.stripes-even tr:nth-of-type(even),table.stripes-hover tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{margin-right:.25em}
ul.inline{display:-ms-flexbox;display:-webkit-box;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media print,amzn-kf8{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
</head>
<body id="bibtexAttributes" class="book">
<div id="header">
<h1>CDB X Conceptual Model with Prototyping Examples and Recommendations</h1>
<div id="toc" class="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_subject">1. Subject</a></li>
<li><a href="#_executive_summary">2. Executive Summary</a>
<ul class="sectlevel2">
<li><a href="#_recommendations">2.1. Recommendations</a>
<ul class="sectlevel3">
<li><a href="#_attribution">2.1.1. Attribution</a></li>
</ul>
</li>
<li><a href="#_document_contributor_contact_points">2.2. Document contributor contact points</a></li>
<li><a href="#_foreword">2.3. Foreword</a></li>
</ul>
</li>
<li><a href="#references">3. References</a></li>
<li><a href="#_terms_and_definitions">4. Terms and definitions</a>
<ul class="sectlevel2">
<li><a href="#_abbreviated_terms">4.1. Abbreviated terms</a></li>
</ul>
</li>
<li><a href="#Overview">5. Overview</a></li>
<li><a href="#BackgroundClause">6. CDB 2.0 - Background and History</a>
<ul class="sectlevel2">
<li><a href="#_what_is_cdb">6.1. What is CDB?</a></li>
<li><a href="#_ogc_cdb_1_x_history">6.2. OGC CDB 1.x History</a></li>
<li><a href="#_ogc_cdb_2_0">6.3. OGC CDB 2.0</a></li>
<li><a href="#attrtestbed13">6.4. Attribution - An OGC Testbed 13 CDB Activity in</a></li>
</ul>
</li>
<li><a href="#CDB2Models">7. CDB X Design Goals, Use Cases, and Conceptual/Logical Models</a>
<ul class="sectlevel2">
<li><a href="#_cdb_x_design_goals_and_objectives">7.1. CDB X Design Goals and Objectives</a></li>
<li><a href="#_use_cases">7.2. Use Cases</a></li>
<li><a href="#_definition_of_concepts">7.3. Definition of Concepts</a>
<ul class="sectlevel3">
<li><a href="#_foundation_data">7.3.1. Foundation Data</a></li>
<li><a href="#_reference_systems">7.3.2. Reference Systems</a></li>
</ul>
</li>
<li><a href="#_3d_models">7.4. 3D Models</a></li>
<li><a href="#_attribution_2">7.5. Attribution</a></li>
<li><a href="#_tilingcoveragesimagery">7.6. Tiling/Coverages/Imagery</a></li>
<li><a href="#_vector_data">7.7. Vector Data</a></li>
</ul>
</li>
<li><a href="#Attribution">8. CDB-X Attribution</a>
<ul class="sectlevel2">
<li><a href="#_overview_of_the_cdb_x_attribution_work">8.1. Overview of the CDB-X Attribution Work</a></li>
<li><a href="#_background_history_and_the_path_forward">8.2. Background, History, and the Path Forward</a>
<ul class="sectlevel3">
<li><a href="#_current_cdb_1_x_attribution_approach">8.2.1. Current CDB 1.x Attribution Approach</a></li>
<li><a href="#_ongoing_standards_development">8.2.2. Ongoing Standards Development</a></li>
</ul>
</li>
<li><a href="#_cdb_x_discussion_and_requirements_for_cdb_x_experimentation">8.3. CDB-X Discussion and Requirements for CDB-X Experimentation</a>
<ul class="sectlevel3">
<li><a href="#_experimentation_background_ggdm">8.3.1. Experimentation Background - GGDM</a></li>
<li><a href="#_experimentation_goals">8.3.2. Experimentation Goals</a></li>
</ul>
</li>
<li><a href="#_cdb_x_experiment_findings">8.4. CDB X Experiment Findings</a>
<ul class="sectlevel3">
<li><a href="#_entity_metamodel_comparison">8.4.1. Entity Metamodel Comparison</a></li>
<li><a href="#_feature_subcodes_not_in_ggdm">8.4.2. Feature Subcodes not in GGDM</a></li>
<li><a href="#_mapping_between_cdb_tds_and_ggdm">8.4.3. Mapping between CDB, TDS, and GGDM</a></li>
<li><a href="#_existing_fdd_metadata_missing_attribute_details">8.4.4. Existing FDD Metadata Missing Attribute Details</a></li>
</ul>
</li>
<li><a href="#_feature_relationships">8.5. Feature Relationships</a>
<ul class="sectlevel3">
<li><a href="#_grouping_features_into_datasets_and_categories">8.5.1. Grouping Features into Datasets and Categories</a></li>
<li><a href="#_per_entity_vs_per_dataset_attributes">8.5.2. Per-Entity vs. Per-Dataset Attributes</a></li>
<li><a href="#_multi_valued_attributes">8.5.3. Multi-Valued Attributes</a></li>
<li><a href="#_range_valued_attributes">8.5.4. Range-Valued Attributes</a></li>
<li><a href="#_text_patterns_and_codelists">8.5.5. Text Patterns and Codelists</a></li>
<li><a href="#_instance_class_and_extended_attributes">8.5.6. Instance, Class, and Extended Attributes</a></li>
<li><a href="#_mandatory_vs_optional_attributes_and_default_values">8.5.7. Mandatory vs. Optional Attributes and Default Values</a></li>
<li><a href="#_organizing_attributes_by_domain">8.5.8. Organizing Attributes by Domain</a></li>
<li><a href="#_metadata_vs_attribution">8.5.9. Metadata vs. Attribution</a></li>
<li><a href="#_cdb_vector_geometry_data_model_vs_other_ogc_standards">8.5.10. CDB Vector Geometry Data Model vs. Other OGC Standards</a></li>
<li><a href="#_entity_dictionary_storage_design">8.5.11. Entity Dictionary Storage Design</a></li>
<li><a href="#_data_dictionary_versioning_changes_and_extensions">8.5.12. Data Dictionary Versioning, Changes, and Extensions</a></li>
<li><a href="#_relationship_to_materials">8.5.13. Relationship to Materials</a></li>
<li><a href="#_relationship_to_lights">8.5.14. Relationship to Lights</a></li>
<li><a href="#_relationship_to_model_components">8.5.15. Relationship to Model Components</a></li>
<li><a href="#_building_interior_considerations">8.5.16. Building Interior Considerations</a></li>
<li><a href="#_impacts_of_attribution_changes_on_vector_encoding">8.5.17. Impacts of Attribution Changes on Vector Encoding</a></li>
<li><a href="#_impacts_of_attribution_changes_on_3d_models">8.5.18. Impacts of Attribution Changes on 3D Models</a></li>
</ul>
</li>
<li><a href="#_summary_of_recommendations">8.6. Summary of Recommendations</a>
<ul class="sectlevel3">
<li><a href="#_phase_3_day_3">8.6.1. Phase 3, Day 3</a></li>
<li><a href="#_phase_3_day_4">8.6.2. Phase 3, Day 4</a></li>
<li><a href="#_phase_3_day_5">8.6.3. Phase 3, Day 5</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#vectorgpkg">9. CDB X All Vector Data in GeoPackage</a>
<ul class="sectlevel2">
<li><a href="#_general">9.1. General</a></li>
<li><a href="#_question_to_be_answered">9.2. Question to be answered</a></li>
</ul>
</li>
<li><a href="#threedcontent">10. 3D Models and other 3D Content</a>
<ul class="sectlevel2">
<li><a href="#Questions">10.1. Questions to be addressed</a></li>
<li><a href="#_cdb_x_requirements_for_3d_model_components">10.2. CDB X Requirements for 3D Model Components</a></li>
<li><a href="#_short_and_medium_term_objectives">10.3. Short and Medium Term Objectives</a></li>
<li><a href="#_3d_experiment_object_model">10.4. 3D Experiment Object Model</a>
<ul class="sectlevel3">
<li><a href="#_the_data">10.4.1. The data</a></li>
<li><a href="#_attribute_changes_explored">10.4.2. Attribute changes explored</a></li>
</ul>
</li>
<li><a href="#_description_of_3d_formatsencodings_and_references_for_this_section">10.5. Description of 3D formats/encodings and References for this section:</a>
<ul class="sectlevel3">
<li><a href="#_openflight">10.5.1. OpenFlight</a></li>
<li><a href="#_gl_transmission_format_gltf_2_0">10.5.2. GL Transmission Format (glTF) 2.0</a></li>
</ul>
</li>
<li><a href="#_original_prototyping_experiments_keeping_for_now_but_will_delete_when_this_section_is_more_mature">10.6. Original Prototyping Experiments - Keeping for now but will delete when this section is more mature.</a></li>
<li><a href="#_investigation_1_make_cdb_3d_models_easier_to_maintain_andor_modify">10.7. Investigation 1 - Make CDB 3D models easier to maintain and/or modify</a>
<ul class="sectlevel3">
<li><a href="#_task_1_cdb_openflight_and_gltf_feature_analysis">10.7.1. TASK 1 - CDB OpenFlight and glTF Feature Analysis</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_supporting_more_than_cdb_1_x">11. Supporting more than CDB 1.X:</a>
<ul class="sectlevel3">
<li><a href="#_task_2_developing_gltf_cdb_extensions">11.1. TASK 2 - Developing glTF CDB extensions</a></li>
<li><a href="#_task_3_prototype_a_openflight_to_gltf_converter_supporting_the_new_extension">11.2. TASK 3 - Prototype a OpenFlight to glTF converter supporting the new extension</a></li>
<li><a href="#_task_4_define_a_new_structure_to_store_3d_models">11.3. TASK 4 - Define a new structure to store 3D models</a></li>
<li><a href="#_task_5_define_an_index_file_for_all_3d_model_components">11.4. TASK 5 - Define an index file for all 3D model components</a></li>
<li><a href="#_investigation_2_merging_all_geometry_in_a_tile_i_am_assuming_this_section_will_get_more_information_and_an_edit">11.5. Investigation 2 - Merging all geometry in a tile {<strong>I am assuming this section will get more information - and an edit</strong>}</a></li>
</ul>
</li>
<li><a href="#metadata">12. CDB X Metadata and Integration</a>
<ul class="sectlevel2">
<li><a href="#_summary_of_history_of_cdb_x_metadata_discussions">12.1. Summary of history of CDB X metadata discussions.</a>
<ul class="sectlevel3">
<li><a href="#GeospatialMetadataGuidance">12.1.1. Geospatial Metadata – Guidance</a></li>
<li><a href="#_phase_3_consensus_day_3">12.1.2. Phase 3 Consensus, Day 3</a></li>
<li><a href="#_phase_3_day_4_2">12.1.3. Phase 3, Day 4</a></li>
<li><a href="#_phase_3_day_5_2">12.1.4. Phase 3, Day 5</a></li>
<li><a href="#_plan_for_experimentation_in_subsequent_phases">12.1.5. Plan for Experimentation in subsequent phases</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#tiling">13. Tiling and packaging of data layers</a>
<ul class="sectlevel2">
<li><a href="#_general_2">13.1. General</a>
<ul class="sectlevel3">
<li><a href="#_ogc_core_tiling_conceptual_and_logical_models_for_2d_euclidean_space">13.1.1. OGC Core Tiling Conceptual and Logical Models for 2D Euclidean Space</a></li>
<li><a href="#_ogc_two_dimensional_tile_matrix_set_standard">13.1.2. OGC Two Dimensional Tile Matrix Set Standard</a></li>
</ul>
</li>
<li><a href="#_design_objectives_for_cdb_x_tiling_lods_and_layers">13.2. Design Objectives for CDB X Tiling, LoDs and Layers</a></li>
<li><a href="#_proposed_tiling_logical_model_for_cdb_x">13.3. Proposed Tiling Logical Model for CDB X</a></li>
<li><a href="#_proposed_cdb_x_tiling_scheme">13.4. Proposed CDB X Tiling Scheme</a></li>
<li><a href="#_findings_from_experiments">13.5. Findings from experiments</a>
<ul class="sectlevel3">
<li><a href="#_tiling_changes_from_ogc_cdb_1_x">13.5.1. Tiling Changes From OGC CDB 1.x</a></li>
</ul>
</li>
<li><a href="#_proposed_cdb_x_data_container">13.6. Proposed CDB X Data Container</a></li>
<li><a href="#_proposed_levels_of_detail_grouping">13.7. Proposed Levels of Detail Grouping</a></li>
<li><a href="#_proposed_cdb_json_index_of_packages_and_data_layers">13.8. Proposed <code>cdb.json</code> index of packages and data layers</a></li>
<li><a href="#_backwards_compatibility_with_ogc_cdb_1_x">13.9. Backwards Compatibility with OGC CDB 1.x</a></li>
<li><a href="#_geopackage_tile_matrix_set_extension">13.10. GeoPackage Tile Matrix Set extension</a></li>
<li><a href="#_tiled_coverage_data">13.11. Tiled Coverage Data</a>
<ul class="sectlevel3">
<li><a href="#_elevation_minmax">13.11.1. Elevation min/max</a></li>
<li><a href="#_image_compression_jpeg">13.11.2. Image Compression - JPEG</a></li>
<li><a href="#_materials">13.11.3. Materials</a></li>
</ul>
</li>
<li><a href="#_tiled_vector_data">13.12. Tiled Vector Data</a></li>
<li><a href="#_tiled_3d_models">13.13. Tiled 3D Models</a>
<ul class="sectlevel3">
<li><a href="#_3d_models_extension">13.13.1. 3D Models Extension</a></li>
<li><a href="#_a_referenced_3d_models_with_placement_information">13.13.2. A) Referenced 3D models with placement information</a></li>
<li><a href="#_b_batched_3d_models_tiles">13.13.3. B) Batched 3D Models tiles</a></li>
<li><a href="#_textures_table">13.13.4. Textures table</a></li>
</ul>
</li>
<li><a href="#_ecere_geopackage_tiling_experiments">13.14. Ecere GeoPackage Tiling Experiments</a>
<ul class="sectlevel3">
<li><a href="#_overview">13.14.1. Overview</a></li>
<li><a href="#_data_results">13.14.2. Data results</a></li>
<li><a href="#_ogc_api_access_demo">13.14.3. OGC API access demo</a></li>
<li><a href="#_visualization">13.14.4. Visualization</a></li>
<li><a href="#_cesium_js_3d_tiles_demo">13.14.5. Cesium JS / 3D Tiles demo</a></li>
<li><a href="#_future_work">13.14.6. Future work</a></li>
</ul>
</li>
<li><a href="#_flightsafety_geopackage_tiling_experiments">13.15. FlightSafety GeoPackage Tiling Experiments</a>
<ul class="sectlevel3">
<li><a href="#_flightsafety_experiment_1">13.15.1. FlightSafety Experiment 1</a></li>
<li><a href="#_flightsafety_experiment_2">13.15.2. FlightSafety Experiment 2</a></li>
<li><a href="#_observations_from_experiments_1_and_2">13.15.3. Observations from Experiments 1 and 2</a></li>
<li><a href="#_flightsafety_experiments_3_and_4">13.15.4. FlightSafety Experiments 3 and 4</a></li>
<li><a href="#_observations_for_experiments_3_and_4">13.15.5. Observations for Experiments 3 and 4</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#RevisionHistory">Annex A: Revision History</a></li>
<li><a href="#Bibliography">Annex B: Bibliography</a></li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Publication Date: YYYY-MM-DD</p>
</div>
<div class="paragraph">
<p>Approval Date: YYYY-MM-DD</p>
</div>
<div class="paragraph">
<p>Submission Date: YYYY-MM-DD</p>
</div>
<div class="paragraph">
<p>Reference number of this document: &lt;Something&gt;</p>
</div>
<div class="paragraph">
<p>Category: Engineering Report from SOCOM/SOFWERX sponsored initiative; formatted like an OGC Public Engineering Report</p>
</div>
<div class="paragraph">
<p>Editors: David Graham, Carl Reed</p>
</div>
<div class="paragraph">
<p>Title: CDB X Conceptual Model with Prototyping Examples and Recommendations</p>
</div>
<hr>
<div class="paragraph">
<div class="title"><strong class="big">Engineering Report from SOCOM/SOFWERX sponsored initiative; formatted like an OGC Public Engineering Report</strong></div>
<p><strong>COPYRIGHT</strong></p>
</div>
<div class="paragraph">
<p><strong>WARNING</strong></p>
</div>
<div class="paragraph">
<p>This document is not an OGC Standard. This document is an Engineering Report from SOCOM/SOFWERX sponsored initiative; formatted like an OGC Public Engineering Report created as a deliverable in an OGC Member (SOCOM) sponsored initiative and is not an official position of the OGC membership. It is distributed for review and comment. It is subject to change without notice and may not be referred to as an OGC Standard. Further, any Engineering Report from SOCOM/SOFWERX sponsored initiative; formatted like an OGC Public Engineering Report should not be referenced as required or mandatory technology in procurements. However, the discussions in this document could very well lead to the definition of an OGC Standard.</p>
</div>
<div style="page-break-after: always;"></div>
<div class="paragraph">
<p><strong>LICENSE AGREEMENT</strong></p>
</div>
<div class="paragraph">
<p><span class="small">Permission is hereby granted by the Open Geospatial Consortium, ("Licensor"), free of charge and subject to the terms set forth below, to any person obtaining a copy of this Intellectual Property and any associated documentation, to deal in the Intellectual Property without restriction (except as set forth below), including without limitation the rights to implement, use, copy, modify, merge, publish, distribute, and/or sublicense copies of the Intellectual Property, and to permit persons to whom the Intellectual Property is furnished to do so, provided that all copyright notices on the intellectual property are retained intact and that each person to whom the Intellectual Property is furnished agrees to the terms of this Agreement.</span></p>
</div>
<div class="paragraph">
<p><span class="small">If you modify the Intellectual Property, all copies of the modified Intellectual Property must include, in addition to the above copyright notice, a notice that the Intellectual Property includes modifications that have not been approved or adopted by LICENSOR.</span></p>
</div>
<div class="paragraph">
<p><span class="small">THIS LICENSE IS A COPYRIGHT LICENSE ONLY, AND DOES NOT CONVEY ANY RIGHTS UNDER ANY PATENTS THAT MAY BE IN FORCE ANYWHERE IN THE WORLD. THE INTELLECTUAL PROPERTY IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, AND NONINFRINGEMENT OF THIRD PARTY RIGHTS. THE COPYRIGHT HOLDER OR HOLDERS INCLUDED IN THIS NOTICE DO NOT WARRANT THAT THE FUNCTIONS CONTAINED IN THE INTELLECTUAL PROPERTY WILL MEET YOUR REQUIREMENTS OR THAT THE OPERATION OF THE INTELLECTUAL PROPERTY WILL BE UNINTERRUPTED OR ERROR FREE. ANY USE OF THE INTELLECTUAL PROPERTY SHALL BE MADE ENTIRELY AT THE USER’S OWN RISK. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR ANY CONTRIBUTOR OF INTELLECTUAL PROPERTY RIGHTS TO THE INTELLECTUAL PROPERTY BE LIABLE FOR ANY CLAIM, OR ANY DIRECT, SPECIAL, INDIRECT OR CONSEQUENTIAL DAMAGES, OR ANY DAMAGES WHATSOEVER RESULTING FROM ANY ALLEGED INFRINGEMENT OR ANY LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR UNDER ANY OTHER LEGAL THEORY, ARISING OUT OF OR IN CONNECTION WITH THE IMPLEMENTATION, USE, COMMERCIALIZATION OR PERFORMANCE OF THIS INTELLECTUAL PROPERTY.</span></p>
</div>
<div class="paragraph">
<p><span class="small">This license is effective until terminated. You may terminate it at any time by destroying the Intellectual Property together with all copies in any form. The license will also terminate if you fail to comply with any term or condition of this Agreement. Except as provided in the following sentence, no such termination of this license shall require the termination of any third party end-user sublicense to the Intellectual Property which is in force as of the date of notice of such termination. In addition, should the Intellectual Property, or the operation of the Intellectual Property, infringe, or in LICENSOR’s sole opinion be likely to infringe, any patent, copyright, trademark or other right of a third party, you agree that LICENSOR, in its sole discretion, may terminate this license without any compensation or liability to you, your licensees or any other party. You agree upon termination of any kind to destroy or cause to be destroyed the Intellectual Property together with all copies in any form, whether held by you or by any third party.</span></p>
</div>
<div class="paragraph">
<p><span class="small">Except as contained in this notice, the name of LICENSOR or of any other holder of a copyright in all or part of the Intellectual Property shall not be used in advertising or otherwise to promote the sale, use or other dealings in this Intellectual Property without prior written authorization of LICENSOR or such copyright holder. LICENSOR is and shall at all times be the sole entity that may authorize you or any third party to use certification marks, trademarks or other special designations to indicate compliance with any LICENSOR standards or specifications.</span></p>
</div>
<div class="paragraph">
<p><span class="small">This Agreement is governed by the laws of the Commonwealth of Massachusetts. The application to this Agreement of the United Nations Convention on Contracts for the International Sale of Goods is hereby expressly excluded. In the event any provision of this Agreement shall be deemed unenforceable, void or invalid, such provision shall be modified so as to make it valid and enforceable, and as so modified the entire Agreement shall remain in full force and effect. No decision, action or inaction by LICENSOR shall be construed to be a waiver of any rights or remedies available to it.</span></p>
</div>
<div class="paragraph">
<p><span class="small">None of the Intellectual Property or underlying information or technology may be downloaded or otherwise exported or reexported in violation of U.S. export laws and regulations. In addition, you are responsible for complying with any local laws in your jurisdiction which may impact your right to import, export or use the Intellectual Property, and you represent that you have complied with any regulations or registration procedures required by applicable law to make this license enforceable.</span></p>
</div>
<div style="page-break-after: always;"></div>
<!-- toc disabled -->
<div style="page-break-after: always;"></div>
</div>
</div>
<div class="sect1">
<h2 id="_subject"><a class="anchor" href="#_subject"></a>1. Subject</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This Engineering Report documents a CDB Experimental (CDB X) Conceptual Model as well as the results of CDB X rapid prototyping activites conducted during the 3D Geospatial Series Tech Sprint II - OGC CDB 2.0. This activity was performed in support of Special Operations Forces (SOF) Future Concepts. This effort hopes to accelerate evolution of the OGC CDB standard to meet the needs of planning, rehearsal, and Mission Command systems providing decision support to Special Operations Forces and enabling SOF tactical and operational advantage. OGC industry standards enable interoperability of geospatial data across systems and applications that SOF Operators and analysts use across warfighting functions.</p>
</div>
<div class="paragraph">
<p>CDB X - Meeting the requirements for tactical GEOINT that can be used across warfighting functions.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_executive_summary"><a class="anchor" href="#_executive_summary"></a>2. Executive Summary</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Since 2018 the CDB community has discussed and considered what CDB version 2.0 might might provide in terms of capabilities. These discussion also touched on architecture and related logical models. Many of these CDB 2.0 discussion have occured as part of the OGC standards work. More recently, other organizations such as SOCOM and NGA, have vigorously engaged in these discussions. However, progress has been relatively slow.</p>
</div>
<div class="paragraph">
<p>Therefore, in order to accelerate the development of CDB 2.0, in May 2020 SOFWERX announced the <a href="https://events.sofwerx.org/3dgeots/">3D Geospatial Series Tech Sprint II – OGC CDB 2.0</a>. In support of SOF Future Concepts, this effort hopes to accelerate evolution of the OGC CDB standard to meet the needs of planning, rehearsal, and Mission Command systems providing decision support to Special Operations Forces and enabling SOF tactical and operational advantage.</p>
</div>
<div class="paragraph">
<p>The CBD Tech Sprint was comprised of five (5) key work phases:</p>
</div>
<div class="paragraph">
<p>Phase 1: 22 June 2020 to 26 June 2020 Virtual Concept Development: In a series of virtual workshop conferences, participants discussed CDB 2.0 requirements and design objectives with a focus on defining conceptual and logical models for the CDB 2.0 standard. The discussion focused on five key topics: Attribution, 3D Models, Vector Data/GeoPackage, Coverage Tiling (and LoDs and general tiling), and Top Level Metadata. This models and related topics discussions served as the basis for technical experimentation in Phase 2.</p>
</div>
<div class="paragraph">
<p>Phase 2: 06 July 2020 to 31 July 2020 Virtual Tech Sprint: Participants, and/or their organizations, will provide prototype implementations of the conceptual model documented in Phase 1. Through technical integration experimentation, the model will be updated and refined.</p>
</div>
<div class="paragraph">
<p>Phase 3: 03 August 2020 to 28 August 2020 Engineering Report (ER): Participants will complete the project Engineering Report detailing the conceptual model and results of the technical integration experiments.</p>
</div>
<div class="paragraph">
<p>Phase 4: 07 September 2020 to 25 September 2020 Proposed Draft Specification: Participants will create a proposed draft specification for “CDB 2.0” based on work in the previous phases, to be submitted to the appropriate working groups within OGC, Khronos, and/or SISO.</p>
</div>
<div class="paragraph">
<p>Phase 5: 05 October 2020 to 30 October 2020 Final Report: Participants will write a final report summarizing activities to date, recommendations for the OGC SWG and other standards bodies to consider, and contributions of each participant.</p>
</div>
<div class="sect2">
<h3 id="_recommendations"><a class="anchor" href="#_recommendations"></a>2.1. Recommendations</h3>
<div class="paragraph">
<p>The following are the recommendations for changes, enhancements, and design principals for not just CDB 2.0 but also CDB version 1.3. The version 1.3 chnages are viewed as important enhancement that resolve both existing user specified needs as well as helping to provide a transition path the version 2.0</p>
</div>
<div class="sect3">
<h4 id="_attribution"><a class="anchor" href="#_attribution"></a>2.1.1. Attribution</h4>
<div class="paragraph">
<p>The subgroup recommends extending the current CDB XML metadata to add the NAS metamodel capabilities that are currently not supported. The CDB core conceptual model should not mandate any particular data dictionary or content, but rather provide the conceptual and logical metamodel for describing any ISO 19109 compliant application schema to the maximum extent practical. There should be no technical reason why one could not develop an extension profile for CDB for any particular data dictionary that complies with ISO 19109.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Adopt NAS-compliant logical entity-attribute model for CDB X with extensions for CDB use cases</p>
<div class="ulist">
<ul>
<li>
<p>Store all aspsects of feature and attribute dictionary in single SQLite file for portability and runtime performance</p>
</li>
<li>
<p>Use GGDM 3.0 as the initial starting point for definitions to populate CDB X data dictionary</p>
</li>
<li>
<p>Match up remaining CDB non-GGDM feature types and subcodes with latest NAS definitions where possible, matching subcodes to attributes where relevant and adding missing enumerant values where necessary (with associated NCV vocabulary)</p>
</li>
<li>
<p>Augment NAS definitions with other open standards and new development</p>
<div class="ulist">
<ul>
<li>
<p>Match up missing maritime definitions to DGIM followed by IHO S-100 where possible, define NCV vocabulary for such integrated definitions</p>
</li>
<li>
<p>Match up missing aeronautics definitions to DGIM followed by AIXM where possible, define NCV vocabulary for such integrated definitions</p>
</li>
<li>
<p>Coordinate with OGC, NGA, and STE OWT to develop replacement building interior data model incorporating IFC/BIM, CityGML, IMDF, and other open standards</p>
</li>
<li>
<p>Coordinate with OGC, NGA, STE OWT, and civilian environment agencies to develop detailed data model for vegetation</p>
</li>
<li>
<p>Create data model and vocabulary for material and light point definitions and capture into existing material and lightpoint libraries</p>
</li>
<li>
<p>Define NCV vocabulary and NAS-compatible entity and attribute types for CDB feature types and subcodes totally missing in all other standards</p>
</li>
</ul>
</div>
</li>
<li>
<p>Remove CDB feature subcodes entirely; migrate to existing and new feature and attribute types instead in NAS-compliant structure</p>
</li>
<li>
<p>Define entity types for CDB datasets and define "aggregation" relationships from feature types to containing datasets</p>
</li>
<li>
<p>Capture feature-level, dataset-level, and database metadata as NAS-compliant attribution meeting the NSG Metadata Foundation (NMF) and ISO 19115</p>
</li>
<li>
<p>Define functional role domains and create mechanism to organize attribution by domain for tailoring to runtime devices</p>
</li>
</ul>
</div>
</li>
<li>
<p>Delegate entity and attribute physical encoding choices to vector and 3D model containers instead of specifying globally</p>
<div class="ulist">
<ul>
<li>
<p>Deprecate extended attributes entirely, to be removed in CDB X</p>
</li>
<li>
<p>Delegate containerization of entity types (one per table, multiple in same table specified by F_CODE attribute, etc.) to vector and model containers</p>
</li>
<li>
<p>Delegate decision whether to use class or instance attributes to individual vector and model containers rather than global data dictionary</p>
</li>
<li>
<p>Delegate decision of whether to use FACC-like codes, NAS labels, or natural language names for entity types, attributes, and values to vector and model containers</p>
</li>
<li>
<p>Delegate decision of whether to flatten complex feature relationships and attributes used GGDM attribute prefixing to vector and model containers</p>
</li>
<li>
<p>Delegate decision of whether to flatten multi-valued and range-valued attributes using GGDM attribute prefixing to vector and model containers</p>
</li>
<li>
<p>Specify minimum and maximum cardinality of multi-valued attributes in feature and attribute dictionary, allow containers to use a lower maximum if using GGDM attribute prefixing encoding</p>
</li>
</ul>
</div>
</li>
<li>
<p>Define backward-compatible extensions in CDB 1.3 to add constructs necessary to move toward NAS-compliant attribution</p>
<div class="ulist">
<ul>
<li>
<p>Capture proposed NAS-complaint replacement feature dictionary in existing CDB metadata XML with necessary extensions</p>
</li>
<li>
<p>Only use feature subcode 000 in replacement dictionary and deprecate use of feature subcodes to be removed in CDB X</p>
</li>
<li>
<p>Add mechanism to mark numeric attributes as interval ranges (existing non-upgraded clients should see still attribute as single-valued and read mean value from associated unsuffixed attribute, use suffixed attributes for deviation and closure for upgraded clients to read)</p>
</li>
<li>
<p>Add minumum and maximum cardinality elements for attribute definitions to specify mininum and maximum element count for multi-valued attributes (existing non-upgraded clients should just see attribute as scalar base value and will only read the first value from associated content, will see ordinal-suffixed attributes as separate attributes)</p>
</li>
<li>
<p>Add list of valid attributes to datasets in CDB 1.x metadata XML files to match existing human-readable specification</p>
</li>
<li>
<p>Add list of valid enumerants for each attribute in CDB 1.x CDB_Attributes.xml file to match existing human-readable specification</p>
</li>
<li>
<p>Add list of valid attributes for each entity type as extension to CDB 1.x Feature_Data_Dictionary.xml to implement NAS-compliant per-entity attributes</p>
</li>
<li>
<p>Update CDB 1.x CDB_Attributes.xml to allow specifying text pattern constraints through &lt;Pattern&gt; element and text codelists for text attributes via &lt;Codelist&gt; element</p>
</li>
<li>
<p>Update CDB 1.x Feature_Data_Dictionary.xml for each feature to specify its generalization (base) entity type via &lt;Generalization&gt; element</p>
</li>
<li>
<p>Update CDB 1.x Feature_Data_Dictionary.xml to add &lt;Aggregation&gt; element to define additional associated category for an entity type, or parent category for a category</p>
</li>
<li>
<p>Existing category and subcategory XML structure will add implicit definitions and aggeregation links for the category/subcategory items as used by CDB 1.0 for model storage</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p><code>Recommendation 1 Extended Attributes - Version 1.3</code> The subgroup discussion on this topic is titled: <a href="https://github.com/sofwerx/cdb2-concept/issues/25">Should Extended Attributes be preserved at the logical data model level?</a> The suggestion is that the CDB SWG discuss this issue and possible solution as a possible change for CDB version 1.3. Some additional testing may be required to determine if this capability can be added to version 1.3 or not.</p>
</div>
<div class="paragraph">
<p><code>Recommendation 2 Attribute default values - Version 1.3</code> The subgroup discussion on this topic is titled: <a href="https://github.com/sofwerx/cdb2-concept/issues/32">Attribute Default Values #32</a>. The recommendation is that Defaults.xml can be used to define global attribute defaults as well as per-dataset defaults. Doing per-entity defaults would be a straight forward extension that could be proposed for CDB 1.3 as a transition path. The subgroup suggests that the CDB SWG discussion this for possible inclusion in version 1.3. A change request for this approach to specifying default values is also suggested.</p>
</div>
<div class="paragraph">
<p><code>Recommendation 3 Attribute Terms - Version 1.3</code> The subgroup discussion on this topic is titled: <a href="https://github.com/sofwerx/cdb2-concept/issues/31">Capture Attribute Terms (Enumerants) in Metadata #31</a>. Attributes describing qualitative values are present in CDB 1.2 and the list of valid values  for each attribute are documented in the human-readable specification with both the vocabulary term name and its integer numeric value (index). However, the machine-readable XML metadata does not contain any of this information and treats these attribute types as raw integers with only a minimum and maximum value constraint. It may make sense as a transition path to update CDB 1.3 to define additional XML elements in a backward compatible way to capture these definitions from the existing specification into the machine-readable XML metadata. The conceptual model in the CDB 1.2 specification does align with how GGDM treats such attributes, so there is no fundamental incompatibility, and the proposed CDB X dictionary design accounts for properly tracking the terms for qualitative attributes in a machine-readable way in SQLite.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_document_contributor_contact_points"><a class="anchor" href="#_document_contributor_contact_points"></a>2.2. Document contributor contact points</h3>
<div class="paragraph">
<p>All questions regarding this document should be directed to the editor or the contributors:</p>
</div>
<div class="paragraph">
<p><strong>Contacts</strong></p>
</div>
<table class="tableblock frame-all grid-all" style="width: 80%;">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Organization</th>
<th class="tableblock halign-left valign-top">Role</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">David Graham</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Eaglecapsystems</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Editor</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Carl Reed, PhD</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Carl Reed &amp; Associates</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Editor</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Kevin Bentley</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Cognitics</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Contributor</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Holly Black</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CAE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Contributor</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Hermann Bressard</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Presagis</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Contributor</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Patrick Cozzi</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CESIUM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Contributor</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Brian Ford</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">FlightSafety</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Contributor</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ryan Franz</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">FlightSafety</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Contributor</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Jay Freeman</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CAE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Contributor</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Jérôme Jacovella-St-Louis</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ecere</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Contributor</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Michala Hill</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Cognitics</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Facilitator/Contributor</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Greg Peele</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Geometric Progress</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Contributor</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Vaughn Whisker</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ARL PSU</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Contributor</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tracey Birch</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CloudLake/USSOCOM SOF AT&amp;L</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Emeritus</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_foreword"><a class="anchor" href="#_foreword"></a>2.3. Foreword</h3>
<div class="paragraph">
<p>Attention is drawn to the possibility that some of the elements of this document may be the subject of patent rights. The Open Geospatial Consortium shall not be held responsible for identifying any or all such patent rights.</p>
</div>
<div class="paragraph">
<p>Recipients of this document are requested to submit, with their comments, notification of any relevant patent claims or other intellectual property rights of which they may be aware that might be infringed by any implementation of the standard set forth in this document, and to provide supporting documentation.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="references"><a class="anchor" href="#references"></a>3. References</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The following normative documents are referenced in this document.</p>
</div>
<div class="ulist">
<div class="title">NOTE: 	Only normative standards are referenced here, e.g. OGC, ISO or other SDO standards. All other references are listed in the bibliography.</div>
<ul>
<li>
<p>OGC: 15-113r5 <a href="https://portal.opengeospatial.org/files/15-113r5">Volume 1: CDB Core Standard: Model and Physical Data Store Structure</a></p>
</li>
<li>
<p>OGC: 16-007r4 <a href="https://portal.opengeospatial.org/files/16-007r4">Volume 11: CDB Core Standard Conceptual Model</a></p>
</li>
<li>
<p>OGC: 12-128r15 <a href="https://portal.opengeospatial.org/files/12-128r15">Geopackage Encoding Standard - with Corrigendum version 1.2.1</a></p>
</li>
<li>
<p>OGC: 18-000 <a href="http://docs.opengeospatial.org/is/18-000/18-000.html">GeoPackage Related Tables Extension</a></p>
</li>
<li>
<p>OGC: 17-066r1 <a href="http://docs.opengeospatial.org/is/17-066r1/17-066r1.html">GeoPackage Extension for Tiled Gridded Coverage Data</a></p>
</li>
<li>
<p>Khronos <a href="https://github.com/KhronosGroup/glTF/tree/master/specification/2.0">GL Transmission Format (glTF) version 2.0</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_terms_and_definitions"><a class="anchor" href="#_terms_and_definitions"></a>4. Terms and definitions</h2>
<div class="sectionbody">
<div class="paragraph">
<p>For the purposes of this report, the definitions specified in Clause 4 of the OWS Common Implementation Standard <a href="https://portal.opengeospatial.org/files/?artifact_id=38867&amp;version=2">OGC 06-121r9</a> shall apply. In addition, the following terms and definitions apply.</p>
</div>
<div class="paragraph">
<p><strong>4.x</strong><br>
<strong>authoritative data</strong><br>
Officially recognized data that can be certified and is provided by an authoritative source.</p>
</div>
<div class="paragraph">
<p>(SOURCE: Authority and Authoritative Sources: Clarification of Terms and Concepts for Cadastral Data. FGDC/NIST 2008)</p>
</div>
<div class="paragraph">
<p><strong>4.x</strong><br>
<strong>authoritative data source</strong><br>
An information technology (IT) term used by system designers to identify a system process that assures the veracity of data sources.  These IT processes should be followed by all geospatial data providers.  The data may be original or it may come from one or more external sources all of which are validated for quality and accuracy.</p>
</div>
<div class="paragraph">
<p>(SOURCE: Authority and Authoritative Sources: Clarification of Terms and Concepts for Cadastral Data. FGDC/NIST 2008)</p>
</div>
<div class="paragraph">
<p><strong>4.x</strong><br>
<strong>conceptual model</strong><br>
description of common concepts and their relationships, particularly in order to facilitate exchange of information between parties within a specific domain. A conceptual model is explicitly chosen to be independent of design or implementation concerns.</p>
</div>
<div class="paragraph">
<p>(SOURCE: CEN ENV 1613:1995)</p>
</div>
<div class="paragraph">
<p><strong>4.x</strong><br>
<strong>coverage</strong><br>
feature that acts as a function to return values from its range for any direct position within its spatio-temporal domain</p>
</div>
<div class="paragraph">
<p><strong>4.x</strong><br>
<strong>coordinate reference system</strong><br>
coordinate system that is related to the real world by a datum</p>
</div>
<div class="paragraph">
<p>(SOURCE: ISO 19111:2019 Geographic information — Referencing by coordinates)</p>
</div>
<div class="paragraph">
<p><strong>4.x</strong><br>
<strong>dataset</strong><br>
A dataset is a collection of data, published or curated by a single agent. Data comes in many forms including numbers, words, pixels, imagery, sound and other multi-media, and potentially other types, any of which might be collected into a dataset.</p>
</div>
<div class="paragraph">
<p>Note: There is an important distinction between a dataset as an abstract idea and a distribution as a manifestation of the dataset</p>
</div>
<div class="paragraph">
<p>(SOURCE: <a href="https://www.w3.org/TR/vocab-dcat-2/">W3C Data Catalog Vocabulary (DCAT) - Version 2</a>, 2020)</p>
</div>
<div class="paragraph">
<p><strong>4.x</strong><br>
<strong>Data Store</strong><br></p>
</div>
<div class="paragraph">
<p>A data store is a repository for persistently storing and managing collections of data which include not just repositories like databases, but also simpler store types such as simple files, metadata, models, etc.</p>
</div>
<div class="paragraph">
<p>(SOURCE: <a href="https://www.information-management.com/glossary/d.html:2020" class="bare">https://www.information-management.com/glossary/d.html:2020</a>)</p>
</div>
<div class="paragraph">
<p><strong>4.x</strong><br>
<strong>elevation</strong><br>
Synonym for “height”</p>
</div>
<div class="paragraph">
<p>(SOURCE: <a href="https://portal.opengeospatial.org/files/?artifact_id=19820">OGC Abstract Topic 6: Schema for coverage geometry and functions</a>)</p>
</div>
<div class="paragraph">
<p><strong>4.x</strong><br>
<strong>feature data dictionary</strong><br>
A Feature data dictionary is a collection of descriptions of the Feature objects or items in a Feature data model for the benefit of programmers and others who need to refer to them.</p>
</div>
<div class="paragraph">
<p>(SOURCE: OGC Testbed-13: CDB Engineering Report - 17-042)</p>
</div>
<div class="paragraph">
<p><strong>4.x</strong><br>
<strong>foundation data</strong><br>
authoritative data and models that have been curated and stored in a CDB repository. Foundation data uses known and agreed to controlled vocabularies for attribution, has been curated based on the requirements as stated in the CDB standard, and supported by the required metadata.</p>
</div>
<div class="paragraph">
<p><strong>4.x</strong><br>
<strong>geospecific model</strong><br>
A Geospecific model is instanced once and only once within a CDB. Geospecific models usually correspond to unique (in either shape, size, texture, materials or attribution), man-made, real world 3D features. NOTE: Being discussed for possible evolution as part of CDB 2.0</p>
</div>
<div class="paragraph">
<p><strong>4.x</strong><br>
<strong>geotypical model</strong><br>
A Geotypical model is instanced multiple times within a CDB data store. Geotypical models correspond to representative (in shape, size, texture, materials and attribution) models of real-world manmade or natural 3D features.</p>
</div>
<div class="paragraph">
<p><strong>4.x</strong><br>
<strong>height</strong><br>
Distance of a point from a chosen reference surface measured upward along a line perpendicular to that surface.
Note 1 to entry: A height below the reference surface will have a negative value, which would embrace both gravity-related heights and ellipsoidal heights.</p>
</div>
<div class="paragraph">
<p>(SOURCE: ISO 19111:2019 Geographic information — Referencing by Coordinates)</p>
</div>
<div class="paragraph">
<p><strong>4.x</strong><br>
<strong>Metadata</strong><br>
information that captures the characteristics of a resource to represent the ‘who’, ‘what’, ‘when’, ‘where’,
‘why’, and ‘how’ of that resource.</p>
</div>
<div class="paragraph">
<p>(SOURCE: <a href="https://nsgreg.nga.mil/doc/view?i=4252&amp;month=10&amp;day=22&amp;year=2019">National System for Geospatial Intelligence (NSG) Metadata Foundation (NMF) Version 3.0</a>)</p>
</div>
<div class="paragraph">
<p><strong>4.x</strong><br>
<strong>repository</strong><br></p>
</div>
<div class="paragraph">
<p>a place that holds CDB data, makes CDB data available to use, and organizes CDB data in a logical manner. (Network of the National Library of Medicine) 2020</p>
</div>
<div class="paragraph">
<p><strong>4.x</strong><br>
<strong>resource</strong><br>
identifiable asset or means that fulfils a requirement</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
A web resource, or simply resource, is any identifiable thing, whether digital, physical, or abstract.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>(SOURCE: ISO:19115-1:2014 Geographic information — Metadata — Part 1: Fundamentals)</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">&#9679; tile </dt>
<dd>
<p>geometric  shape  with  known  properties  that  may  or  may  not  be  the  result  of  a  tiling  (tessellation)process. A tile consists of a single connected "piece" without "holes" or "lines" (topological disc).</p>
</dd>
</dl>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
“tile” is NOT a packaged blob of data to download in a chunky streaming optimization scheme!
</td>
</tr>
</table>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">&#9679; tiling </dt>
<dd>
<p>in mathematics, a tiling (tessellation) is a collection of subsets of the space being tiled, i.e. tiles thatcover the space without gaps or overlaps.</p>
</dd>
</dl>
</div>
<div class="sect2">
<h3 id="_abbreviated_terms"><a class="anchor" href="#_abbreviated_terms"></a>4.1. Abbreviated terms</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>AGC</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">US Army Geospatial Center</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>AIXM</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Aeronautical Information Exchange Model</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>ATAK</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Android Tactical Assault Kit</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>COTS</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Commercial Off The Shelf</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>CRS</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Coordinate Reference System</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>DIGEST</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Digital Geographic Information Exchange Standard</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>DGIM</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Disaster Geo-Information Management</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>DGIWG</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Defence Geospatial Information Working Group</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>EDCS</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Environmental Data Coding Specification</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>GGDM</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ground-Warfighter Geospatial Data Model</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>GPKG</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">GeoPackage</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>glTF</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">GL Transmission Format</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>FACC</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Feature Attribute and Coding catalog</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>FDD</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Feature Data Dictionary</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>FSC</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Feature Sub-code</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>LoD</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Level of Detail</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>MC</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mission Command</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>NAS</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NSG Application Schema</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>NCV</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NSG Core Vocabulary</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>NFDD</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">National Feature Data Dictionary</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>NGA</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">National Geospatial Intelligence Agency</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>NSG</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">National System for Geospatial-Intelligence</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>OTW</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Out the Window</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>OWT</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">One World Terrain</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>PBR</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Physically-Based Rendering (PBR)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>SOF</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Special Operations Forces</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>STAC</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SpatioTemporal Asset Catalog</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>STE</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Synthetic Training Environment</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>TIFF</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tagged Image File Format</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>TMS</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tile Map Service</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>TMS</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tile Matrix Set</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>UML</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unified Modelling Language</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Overview"><a class="anchor" href="#Overview"></a>5. Overview</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Section 5 provides the background and history of CDB to provide the context for the CDB X work described in this Engineering Report.</p>
</div>
<div class="paragraph">
<p>Section 6 Documents any models, such as the OGC/ISO Simple Features geometry model that are germane to the CDB 2.0 work.</p>
</div>
<div class="paragraph">
<p>Section 7 Attribution in CDB 1.3 and 2.0: Section 7 discusses the Attribution Topic and the work and recommendations of the Attribution Subgroup.</p>
</div>
<div class="paragraph">
<p>Section 8 Vectors-GeoPackage:</p>
</div>
<div class="paragraph">
<p>Section 9 3D</p>
</div>
<div class="paragraph">
<p>Section 10 top-level-metadata</p>
</div>
<div class="paragraph">
<p>Section 11 Tiling and packaging of data layers</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="BackgroundClause"><a class="anchor" href="#BackgroundClause"></a>6. CDB 2.0 - Background and History</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This section of the ER provides background information on the history and development of version 1 of the CDB standard. This background information provides the basis for the decision for the SOFWERX/SOCOM sponsored CDB X Conceptual Modelling activity.</p>
</div>
<div class="sect2">
<h3 id="_what_is_cdb"><a class="anchor" href="#_what_is_cdb"></a>6.1. What is CDB?</h3>
<div class="paragraph">
<p>The existing CDB standard defines a standardized model and structure for a single, versionable, virtual representation of the earth. A CDB structured data store provides for a geospatial content and model definition repository that is plug-and-play interoperable between database authoring workstations. Moreover, a CDB structured data store can be used as a common online (or runtime) repository from which various simulator client-devices can simultaneously retrieve and modify, in real-time, relevant information to perform their respective runtime simulation tasks. In this case, a CDB is plug-and-play interoperable between CDB-compliant simulators. A CDB can be readily used by existing simulation client-devices (legacy Image Generators, Radar simulator, Computer Generated Forces, etc.) through a data publishing process that is performed on-demand in real-time.</p>
</div>
<div class="paragraph">
<p>The application of CDB to future simulation architectures will significantly reduce runtime-source level and algorithmic correlation errors, while reducing development, update and configuration management timelines. With the addition of the <a href="https://en.wikipedia.org/wiki/High-level_architecture">High Level Architecture</a> - Federation Object Model (HLA/FOM) and <a href="https://en.wikipedia.org/wiki/Distributed_Interactive_Simulation">Distributed Interactive Simulation</a> (DIS) protocols, the application of the CDB standard provides a common environment to which inter-connected simulators share a common view of the simulated environment.</p>
</div>
<div class="paragraph">
<p>The CDB standard defines an open format for the storage, access and modification of a synthetic environment database. A <strong>synthetic environment</strong> is a <a href="https://en.wikipedia.org/wiki/Computer_simulation">computer simulation</a> that represents activities at a high level of realism, from simulation of theaters of war to factories and manufacturing processes. These environments may be created within a single computer or a vast distributed network connected by local and wide area networks and augmented by super-realistic special effects and accurate behavioral models. SE allows visualization of and immersion into the environment being simulated see <a href="https://www.msco.mil/MSReferences/Glossary/MSGlossary.aspx">"Department of Defense Modeling and Simulation (M&amp;S) Glossary", DoD 5000.59-M,</a>.</p>
</div>
<div class="paragraph">
<p>This standard defines the organization and storage structure of a worldwide synthetic representation of the earth as well as the conventions necessary to support all of the subsystems of a full-mission simulator. The standard makes use of several commercial and simulation data formats endorsed by leaders of the database tools industry. A series of associated OGC Best Practice documents define rules and guidelines for data representation of real world features.</p>
</div>
<div class="paragraph">
<p>The CDB synthetic environment is a representation of the natural environment including external features such as man-made structures and systems. A CDB data store can include terrain relief, terrain imagery, three-dimensional (3D) models of natural and man-made cultural features, 3D models of dynamic vehicles, the ocean surface, and the ocean bottom, including features (both natural and man-made) on the ocean floor. In addition, the data store can include the specific attributes of the synthetic environment data as well as their relationships.</p>
</div>
</div>
<div class="sect2">
<h3 id="_ogc_cdb_1_x_history"><a class="anchor" href="#_ogc_cdb_1_x_history"></a>6.2. OGC CDB 1.x History</h3>
<div class="paragraph">
<p>The CDB specification was initially authored by CAE Inc. on November 2005 under a contract administered by the US Army Program Executive Office for Simulation Training and Instrumentation (PEO STRI) to meet requirements set by US Special Operations Command (USSOCOM)for interoperable, high-performance mission rehearsal and simulation federations. CAE along withother companies (e.g., Flight Safety Inc., New York, NY, USA, Presagis Inc., Montréal, QC, Canada, etc.) have delivered hundreds of simulation channels based on CDB to customers in the US, Canada, UK, Germany, Turkey, Israel, Singapore, Australia, Brunei and other countries.</p>
</div>
<div class="paragraph">
<p>To improve the efficiency of M&amp;S analysis, facilitate data and services’ interaction and communications, and reduce operational cost and complexity, the CDB Community led by CAE submitted the industry specification version 3.2 into the OGC for consideration as an OGC Best Prctice. Beginning in 2013, CDB was discussed and demonstrated at OGC Technical Committee meetings. The industry specification was approved by the OGC Members and released as an <a href="https://portal.opengeospatial.org/files/?artifact_id=61935">OGC Best Practice</a>. The OGC CDB SWG then split the two Best Practice documents into 12 volumes, removed unnecessary content by providing links to authoritative sources, and began evolving terminology to be consistent with OGC/ISO terms and definitions. CDB Version 1.0 was approved by the OGC membership in October 2016 as a new standard.</p>
</div>
<div class="paragraph">
<p>The CDB SWG continued the evolution of CDB.  Version 1.1 of the CDB Standard and related Best Practices was approved in August 2018. One of the main enhancements for version 1.1 was guidance on how to encode and include global and local spatial metadata in a CDB data store. Version 1.1 also moved to having file extensions being generic in all CDB Requirements clauses. This was done to allow inclusion of new (additional) file types in a CDB data store. Further, a number of CDB User communitu chnages requests were included in version 1.1.</p>
</div>
<div class="paragraph">
<p>Version 1.2 of the CDB Standard was approved as an official OGC Standard in August 2020.  The major enhancement in CDB version 1.2 was the inclusion of the ability to add OGC GeoPackage formated containers into a CDB data store. There are two new CDB volumes that explicitly provide requirements and guidance on using GeoPackages in a CDB data store. Version 1.2 also includes two substantive changes. First, the way that CDB’s Primary Alternate Terrain Elevation dataset was defined in CDB Version 1.1 and earlier causes problems with standard open source libraries used to read and process these data. The SWG agreed  to  changes  address  the  issues  that  ground  simulation  has  with  CDB  gridded  terrain meshes. The second substantive change is that CDB  1.1  and  earlier  supported  a  single  (hard-coded)  file  format  per  dataset.  To  allow  other  fileformats to be used in a CDB Data Store, the need to explicitly specify the file format that is used to physically store the components of a given dataset is required.The  current  CDB  metadata  and  controlled  vocabulary  definitions  (See  Clauses  1.4.3,  3.1,  and  5.1  inCDB Volume 1: Core) has a file called Datasets.xml listing all possible datasets that can be used in aCDB  data  store.  The  file  has  been  expanded  to  indicate  the  encoding  format  used  to  encode  the dataset and its components.</p>
</div>
<div class="paragraph">
<p>The CDB community anticipates that additional standardization work will be required to prescribe content appropriate to targeted simulation applications, new use cases, and application in new domains. For example, in its current form, the CDB standard does not mandate synthetic environmental richness, quality and resolution.</p>
</div>
</div>
<div class="sect2">
<h3 id="_ogc_cdb_2_0"><a class="anchor" href="#_ogc_cdb_2_0"></a>6.3. OGC CDB 2.0</h3>
<div class="paragraph">
<p>Beginning in late 2020, the OGC CDB SWG began discussion on what CDB version 2.0 might have as an architecture, what additional encodings and.or formats might be supported, and so forth. These discussion also included initial thoughts on a CDB 2.0 conceptual model. However, progress was slow - in part due to other OGC Member commitments and resource constraints.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
In the OGC, a major version number indicates that the new version is not backwards compatible with previous versions of the standard. The use of major revisions allows for a major evolution and enhancement to any OGC Standard.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>A number of the major requirements for version 2.0 have been discussed for some time and have been captured in various OGC documents including formal Change Requests and OGC Interoperability Program Engineering Reports.</p>
</div>
<div class="paragraph">
<p>Some of the major enhancements that have been discussed and documented are:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Develop an approach (and model?) for using any attribution controlled vocabulary in a CDB data store.</p>
</li>
<li>
<p>Determine if the current tiling scheme is optimal or should be enhanced/replaced with a better tiling approach.</p>
</li>
<li>
<p>Describe explicitly how the CDB model may or may not align with the OGC DGGS standard;</p>
</li>
<li>
<p>Provide best practice details on how to use others OGC standards such as WMS and WFS as well as they new OGC APIs to access existing CDB data stores. This work may require Interoperability Experiments to better understand the implications of these decisions;</p>
</li>
<li>
<p>Extend the supported encodings and formats for a CDB structured data store to include the use of the CityGML, and InDoorGML standards as well as other broadly used community encoding standards, such as glTF and GeoTIFF. This work may require performing OGC Interoperability Experiments to better understand the implications of these decisions.</p>
</li>
<li>
<p>Further align CDB terminology to be fully consistent with OGC/ISO terminology.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Making these enhancements may allow the use and implementation of a CDB structured data store for application areas in addition to aviation simulators.</p>
</div>
</div>
<div class="sect2">
<h3 id="attrtestbed13"><a class="anchor" href="#attrtestbed13"></a>6.4. Attribution - An OGC Testbed 13 CDB Activity in</h3>
<div class="paragraph">
<p>The <a href="http://docs.opengeospatial.org/per/17-042.html">CDB Engineering Report</a> (ER) summarizes the CDB sub-thread activity. The CDB activity was divided into three main work packages:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A feasibility study;</p>
</li>
<li>
<p>The implementation of data models and schemas mapping that are based on the feasibility study results; and</p>
</li>
<li>
<p>A set of OGC web services that implement the CDB in the form of WFS and WCS (Web Coverage Service) instances.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This Testbed 13 Engineering Report describes the approach taken and the results of the experimentation:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The conceptual model of an OGC CDB 1.0 datastore as a UML (Unified Modeling Language) diagram to show different datasets (the 3D models, vector features and coverages) structure;</p>
</li>
<li>
<p>How to process and use a NAS-based Profile as a CDB feature/attribute data model or a GML-SF0 application schema;</p>
</li>
<li>
<p>How to access, navigate and visualize a CDB dataset using OGC web services (such as WFS and WCS).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The Testbed 13 CDB activity also resulted in a formal <a href="http://ogc.standardstracker.org/show_request.cgi?id=544">OGC Change Request Proposal</a> that was submitted for consideration in April 2018. The Change Request provides:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Recommendations for replacing FACC feature code and indexing structure to be consistent with the application schemas (e.g. NAS data model) under discussion for the OGC CDB 2.0;</p>
</li>
<li>
<p>Recommendations for supporting application schemas in CDB (level of complexity: Esri Geodatabase, GML-Simple Features Level 0 application schema) are being discussed for the OGC CDB 2.0;</p>
</li>
<li>
<p>A method to expand the supported encodings and formats for an OGC CDB compliant datastore;</p>
</li>
<li>
<p>Guidance on generating a coherent attribute schema for CDB 1.0 based on the "CDB_Attribute.xml" file.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="CDB2Models"><a class="anchor" href="#CDB2Models"></a>7. CDB X Design Goals, Use Cases, and Conceptual/Logical Models</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This section documents draft design objectives, the targer use cases, and the CDB X Conceptual and Logical Models.</p>
</div>
<div class="sect2">
<h3 id="_cdb_x_design_goals_and_objectives"><a class="anchor" href="#_cdb_x_design_goals_and_objectives"></a>7.1. CDB X Design Goals and Objectives</h3>
<div class="paragraph">
<p>The following are the design goals and objectives for a tiled CDB X repository.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Be fast :-)</p>
</li>
<li>
<p>Geometry model: All geometry for any vector feature data shall be compliant with the OGC/ISO Simple Features Geometry Model.</p>
</li>
<li>
<p>Correlation Requirement: CDB-T, CDB-S, CDB-G and CDB-A profiles shall correlate to the data defined in CDB-F</p>
</li>
<li>
<p>Derivative and Optional structures: CDB-T, CDB-S, CDB-G and CDB-A profiles shall encode its rules and mechanisms for optimization in a self-describing form.</p>
</li>
<li>
<p>Holistic Foundation: CDB-T, CDB-S, CDB-G and CDB-A structures shall all be generated from the data defined in CDB-F</p>
</li>
<li>
<p>Deployment: CDB-F shall be able to be deployed on the cloud, in relational databases, and on a file system.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_use_cases"><a class="anchor" href="#_use_cases"></a>7.2. Use Cases</h3>
<div class="paragraph">
<p>The following are summaries of key use cases identified during this project.</p>
</div>
<div class="paragraph">
<p><code>Tactical Use Case</code>: &lt;need short description&gt; Possible impact: Define a profle of the foundation data in a form most suitable for tactical devices (CDB-T, where T is for tactical), such as ATAK.</p>
</div>
<div class="paragraph">
<p><code>Gaming Use Case</code> &lt;need short description&gt; Possible impact: Define a derivative and optional structure of the .foundation data in a form most suitable for gaming devices
(CDB-G, where G is for gaming), such as Unreal or Unity.</p>
</div>
<div class="paragraph">
<p><code>M&amp;S Use Case</code> &lt;need short description&gt; Possible impact: Define a porfile of the foundation data in a form most suitable for simulators (CDB-S, where S is for simulators)</p>
</div>
<div class="paragraph">
<p><code>Analytics Use Case</code> &lt;need short description&gt; Possible impact: Define a derivative and optional structure of the datasets in a form most suitable for analytics using AI/ML (CDB-A, where A is for analytics)</p>
</div>
<div class="paragraph">
<p><code>Data Transport</code> &lt;need short description&gt; Possible impact: Optimize the speed data synchronization between all echelons and data systems for CDB-F and CDB-T</p>
</div>
<div class="paragraph">
<p><code>DDIL Deployment</code> CDB-F, CDB-T, and CDB-A must be able to deploy in DDIL environments.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Optimization For Use Cases: CDB-S, CDB-G and CDB-T may tile/generate LODs and derivative data types (assuming they are OGC and/or Khronos standards) in a manner to optimize efficiency and performance leveraging a small, finite set of tiling schemes  (Profile should include Tiling structure, LOD structure, optimization, etc.) CDB-A may generate topology, extended attributes and derivative data types (assuming they are OGC and/or Khronos standards) in a manner to optimize efficiency and performance leveraging a small, finite set of relationship schemes
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><strong>This is future work and actually would not be part of a core CDB-X standard Configuration Management.</strong>  Define an abstract mechanism for configuration management applicable to multiple deployment strategies (file systems, RDMS and cloud) relational databases for CDB-F, CDB-S, CDB-G, CDB-T and CDB-A.  Support Versioning, attribution, synchronization</p>
</div>
</div>
<div class="sect2">
<h3 id="_definition_of_concepts"><a class="anchor" href="#_definition_of_concepts"></a>7.3. Definition of Concepts</h3>
<div class="sect3">
<h4 id="_foundation_data"><a class="anchor" href="#_foundation_data"></a>7.3.1. Foundation Data</h4>
<div class="paragraph">
<p>Foundation data are the authoritative data and models that have been curated per the rules defined in the CDB standard, and stored in a CDB repository. Foundation data utilizes known and consensus controlled vocabularies for attribution, has been curated based on the requirements as stated in the CDB standard, and the required metadata has been documented.</p>
</div>
<div class="paragraph">
<p>For example, as per the current CDB standard (and industry best practice), a road network (RoadNetwork dataset in CDB 1.2) could be considered as foundation data. In CDB 1.2, there are a set of requirements associated with how the roads data are structured and attributed and stored in a CDB repository.</p>
</div>
<div class="paragraph">
<p>The specification of any foundation data layer (such as RoadNetwork) at the logical model level can be 100% independent from the storage environment, end user use case(s) and so on while at the same time also having the requirements based on industry knowledge and use case requirements.</p>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="paragraph">
<p>Requirement: The RoadNetwork shall be considered as a foundation data layer in a CDB repository.</p>
</div>
<div class="paragraph">
<p>Sub-requirement: All roads in a roads layer SHALL use a known road classification system to identify the roads type. This could be the US DoT classification, the current FACC classification, or the newer GDDM.</p>
</div>
<div class="paragraph">
<p>Sub-requirement: The RoadNetwork SHALL be topologically structured. (This enables network analysis etc). NOTE: The how is not specified at the logical model level.</p>
</div>
<div class="paragraph">
<p>Sub-requirements: The RoadNetwork Dataset SHALL be used to specify all of the road networks..</p>
</div>
<div class="paragraph">
<p>Notice that there is no mention of the actual storage structure, enabling software, storage formats, tiling and so forth.</p>
</div>
</div>
<div class="sect3">
<h4 id="_reference_systems"><a class="anchor" href="#_reference_systems"></a>7.3.2. Reference Systems</h4>

</div>
</div>
<div class="sect2">
<h3 id="_3d_models"><a class="anchor" href="#_3d_models"></a>7.4. 3D Models</h3>

</div>
<div class="sect2">
<h3 id="_attribution_2"><a class="anchor" href="#_attribution_2"></a>7.5. Attribution</h3>

</div>
<div class="sect2">
<h3 id="_tilingcoveragesimagery"><a class="anchor" href="#_tilingcoveragesimagery"></a>7.6. Tiling/Coverages/Imagery</h3>

</div>
<div class="sect2">
<h3 id="_vector_data"><a class="anchor" href="#_vector_data"></a>7.7. Vector Data</h3>
<div id="img_geometry-model" class="imageblock text-center">
<div class="content">
<img src="images/Simple_Features_Model.jpg" alt="Simple Features Model" width="800">
</div>
<div class="title">Figure 1. Simple Features Geometry Model.</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Attribution"><a class="anchor" href="#Attribution"></a>8. CDB-X Attribution</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_overview_of_the_cdb_x_attribution_work"><a class="anchor" href="#_overview_of_the_cdb_x_attribution_work"></a>8.1. Overview of the CDB-X Attribution Work</h3>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
This content of this section was authored by Greg Peele, leader of the Attributes Subgroup of the CDB-X activity. FOr purposes of this section, the Attribute Subgroul is hereafter referenced simply as the <code>subgroup</code>.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_background_history_and_the_path_forward"><a class="anchor" href="#_background_history_and_the_path_forward"></a>8.2. Background, History, and the Path Forward</h3>
<div class="paragraph">
<p>One of the strengths of CDB as an interoperability standard, beyond the underlying geospatial representation standards it deploys, is the adoption of a controlled semantic vocabulary for feature types, attributes, and values. This approach - variously called a data model, a feature dictionary, or an entity catalog - is a necessary component of semantic interoperability between simulations. The feature attribution model goes beyond specifying the physical geometry, spatial referencing, and file formats used to represent the CDB data store to ensure simulations have a consistent and correlated deep understanding of the content semantics - to ensure a road is always a road, a lake is distinct from a river, width and height always has a consistent meaning, and so on. This semantic interoperability is necessary to ensure proper operation of simulation behaviors both for supporting human players and artificial intelligence agents.</p>
</div>
<div class="paragraph">
<p>The current CDB standard for attribution is primarily based on the officially obsolete DIGEST Feature Attribute Coding Catalogue (FACC) standard and has not integrated ongoing development and standards developed by other activities since OGC CDB 1.0. For several years, there have been discussions concerning how to modify the CDB standard to support newer feature attribution coding schemes and controlled vocabularies to align with current standards and best practices. While the existing CDB standard theoretically supports representing other controlled vocabularies through modifying the CDB metadata XML (with some gaps identified in this report), at this time no changes to the CDB standard to adopt or promote other coding schemes has occured. This section provides 1.) information on the current approach in CDB 1.x, 2.) requirements for evolving the CDB standard to accommodate newer coding schems and 3.) the experimental framework and results from the work in the CDB-X activity.</p>
</div>
<div class="sect3">
<h4 id="_current_cdb_1_x_attribution_approach"><a class="anchor" href="#_current_cdb_1_x_attribution_approach"></a>8.2.1. Current CDB 1.x Attribution Approach</h4>
<div class="paragraph">
<p>OGC CDB versions 1.0 and higher use a CDB Feature Data Dictionary (FDD) as the controlled vocabulary for attribution.  An Excel spreadsheet version of the CDB 1.X Feature Data Dictionary is available on the public <a href="https://external.ogc.org/twiki_public/pub/CDBswg/WebHome/CDB_FDD.xlsx">CDB wiki</a>.</p>
</div>
<div class="paragraph">
<p>The CDB 1.x feature codes and subcodes are primarily based on the  <a href="https://www.dgiwg.org/DIGEST">DIGEST Feature and Attribute Coding Catalog 2.1</a> (FACC) with additional concepts from a few other sources notably <a href="https://standards.sedris.org/18025">ISO 18025 EDCS</a>.  From that website: <em>FACC) specifies geospatial information concepts used by member nations of the multi-national Defence Geospatial Information Working Group (DGIWG) community. These concepts characterize aspects of real-world entities (or objects) and related properties, including those that are not necessarily visible or have a tangible physical form (e.g., airspace). The DGIWG FACC is a comprehensive dictionary and coding scheme for feature types, feature attributes (properties or characteristics associated with features), and attribute values (domain of feature attributes).</em></p>
</div>
<div class="paragraph">
<p>In the FACC, each major feature category is further divided into subcategories identified by the second character of the five-character code containing an alphabetic value from "A" to "Z". Finally, the third, fourth, and fifth characters of the five-character feature code are a numeric value from 000 to 999. This value provides unique feature type identification within categories. Thus, all features must be identified by all five alphanumeric characters. For example, the feature named "Building" is denoted by the code "AL015". Feature codes are listed in Annex A of the FACC Data Dictionary.</p>
</div>
<div class="paragraph">
<p>Each feature is associated with a textual description, which provides a human readable dictionary definition for the feature. Each Feature Code is also associated with a short human readable name.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Code</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Name</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Definition</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">AA010</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mine</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An excavation made in the earth for the purpose of extracting natural deposits. (See also AQ090)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">BB150</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Landing Place</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A place on shore where landing from the sea is possible.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DB180</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Volcano</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A mountain or hill, often conical, formed around a vent in the earth&#8217;s crust through which molten rock, ash, or gases are or have been expelled.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">FA001</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Administrative Area</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An area controlled by administrative authority.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">GB075</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Taxiway</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A prepared surface providing access to/from runways and the aircraft parking area, terminal area, or service area, etc.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>An OGC <a href="http://ogc.standardstracker.org/show_request.cgi?id=544">Change Request Proposal</a> (CRP) related to CDB attribution was generated during OGC Testbed 13:</p>
</div>
<div class="paragraph">
<p><code>NOTE: An overview of the Testbed 13 activity is provided in the <a href="#attrtestbed13">Background Section</a> section of this ER.</code></p>
</div>
</div>
<div class="sect3">
<h4 id="_ongoing_standards_development"><a class="anchor" href="#_ongoing_standards_development"></a>8.2.2. Ongoing Standards Development</h4>
<div class="paragraph">
<p>Originally developed by the Defence Geospatial Information Working Group (DGIWG) in June of 1991 DIGEST FACC was based on earlier standards. DIGEST FACC was most recently updated to the widely used 2.1 version in September of 2000. FACC was officially sunsetted (retired) by DGIWG on October 17, 2012 (see <a href="http://portal.dgiwg.org/files/7827">disposition here</a>) and by the NSG on December 31, 2012 (see <a href="https://gwg.nga.mil/documents/asfe/DGIWG_FACC.htm">disposition here</a>) after a long deprecation period. FACC was replaced by successor standards DGIWG Feature Data Dictionary (DFDD) and associated extension US National System for Geospatial Intelligence (NSG) National Feature Data Dictionary (NFDD). These successor standards were a largely compatible superset of the FACC codes and definitions that did not make any fundamental architecture changes. As a consequence, many commercial and government tools and standards - including CDB 1.0 - continued with FACC 2.1 despite it being officially retired.</p>
</div>
<div class="paragraph">
<p>The successor standards did bring in additional definitions loosely inspired by <a href="https://standards.sedris.org/18025/">ISO/IEC 18025:2005 EDCS</a> and maritime definitions from  <a href="https://iho.int/uploads/user/pubs/standards/s-57/31Main.pdf">IHO ENC S-57</a>. The NFDD standard eventually was reformulated into the <a href="https://nsgreg.nga.mil/voc/registers.jsp?register=NCV">NSG Core Vocabulary (NCV)</a> and <a href="https://nsgreg.nga.mil/doc/view?i=5042">NSG Application Schema (NAS)</a> which recast the existing standards in terms of logical data models expressed using the Unified Modeling Language (UML) in compliance with the <a href="https://www.iso.org/obp/ui/#iso:std:iso:19109:ed-2:v1:en">ISO 19109:2015 Geographic Information Rules for Application Schemas</a> and the semantic <a href="https://www.w3.org/OWL">Web Ontology Language (OWL)</a> vocabulary. Both the DFDD and NFDD have been retired as well.</p>
</div>
<div class="paragraph">
<p>The current NAS specification also introduced substantial vocabulary changes describing the metamodel. The most substantial change was that the term "feature" was generalized into the more abstract term "entity" to accommodate vehicles, lifeforms, devices, and abstract ideas like metadata and statistics. The term "enumeration" is still in use to describe a controlled vocabulary of attribute values. However the alternate term "codelist" is also used and the actual values themselves are generally referred to as "listed values." The NAS also introduced a new conceptual model for relating different entities through "associations". Such associations themselves are also entities that mediate complex relationships between entities.</p>
</div>
<div class="paragraph">
<p>The US Army Geospatial Center codified the <a href="https://nsgreg.nga.mil/doc/view?i=3029">NAS 7.0</a> reformulation of NFDD into a practical subset targeted at the mission of outdoor environments for the ground warfighter, with encoding standards accommodating limitations of Shapefiles and SQL databases in implementing the general NAS model. This particular application schema became the <a href="https://ggdm.erdc.dren.mil/pages/contents/v3.0.html">Ground-Warfighter Geospatial Data Model (GGDM)</a>. Through a set of various NATO initiatives, the parallel DFDD eventually became the <a href="https://www.dgiwg.org/dgiwg-standards/205">Defence Geospatial Information Model (DGIM)</a>. DGIM also aligned with the NAS 7.0 and considerably overlapped with and took inspiration from GGDM 3.0, albeit with more divergence. The DGIM extended the NAS with some additional definitions from ongoing data model development for the maritime <a href="https://iho.int/en/s-100-universal-hydrographic-data-model">IHO ENC S-100 Universal Hydrographic Data Model</a> and the <a href="https://www.aixm.aero">Aeronautical Information Exchange Model (AIXM)</a> which may be of substantial relevance to CDB for addressing any gaps found in the NAS.</p>
</div>
<div class="paragraph">
<p>Concurrently, NSG has published an official <a href="https://nsgreg.nga.mil/doc/view?i=3031">NAS 8.0</a> update. This is the current officially mandated standard with follow-up quarterly updates to address errata, add extensions, and reformulate documentation. The most recent update at the time of writing is the <a href="https://nsgreg.nga.mil/doc/view?i=5042">NAS X-3</a> published on June 30, 2020. These updates introduced substantive changes to move away from legacy representations, separated out the traditional FACC 5-letter feature codes and 3-letter attribute codes into a separate "Platform Specific Model" document, separated out view assignments to a separate document, and added definitions for OGC GML concepts. However, the core of NAS today is still recognizably derived from its distant FACC ancestor and still has substantial overlap with it.</p>
</div>
<div class="paragraph">
<p>A full diagram of the lineage of various geographic information standards is presented here as developed by Geometric Progress LLC for the STE One World Terrain Data Model Working Group.</p>
</div>
<div class="sect4">
<h5 id="_data_model_lineage_digest_facc_branch"><a class="anchor" href="#_data_model_lineage_digest_facc_branch"></a>Data Model Lineage - DIGEST FACC Branch</h5>
<div class="imageblock text-center">
<div class="content">
<img src="Experiments/Attribution/DataModelLineage.png" alt="DataModelLineage" width="800">
</div>
</div>
<div id="img_DataModelLineage" class="paragraph">
<p><strong>Figure1. Data Model Lineage Chart - DIGEST FACC Branch.</strong></p>
</div>
</div>
<div class="sect4">
<h5 id="_data_model_lineage_iso_18025_branch"><a class="anchor" href="#_data_model_lineage_iso_18025_branch"></a>Data Model Lineage - ISO 18025 Branch</h5>
<div class="imageblock text-center">
<div class="content">
<img src="Experiments/Attribution/DataModelLineage2.png" alt="DataModelLineage2" width="800">
</div>
</div>
<div id="img_DataModelLineage" class="paragraph">
<p><strong>Figure2. Data Model Lineage Chart - ISO 18025 Branch.</strong></p>
</div>
<div class="paragraph">
<p>Directly relevant to the CDB-X attribution experiment is the adoption of NAS compliance as a design goal and the Ocotber 2019 selection of GGDM 3.0 as the starting point to meet that goal for the US Army Synthetic Training Environment (STE) One World Terrain (OWT) data model. The STE Cross-Function Team saw substantial benefits to moving toward NAS by using GGDM. This was after after verifying that the GGDM <a href="Experiments/Attribution/SE Core to GGDM Gaps.xlsx">met over 90% of current requirements for the existing SE Core use cases</a> for the Army behaviors that were currently met by the existing SE Core Environment Data Model based on <a href="https://standards.sedris.org/18025">ISO 18025</a>. However substantial gaps for future use cases were identified that were relevant to this experiment. NAS compliance and GGDM interoperability will align the STE simulation and training semantics with existing use cases for geospatial intelligence and operational use. This is directly relevant to the Army&#8217;s goal of "train as you fight." However, unlike the AGC use case for Shapefiles and GeoPackage SQLite tables for point, linear, and polygon features, the OWT use case primarily intends to deploy GGDM attribution attached to 3D content such as triangle mesh models at the mesh level, the vertex level, the triangle level, and applied to model surfaces via raster coverage texturing. The OWT 3D model approach is also relevant to notional <a href="https://www.khronos.org/gltf/">glTF</a> mesh layers and geotypical and geospecific models explored in other sections of this Engineering Report. There are similar efforts in NGA - notably the FG3D effort - that are also working toward the integration of 3D content with semantic standards.</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_cdb_x_discussion_and_requirements_for_cdb_x_experimentation"><a class="anchor" href="#_cdb_x_discussion_and_requirements_for_cdb_x_experimentation"></a>8.3. CDB-X Discussion and Requirements for CDB-X Experimentation</h3>
<div class="paragraph">
<p>The following subsections describe the attribution experiments performed as part of the CDB Research Project.</p>
</div>
<div class="sect3">
<h4 id="_experimentation_background_ggdm"><a class="anchor" href="#_experimentation_background_ggdm"></a>8.3.1. Experimentation Background - GGDM</h4>
<div class="paragraph">
<p>An early improvement identified for CDB X was migrating the CDB attribution to NAS compliance using GGDM as the initial set of definitions. This assessment was based on input from current CDB stakeholders and discussions at OGC CDB SWG meetings - particularly given that STE One World Terrain was identified as being a desirable interoperability target. A CDB-X Tech Sprint participant has described work as part of the team recommending a Data Model for the U.S. Army One World Terrain (OWT) effort in multiple presentations to the OGC Interopable Simulation and Gaming Domain Working Group (ISG DWG).  The most recent OGC presentation by Greg Peele is titled <a href="https://portal.ogc.org/files/?artifact_id=93666"><strong>"Entities, Attributes, and Enumerants, Oh My!  Applying GGDM for Interoperable One World Terrain Semantics"</strong></a>. While this presentation is out of date relative to OWT development and this experiment the content provides context.</p>
</div>
<div class="paragraph">
<p>The GGDM is a selection of 624 feature types from the NAS 7.0 (with some duplicates for different geometry representation) to meet the mission requirement of outdoor environment representation for the ground warfighter. There is also a set of associated attribution for each feature type. For attributes with a controlled set of values - also known as enumerants or codelists - the set of values is either explicitly enumerated with integer codes or externally referenced via a separate dictionary of text strings. In principle, every GGDM feature type should match up to an NAS 7.0 logical entity, every GGDM attribute should match up to an NAS 7.0 attribute, and every GGDM enumerant should match up to an NAS 7.0 listed value. All of these should then match vocabulary terms defined in the NCV 2.0. In practice, GGDM did augment the NAS with a small number of additional definitions integrated from the NGA Topographic Data Store (TDS) and the US Environmental Protection Agency Water Resource Database (WRDB).</p>
</div>
<div class="paragraph">
<p>GGDM adapted the more abstract NAS entity types by binding them to specific geometric representations: Point, Curve (Linear / Line String), Surface (Polygon), and Table (abstract / no geometry). Each geometric binding shared the same 5-letter FACC-like code as specified by the NAS Platform Specific Model (available a separate file in more recent NAS versions) but suffixed the feature name with an appropriate character 'P', 'C', 'S', or 'T'. The attribute definitions were bound to entity types per entity geometry. So in cases where more than one geometry applied to the same entity type, a particular {<strong>Something missing here</strong>} may be present on one but not the other or on both depending on the specification {<strong>Which specification?</strong>}. In the vast majority of cases GGDM only defined one geometry type per entity type. The GGDM developers did clarify that an implementation that did not split out entity types by geometry but used some other mechanism to constrain attribute presence and dataset organization by geometry type to align with GGDM requirements would still be considered compliant with GGDM since in both cases the results comply with the NAS logical data model.</p>
</div>
<div class="paragraph">
<p>GGDM also organized entity types into a "feature index" that specified broader themes or layers such as Hydrography. These themes were also specific to each geometry type. The feature index also defined five levels of detail: Global, Regional, Local, Specialized, and Composite. Each entity type was cross-referenced to specify in which themes the entity belonged to at each level of detail, or to mark that a feature was not represented at a particular of level of detail. This approach to feature organization substantially diverged from the base NAS standard. The NAS instead defined a set of "view groups" (more abstract) and "views" (more specific) to create a two-level hierarchy of entity type organization but did not define any levels of detail. The GGDM feature index themes appear to be related to an older version of the NAS "view groups" but the two are currently out of sync. Unlike in GGDM, NAS views are non-exclusive so an entity type may belong to more than one view, although one view is typically marked as the primary view for that entity type. In more recent revisions of the NAS such as NAS X-3, the entity to view assignments are available as a separate document from the main content definitions.</p>
</div>
<div class="paragraph">
<p>One substantial innovation of NAS and GGDM over earlier standards is moving from a flat table-based feature dictionary to a full logical data model compliant with ISO 19109 which allows for multi-valued attributes, range-valued attributes, complex attributes with named sub-fields, and relationships between features. The NAS logical data model expresses these innovations in pure UML without implementation guidance, while the GGDM defines an encoding to represent them in traditional table-based systems.</p>
</div>
<div class="paragraph">
<p>For multi-valued attributes, GGDM defines a separate attribute code for each value with the second value and so on suffixing the attribute code with an ordinal index. For example, for FFN "Feature Function", the first value would be FFN, the second value would be FFN2, the third value would be FFN3, and so on. GGDM sets a max cardinality of 3, but there is no technical reason why more values could not be used in other applications.</p>
</div>
<div class="paragraph">
<p>For range-valued attributes, GGDM splits them into three attribute values of upper, lower, and interval closure. The latter is an enumeration describing whether the lower and upper values are considered part of the range. For example for WDA "Average Water Depth" you would have WDAL "Average Water Depth &lt;lower bound&gt;", WDAU "Average Water Depth &lt;upper bound&gt;", and WDAC "Average Water Depth &lt;interval closure&gt;" as three separate attributes. This is a replacement for the clumsy approach in DIGEST FACC that used enumerations of a predetermined set of ranges for these attributes instead of explicitly specifying the range numerically.</p>
</div>
<div class="paragraph">
<p>Finally, for complex aggregate attributes and feature relationships, GGDM defines a scheme to take the logical value relationship as a hierarchy and flatten it into prefixed attributes that combine the datatype or feature type with the target attribute code. GGDM defines this flattening such that no attribute code exceeds 10 characters. This means some particularly complex attributes have the prefixed names truncated. An example of a complex aggregate attribute is RIN_RTN "Route Identification &lt;route designation&gt;" - the NAS UML defines Route Identification as a separate class with a Route Designation attribute. An example of a feature relationship expressed as an attribute is ZI006_MEM "Note : Memorandum" which is a reference to a feature of type Note with an attribute value of Memorandum. In some cases the related features are fully embedded in the source feature and thus duplicated for every feature; in others the related feature is referenced by a foreign key using the UFI "Unique Entity Identifer" attribute.</p>
</div>
<div class="paragraph">
<p>Each of these three cases can also be combined with each other. For example, a multi-valued or range-valued attribute on a related feature, or a chain of multiple aggregated or related features. However doing so tends to quickly hit the 10 character truncation limit for the attribute code. While currently used for Shapefiles and GeoPackage implementations, this particular encoding scheme for complex attributes is not strictly necessary to claim GGDM conformance. Directly representing multi-valued, range-valued, and complex attributes natively by some other mechanism such as JSON, binary markup, or separate SQL tables would still be considered compliant with the GGDM logical data model and the NAS so long as the attribute semantics remains the same. Also, using the label or natural language name for entities, attributes, and enumerations instead of the FACC-like codes the actual attribute storage would still be considered compliant with GGDM and NAS. This is a physical encoding implementation choice.</p>
</div>
<div class="paragraph">
<p>Given the historical lineage of the NAS and GGDM, there is a substantial overlap between GGDM and the CDB 1.x Feature Data Dictionary. However, neither standard is a strict superset of the other. NAS and GGDM have changed existing definitions inherited from FACC as well as adding many new definitions. CDB has made substantive changes to add a new concept of "Feature Subcode" that did not exist in prior standards. This was done by bringing in a different set of definitions from ISO 18025, and adding new definitions for aeronautics and building interior components. STE One World Terrain, in particular, had identified gaps in the GGDM standard for building interiors, aeronautics, vegetation, and materials which are all current CDB use cases. Therefore the existing CDB extensions over FACC may end up being complementary to GGDM rather than redundant and may correlate with ongoing standards development in other domains.</p>
</div>
</div>
<div class="sect3">
<h4 id="_experimentation_goals"><a class="anchor" href="#_experimentation_goals"></a>8.3.2. Experimentation Goals</h4>
<div class="paragraph">
<p>Given the strong consensus that adopting NAS using the GGDM as a starting point represents the best path forward for CDB X, an experiment was planned to validate this hypothesis and determine what gaps and difficulties this change would introduce. There was a particular focus on any changes in CDB storage structure would be implied by moving to GGDM. During Phase 3 of the CDB X Tech Sprint, an initial metamodel was created describing the proposed schema for representing the target GGDM data model and a notional SQLite metadata encoding to store it in a more runtime-efficient way than the current CDB 1.x XML metadata.</p>
</div>
<div class="paragraph">
<p>The first planned experiment was to create a prototype software code library representing the proposed CBD X feature dictionary metamodel. This prototype {<strong>Not sure but I changed future to past assuming the prototype was implemented</strong>} defined runtime classes for each of the metamodel concepts. The prototype also implemented a proof of concept reader that could load both the existing CDB 1.x XML feature and attribute dictionary metadata as well as loading the GGDM 3.0 entity catalog as conventionally formatted in an Excel spreadhseet. The prototype would then finally implement proof of concept support for storing the dictionary content in the proposed SQLite metadata encoding. A stretch goal of also implementing sample XML and JSON encodings for comparison was included. The primary goal of the first experiment was not necessarily to fully implement all of the capabilities, but rather use the prototype to identify and document any deficiences or mismatches in the proposed CDB X feature dictionary metamodel - ideally with proposed corrections - that would interfere with migrating existing CDB 1.x feature data or representing the proposed NAS-compliant dictionary.</p>
</div>
<div class="paragraph">
<p>Since CDB 1.x and GGDM have essentially compatible semantics of what an entity (feature) type is, the next phase of the experiment was to assess data model mappings between GGDM, TDS, and CDB. This was to determine how cleanly the existing CDB feature types translate to GGDM feature types and identify any substantial gaps in GGDM as well as mappings that lose precision or involve additional complexity. Particularly interesting is identifying how much of the mapping preserves the existing CDB feature code, feature label, or ideally both. There was also a plan to use the gaps identified to suggest a mitigation strategy for filling those gaps either using existing CDB 1.x definitions or from other open standards and to examine similar efforts conducted by SE Core and STE One World Terrain. While initial assessments suggested that attribution and enumerant values would likely map mostly directly due to both CDB and GGDM largely pulling from the same FACC ancestry, documenting any mismatches we found regarding attribute values was planned. GGDM and NAS entity types and attribution were reviewed for describing feature-level metadata to propose a possible mechanism to implement that in CDB X. Ideally, and as another stretch goal, the subgroup planned to adapt the prototype software library developed for the first experiment to use name and code matching to generate an automated mapping to compare with the manual assessment. However, there was not time to meet that stretch goal.</p>
</div>
<div class="paragraph">
<p>The third "experiment" is more of a thought experiment to coordinate with the tiling, vector features, and 3D model subgroups to identify what changes to the feature dictionary and data model will imply on changes to structure and content of the CDB datasets - particularly vector and 3D model datasets. This would identify the key areas of standards development for attribution outside of the feature dictionary metadata itself. It may also inspire changes to the CDB dataset structure and content to better align with the target GGDM data model.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_cdb_x_experiment_findings"><a class="anchor" href="#_cdb_x_experiment_findings"></a>8.4. CDB X Experiment Findings</h3>
<div class="paragraph">
<p>The three experiments conducted successfully generated a number of findings initially captured as <a href="https://github.com/sofwerx/cdb2-concept/issues">Github tickets</a> {<strong>Will need to change this somehow to a publicly accessible Git issue set</strong>}. The prototype code library for the feature attribute metamodel was partially implemented to a sufficient degree to:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Identify the mismatches with both the CDB 1.0 feature dictionary and the target GGDM 3.0 data dictionary and</p>
</li>
<li>
<p>Provide partial implementation for both the core SQLite encoding and the stretch goal XML encoding, but not the JSON encoding.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>These results generated substantial interest among the STE One World Terrain stakeholders to sponsor the completion of the prototype code library targeted at the One World Terrain data model use case. The subgroup reviewed and assessed a number of mappings and reports between GGDM, TDS, and CDB 1.x to capture the major mismatches and findings. However, the stretch goal of using the code library to generate automated mappings for comparison so that experiment remains as future work. This may be a useful technique for approaching the mapping to NAS X-3 and DGIM. This is proposed as a recommendation. Finally, after substantial discussion on Slack and via Github, the subgroup identified the relatively few areas where changing the GGDM data model had a substantive impact on the CDB dataset storage.</p>
</div>
<div class="sect3">
<h4 id="_entity_metamodel_comparison"><a class="anchor" href="#_entity_metamodel_comparison"></a>8.4.1. Entity Metamodel Comparison</h4>
<div class="paragraph">
<p>The CDB 1.x entity metamodel is overall similar but less complex than the GGDM and NAS entity metamodel. This is to be expected since all of these standards derived from the same FACC metamodel. However, the NAS and GGDM have undergone substantial development since then to align with current data model practice. NAS and GGDM renamed the "feature" concept to the more general form "entity" to accomodate phenomena that were not traditionally considered features like devices, lifeforms, vehicles, and abstract ideas. AS such the basic notion of an entity being a particular phenomenon with a unique identity in the simulated or real world that is described by attributes with particular values is still the same. NAS and NCV explicitly define a semantic ontology hierarchy of entity type subclassing that refines very general and abstract entities into specific entity types. This can be very useful for semantic understanding of complex datasets. This hierarchy is implicit and assumed in GGDM as an application of the NAS rather than explicitly stated. It does not exist at all in CDB 1.x modulo {<strong>What does this mean?</strong>} being implicit for a few items brought in from external standards for building interiors and explicitly via the generalizations (more in terms of aggregation than subclassing) specified by the category/subcategory organization of entity types and by feature subcodes.</p>
</div>
<div class="paragraph">
<p>Both the CDB 1.x and the GGDM represent entity types using a 5-letter code mostly inherited from FACC, although NAS and GGDM have modified some existing codes and both have added new ones. CDB 1.x specifies entities purely semantically and then specifies a recommended geometry type and data set for each entity type. This as well relies on the semantics of the first two letters of the FACC-like 5 letter code to organize entity types into a two-level category hierarchy for 3D model storage. NAS specifies entities purely semantically. Entities that do have a physical geometry have an associated attribute that may be a point, curve, or surface value or combination thereof. GGDM specifies entities separately per geometry type using a suffix on the entity name and does specify a theme (data set) for each entity type, albeit separately for each of five levels of detail. GGDM and NAS entities may be related to other entities through associations which is a concept that does not currently exist in CDB 1.x but may prove very useful for data de-duplication, feature-level metadata, and annotation. CDB 1.0 additionally defines a specific semantic concept of feature subcode that does not exist in GGDM and NAS.</p>
</div>
<div class="paragraph">
<p>Primitive attributes are also essentially the same conceptually: They describe a particular quantiative or qualitive property of an entity type using a name, a short code, and a data type, a measurement unit for measured quantities, and constraints on the values. In traditional FACC the attribute codes are always 3 characters. CDB added a number of additional attributes with 4 character codes, many of which are related to model instancing. GGDM attributes are typically 3 character codes for simple attributes. However suffixed attributes for multi-valued and range-valued attribute are 4 characters and prefixed attributes for complex data types and feature relationships may be up to 10 characters. The primitive data types of Boolean true/false, integer, real number, text, and (partially) enumeration are essentially the same in both standards, although the multi-valued, range-valued, and complex attribute value types in GGDM do not have an equivalent in CDB 1.x. While the core concept of attributes is equivalent, the details of constraints, in particular, do vary substantially. Another substantive difference is that attributes are bound to datasets in CDB 1.0 but are bound individually to geometry-specific entity types in GGDM. CDB also has a concept of optional attributes with default values to fill in missing information, whereas all attributes are mandatory in GGDM and no default values exist.</p>
</div>
<div class="paragraph">
<p>The controlled vocabulary for qualitative attribute values - enumerations, codelists, etc. - is similar conceptually. For closed vocabulary sets, GGDM and CDB 1.x are essentially compatible in that they identify a list of terms and assign them numeric ordinal indices (values may be skipped). For open vocabulary sets that reference external standards, GGDM specifies them using text strings either in a separate sheet in the GGDM Excel spreadsheet or through an externally web-accessible registry. CDB 1.x has no equivalent to this kind of text-based codelist and would currently have to store such values as freeform text with no validation.</p>
</div>
<div class="paragraph">
<p>Groupings to organize entity types into datasets, collections, and categories are substantially different between CDB 1.x and GGDM and this difference will need to be reconciled.</p>
</div>
<div class="paragraph">
<p>One concept that exists explicitly in the NAS but is implicit and not stated in GGDM and CDB 1.x is the notion of physical quantities. These describe the types of measurements that may be made for values. For example, a quantity of "Length" is defined to measure linear distance and the measurement units of "metre" and "foot" are realizations of that quantity. This concept is primarily used to identify which units may be converted to each other and what those conversion factors are.</p>
</div>
<div class="paragraph">
<p>Based on this comparison, the belief is that the metamodel for CDB 1.x currently is mostly a compatible subset of the current NAS metamodel modulo {<strong>I would different phrasing</strong>}  a few mismatches discussed in following sections. The subgroup recommends extending the current CDB XML metadata to add the NAS metamodel capabilities that are currently not supported. The CDB core conceptual model should not mandate any particular data dictionary or content, but rather provide the conceptual and logical metamodel for describing any ISO 19109 compliant application schema to the maximum extent practical. There should be no technical reason why one could not develop an extension profile for CDB for any particular data dictionary that complies with ISO 19109.</p>
</div>
<div class="paragraph">
<p>With that conceptual metamodel in place, creating a new NAS-compliant CDB Data Dictionary captured in a backward-compatible CDB_Feature_Dictionary.xml and CDB_Attributes.xml (and related files) starting with GGDM is the next step. - Detailed recommendations are provided in follow-up findings {<strong>Need internal linkl</strong>} on how to accomplish this goal. Such an approach would enable a backward compatible path to migrating the current standard to NAS compliance using GGDM (with some modifications) as the encoding mechanism to deal with complex attribution so no structural changes to CDB 1.x vector encoding are needed. However, the subgroup also recommends developing for the CDB X major revision a replacement database metadata strategy that encapsulates the entire data model and data dictionary in a single SQLite file that will be easier for runtime clients to use and query at runtime. This is especially since clients will be expected to have SQLite support anyways if GeoPackage is the vector dataset encoding. CDB X enhancements would also enable developing native representations of complex attributes for newer encodings that may not necessarily need the GGDM encoding simplification approach.</p>
</div>
</div>
<div class="sect3">
<h4 id="_feature_subcodes_not_in_ggdm"><a class="anchor" href="#_feature_subcodes_not_in_ggdm"></a>8.4.2. Feature Subcodes not in GGDM</h4>
<div class="paragraph">
<p>One very concrete difference between CDB 1.x and GGDM is that CDB 1.x defines a built-in concept of "Feature Subcode" in addition to the normal "Feature Code" by specifying the 5-letter code. This feature subcode is stored as a separate attribute in the vector attribution table and is an integer value of up to three digits describing a specific subtype of the broader feature type. The introduction of feature subcodes was a substantial change from the originating FACC standard and no other standards assessed use this concept. <a href="http://ogc.standardstracker.org/show_request.cgi?id=544">OGC CDB ticket 544</a> highlights that using feature subcodes does not comply with ISO 19109 or the NAS. Relatively few CDB feature types use feature subcodes. However, the ones that do tend to be highly relevant such as power plants, buildings, vegetation, and building interior components.</p>
</div>
<div class="paragraph">
<p>Based on this assessment, many - but not all of the CDB subcodes - originated from different FACC enumerated attributes playing a more specialized role. For example, the subcodes for AD010 "Power_Plant" are directly traceable to the values of the POS "Power Source" attribute which still exist on the GGDM AD010 "ELECTRIC_POWER_STATION_P" although CDB defines some additional values that are not present in FACC or GGDM such as "Solar", "Wind", and "Internal_Comb". In some cases very general attributes such as FFN "Feature Function", PPO "Physical Product", MFY "Medical Facility Type" and so on are used to make these distinctions in GGDM, particularly in regards to buildings and structures. Due to the lack of definitions for individual vegetation objects and building interior components in GGDM - as previously identified by STE One World Terrain - the CDB 1.0 feature subcodes for these types are objects are novel and have no counterpart in GGDM.</p>
</div>
<div class="paragraph">
<p>CDB X cannot include the concept of feature subcode and remain compatible with GGDM, NAS, OWT, or ISO 19109. A mapping strategy needs to be defined and missing semantic definitions will need to be added to the CDB X extension of GGDM. Ideally this would be formulated using the NCV vocabulary so it can be submitted back to the developers of GGDM and NAS for inclusion in future revisions of those standards. The subgroup recommends treating the CDB 1.x feature subcode conceptually as an attribute - purely for mapping purposes - rather than its own concept whose valid enumerated values are different depending on the entity type. Where possible, this attribute should be mapped to existing GGDM or NAS attributes such as POS, FFN, and PPO. In cases where an appropriate attribute exists but not all feature subcodes have valid mappings, the subgroup recommends adding new enumerant values to represent those concepts using the existing CDB 1.0 definitions. In cases where appropriate attributes or entity types do not already exist in GGDM or NAS, additional decisions need to be made. The subgroup believes looking at other standards would be the best first choice. For example the DGIM and its referenced standards IHO S-100 and AIXM may provide substantial definitions for maritime and aeronautics. In the event that no open standard provides suitable definitions, the first decision is whether to create separate entity types for each subcode definition if they are sufficiently different from each other. These can be still be related by subclassing relationships at the logical level as is done in the NAS - or to create a single entity type encompassing all of them and then defining an enumerated attribute to represent the possible feature subcodes. Building interiors merit a separate discussion due to the complexity and role other external standards such as IFC/BIM, CityGML, IMDF, and others play.</p>
</div>
<div class="paragraph">
<p>This change is possible in a structurally backward-compatible way without changing the schema of the current CDB 1.x XML metadata standard. This approach could be done by simply not using feature subcodes - or more accurately, only ever using feature subcode "000" to avoid breaking the parsing structure. This would be when writing the replacement Feature_Data_Dictionary.xml that captures the NAS-compliant and extended entity types that replace the feature subcodes. Replacement attributes used to map feature subcode would also have to be added to CDB_Attributes.xml file. Once this is in place, feature subcodes could be deprecated, but not removed until CDB X. For CDB X, we recommend simply not including feature subcode as a concept at all and map CDB 1.x databases using feature subcode as a codelist or enumeration attribute.</p>
</div>
</div>
<div class="sect3">
<h4 id="_mapping_between_cdb_tds_and_ggdm"><a class="anchor" href="#_mapping_between_cdb_tds_and_ggdm"></a>8.4.3. Mapping between CDB, TDS, and GGDM</h4>
<div class="paragraph">
<p>The subgroup reviewed sets of <a href="Experiments/Attribution/GGDM_to_CDB_Crosswalk_20200713.xlsx">existing mappings between NGA TDS 6.0, TDS 7.0, GGDM 3.0, and CBD 1.0</a> that had been developed by Cognitics, Inc. and others to assess the completeness of the mapping from CDB 1.0 to GGDM 3.0. This was primarily focused on entity type and attribute mappings.</p>
</div>
<div class="paragraph">
<p>The primary findings for entity types is that out of roughly 2,000 CDB entity types (including distinct subcodes) approximately 30% of them have a direct and obvious mapping to GGDM 3.0. Of this 30% that have obvious mappings, almost all of them either match on 5-letter code, on entity name (ignoring case and geometry suffix), or frequently both due to shared lineage from FACC. Some very common entity types did change either code or name between CDB and NAS/GGDM - for example AL015 is Building in CDB but it&#8217;s AL013 in NAS and GGDM, whereas AD010 is "Power Plant" in CDB and "Electric Power Station" in NAS and GGDM - so it&#8217;s not accurate to say CDB is a subset or superset of NAS or GGDM in terms of names, codes, or definitions.</p>
</div>
<div class="paragraph">
<p>Of the 70% of CDB feature types that did not immediately map to GGDM, the majority are various specific types of buildings and structures that CDB represents as unique entity types or feature subcodes than does NAS or GGDM. In GDDM, many of these concepts are handled as a more generic AL010 Facility, AL013 Building, AH055 Fortified Building, or similarly generic entity type with one or more attribution values specifying the details. The subgroup believes these mappings do at least partially exist - perhaps even for a majority of the entity types - but will require substantial effort to develop and cross-reference to ensure the semantics are compatible and that missing values are added since it is not a straightward name-based match.</p>
</div>
<div class="paragraph">
<p>There are also substantial gaps in the GGDM data model for particular categories present in CDB 1.x. GGDM lacks any representation for individual vegetation objects (other than EC005 "Tree") and any representation for building interior components except for a handful that also can exist standalone in the outdoor environment. GGDM also lacks any definition of detailed material composition or aeronautically-rigorous light points. CDB 1.x does handle materials and light points as separate conceptual things that are not part of the CDB feature dictionary. Other areas where there are some gaps include climate zones and biomes, detailed aeronautics, detailed maritime features and port structures, and fighting positions and other military-related dynamic terrain obstacles. In retrospect, most of these gaps should be expected because of GGDM&#8217;s specific mission to apply the NAS to the specific needs of the outdoor environment for the ground warfighter. However the lack of infantry-relevant fighting positions and dynamic terrain obstacles is a little surprising given that mission.</p>
</div>
<div class="paragraph">
<p>The latest version of the full NAS (currently NAS X-3) provides definitions for many but not all of these gaps so the <strong>recommendation</strong> is to revisit mapping CDB 1.x to the latest full NAS X-3 rather than the GGDM subset to capture the true coverage of the mapping. This approach will also ignore geometry mismatches since the NAS does not separate entity types by geometry. Domains that NAS X-3 does not cover are building interiors and individual vegetation. These will require a separate approach synthesizing findings of multiple existing civilian standards. Maritime definitions not present in the latest NAS may instead be available in DGIM courtesy of IHO S-100. Aeronautics definitions definitions not present in the latest NAS may instead be available in DGIM courtesy of AIXM. The unmet stretch goal of updating software to provide fully automated mappings as a starting point will likely be very useful for a follow up experiment if a suitable NAS and DGIM loader is written.</p>
</div>
<div class="paragraph">
<p>For attribution, the situation is a bit more straightforward in most cases. CDB has a very limited selection of 66 attributes relative to much larger GGDM and NAS. The migration to NAS will allow for much more detailed semantic representation of the environment with 1,942 different unique attributes at the cost of higher resource use when actually {<strong>Currently?</strong>} used. For attributes with built-in meaning to the CDB structure itself, they {<strong>Who or what?</strong>} primarily did not map to anything in GGDM or NAS. Examples primarily related to model instancing and topology connections such as BBH "Bounding Box Height" as well as the CMIX "Material Identifier" and CNAM "Class Name" foreign keys. This is to be expected and these attributes will likely remain unique to CDB, although the model instance and material attribution may have some synergy with the visual data model being developed for STE OWT.</p>
</div>
<div class="paragraph">
<p>Due to the shared FACC lineage most of the remaining attributes had straightforward mappings from CDB 1.x to GGDM. However, one unexpected quirk is that many measured attributes in FACC were integer attributes with very limited (one meter or one degree) precision with alternate attributes specifying real values to full precision. CDB went with the latter for obvious reasons of accuracy. NAS and GGDM amended FACC to change all the integer-valued measured attributes into real-valued attributes to capture the proper intended semantics, and removed all of the alternate forms. Examples include AOO "Angle of Orientation" vs. CDB using AO1 "Angle of Orientation with greater than 1 degree resolution" and WID "Width" vs. CDB using WGP "Width with Greater Than 1 meter Precision". The NAS changes in this regard make sense and simplify the data model to how many vendors were already using it in practice. While it does not affect CDB mapping, similar changes were made in CDB to remove the alternate FACC attribute forms that specify measurements in non-SI units. The NAS instead provides a set of quantity and measurement definitions to allow implementations to store measurements in any unit if desired while specifying the standard unit for each attribute. The main exception is for the few cases such as SPD "Speed Limit (MPH)" vs. SPM "Speed Limit (KPH)" where the distinction between the units is legally or semantically relevant and not just a measurement detail.</p>
</div>
<div class="paragraph">
<p>Summarizing the methodology proposed for mapping CDB to a NAS-compliant data model:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Start with existing CDB 1.0 to GGDM mapping to identify core set of compatibility for outdoor environment (revisit attribute based mappings for subcodes).</p>
</li>
<li>
<p>Conduct full mapping from CDB 1.0 to NAS X-3 (or later) to capture NAS compliant mappings and document NAS gaps.</p>
</li>
<li>
<p>Conduct mapping to DGIM followed by IHO S-100 for maritime gaps in mappings to NAS, develop NCV definitions for these gaps.</p>
</li>
<li>
<p>Conduct mapping to DGIM followed by AIXM for aeronautics gaps in mappings to NAS, develop NCV definitions for these gaps.</p>
</li>
<li>
<p>Coordinate with OGC CityGML, STE OWT, and other stakeholders to synthesize a building interior data model and develop NCV definitions for these gaps.</p>
</li>
<li>
<p>Coordinate with STE OWT and civilian environmental agencies to synthesize a detailed vegetation data model and develop NCV definitions for these gaps.</p>
</li>
<li>
<p>Any remaining gaps will require new semantic development to create NCV vocabulary and frame in NAS compliant logical model.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The subgroup recommends capturing the new NAS-compliant definitions into a new CDB_Feature_Dictionary.xml. Further the subgroup recommends also defining a ruleset format in XML or some other easy to use encoding - possibly leveraging technologies like ShapeChange - for defining the translation rules from CDB 1.0 feature dictionary to the NAS-compliant feature dictionary in a reproducible way. While most translation rules will be a simple 1:1 mapping from feature type to feature type, some will rely on conditional mappings of values for feature subcode or other attribute values and a few are fairly specific. This particular approach could also be used to develop other sets of standardized data model mappings from or to ISO 18025, vanilla DIGEST FACC 2.1, or different versions of NAS or DGIM to improve the migration path of interoperabillity between data sets.</p>
</div>
</div>
<div class="sect3">
<h4 id="_existing_fdd_metadata_missing_attribute_details"><a class="anchor" href="#_existing_fdd_metadata_missing_attribute_details"></a>8.4.4. Existing FDD Metadata Missing Attribute Details</h4>
<div class="paragraph">
<p>The existing CDB 1.x Standards specify more details in the feature and attribute dictionaries as human-readable descriptions and graphics than are actually present in the machine-readable XML. These details are relevant in migrating to the NAS-compliant attribution model and it is unreasonable to expect clients to hard-code them based on reading the Standard. The two key items that are missing at the machine-readable level for the current Standard are the definitions of which attributes should be present on each dataset and the list of valid enumerant values for each attribute. Both of these gaps can be filled in a straightforward backward-compatible way by adding XML elements to existing metadata as a minor revision in CDB 1.3 or beyond.</p>
</div>
<div class="paragraph">
<p>Linking attributes to datasets could be organized either by specifying a list of datasets under each attribute in the in the CDB_Attributes.xml, or by specifying a list of attributes under each dataset in the Datasets.xml. In either case, this linkage would also be modified by an elements pecifying whether the attribute&#8217;s presence is "Preferred", "Supported", or "Deprecated" to match the existing CDB 1.x human-readable specification. Additionally the subgroup proposes adding status for "Mandatory", "Optional", and "Retired" status as discussed later regarding default values and mandatory attribution.</p>
</div>
<div class="paragraph">
<p>For defining enumerants, the subgroup recommends adding an &lt;Enumeration&gt; element under the &lt;Value&gt; element in the CDB_Attributes.xml and for each valid enumerant value, add a &lt;Term&gt; element that specifies the name/label, the integer code, and the full definition/description. The set of valid enumerants for each attribute is already defined in the CDB 1.x specification, it just needs to be captured in this XML.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_feature_relationships"><a class="anchor" href="#_feature_relationships"></a>8.5. Feature Relationships</h3>
<div class="paragraph">
<p>One innovation of the NAS above the older NFDD and FACC specifications is the adoption of a mechanism for specifying entity relatioships to model complex phenomena. This can be used in a wide variety of ways:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>To specify spatial-topological relationships such as connectivity, containment, adjacency, and attachment;</p>
</li>
<li>
<p>To specify aggregation of feature types into broader containers or general categories;</p>
</li>
<li>
<p>To specify descriptions of detailed properties shared between multiple features;</p>
</li>
<li>
<p>To specify chains of provenance and derivation; and much more.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Strictly speaking in a UML sense the generalization relationship representing the link between child entity subclass and parent entity superclass is also such a relationship, although this is usually modeled specially rather than as a general relationship.</p>
</div>
<div class="paragraph">
<p>Despite the broad range of possible applications, relationships really only fall into one of two structural metamodel categories: Direct and mediated. Direct relationships describe very simple relationships where the only relevant information is the source entity, the target entity, and the type of relationship. The types of direct relationshiops might include:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Association - Completely generic relationship (UML)</p>
</li>
<li>
<p>Generalization - Subclass to superclass (UML)</p>
</li>
<li>
<p>Realization - Implementation to interface (UML)</p>
</li>
<li>
<p>Aggregation - Object to collection (UML)</p>
</li>
<li>
<p>Composition - Part to whole (UML)</p>
</li>
<li>
<p>Containment - Object to container</p>
</li>
<li>
<p>Connection - Physical attachment link between siblings</p>
</li>
<li>
<p>Adjacency - Physical proximity without attachment between siblings</p>
</li>
<li>
<p>Description - Object to detailed information about it</p>
</li>
<li>
<p>Representation - Logical object to physical geometry or encoding</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Mediated relationships are necessary when the relationship itself needs further description such as attribution. In UML and ISO 19109 application schemas, relationships by themselves cannot have attributes. The resolution is to introduce mediating entity types that represents the relationship itself, and then define a direct relationship from the source to the mediating entity and from the mediating entity to the target.</p>
</div>
<div class="paragraph">
<p>The NAS tends to represent direct relationships as complex attributes with implied relationship semantics. Strictly speaking, this could be derived from the exact UML connector though. GGDM then deploys these direct relationships by flattening them out into prefixed attributes where the attributes of the target feature are embedded on the source feature. The NAS also defines a small number of mediated relationships, but these are not currently deployed in GGDM.</p>
</div>
<div class="paragraph">
<p>The subgroup proposes adding relationship support to CDB 1.3 in a backward-compatible way by creating a new Relationships.xml that describes the set of direct relationships and places constraint on which entity types can relate to which other entity types. This would be by relationship type and also what is the maximum cardinality of that relationship. The source, target, and if relevant mediator entity types will be references into the CDB_Feature_Dictionary.xml. A sample XML file for this might hypothetically look like:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;Relationships&gt;</span>
 <span class="tag">&lt;Types&gt;</span>
  <span class="tag">&lt;Relationship&gt;</span><span class="tag">&lt;Name&gt;</span>Description<span class="tag">&lt;/Name&gt;</span><span class="tag">&lt;Definition&gt;</span>blah de blah de blah<span class="tag">&lt;/Definition&gt;</span><span class="tag">&lt;/Relationship&gt;</span>
  <span class="tag">&lt;Relationship&gt;</span><span class="tag">&lt;Name&gt;</span>Connection<span class="tag">&lt;/Name&gt;</span><span class="tag">&lt;Definition&gt;</span>blah de blah de blah<span class="tag">&lt;/Definition&gt;</span><span class="tag">&lt;/Relationship&gt;</span>
 <span class="tag">&lt;/Types&gt;</span>
 <span class="tag">&lt;Constraints&gt;</span>
  <span class="tag">&lt;Relationship&gt;</span>
   <span class="tag">&lt;Source&gt;</span>AP030<span class="tag">&lt;/Source&gt;</span>
   <span class="tag">&lt;Target&gt;</span>ZI016<span class="tag">&lt;/Target&gt;</span>
   <span class="tag">&lt;Type&gt;</span>Description<span class="tag">&lt;/Type&gt;</span>
   <span class="tag">&lt;Cardinality&gt;</span>1<span class="tag">&lt;/Cardinality&gt;</span>
  <span class="tag">&lt;/Relationship&gt;</span>
  <span class="tag">&lt;Relationship&gt;</span>
   <span class="tag">&lt;Source&gt;</span>UG000<span class="tag">&lt;/Source&gt;</span>
   <span class="tag">&lt;Mediator&gt;</span>UK004<span class="tag">&lt;/Meidator&gt;</span>
   <span class="tag">&lt;Target&gt;</span>AL013<span class="tag">&lt;/Target&gt;</span>
   <span class="tag">&lt;Type&gt;</span>Description<span class="tag">&lt;/Type&gt;</span>
   <span class="tag">&lt;Cardinality&gt;</span>Unbounded<span class="tag">&lt;/Cardinality&gt;</span>
  <span class="tag">&lt;/Relationship&gt;</span>
 <span class="tag">&lt;/Constraints&gt;</span>
<span class="tag">&lt;/Relationships&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Actually implementing feature relationships should be delegated to the vector, raster coverage, and 3D model encodings. However, this subgroup believes that the defined constraints would enable the use of foreign key columns (i.e. by integer ID referencing into a different table) to represent relationships in a GeoPackage encoding with each modeled entity including mediating entity stored in its own relevant table by dataset.</p>
</div>
<div class="sect3">
<h4 id="_grouping_features_into_datasets_and_categories"><a class="anchor" href="#_grouping_features_into_datasets_and_categories"></a>8.5.1. Grouping Features into Datasets and Categories</h4>
<div class="paragraph">
<p>One sustantial metamodel difference is how entity (feature) types are organized into datasets and categories. CDB 1.0 currently provides two different ways of organizing entity types that are used in unrelated ways.</p>
</div>
<div class="paragraph">
<p>The first, relying on the two-letter prefixes of the FACC-like codes specified in the Feature_Data_Dictionary.xml metadata file, organizes entity types into categories and subcategories. For items derived from FACC, this organization generally is semantically coherent in which similar or related entity types end up in the same category. The same is generally less true for entity types in CDB that were not derived from FACC; such extensions, particularly the entity types starting with 'U' and 'V', tend to be more organized by origin of definition than by semantics although the subcategory usually still provides some semantic grouping. The category/subcategory grouping is used primarily to decide folder paths and file names for 3D models.</p>
</div>
<div class="paragraph">
<p>The second, specifying separately in the Datasets.xml metadata file, organizes entity types into separate datasets (layers) which then in CDB 1.0 imply different files and file formats for each dataset. The datasets represent both raster coverages such as Elevation as well as 3D model data sets and vector datasets; the vector data sets can then be further implemented as point, linear, and polygonal sublayers. This concept of grouping is core to the current CDB 1.0 standard and dictates filenames, formats, and content. As a substantial divergence from GGDM, the CDB 1.0 standard specifies the list of valid attributes at the dataset level rather than for each entity. CDB X may relax the storage organization impact due to experiments with GeoPackage containerization, but the groupings may still affect internal tables in the GeoPackage.</p>
</div>
<div class="paragraph">
<p>NAS and GGDM do not exactly have equivalent concepts to either one of the CDB 1.0 grouping types. The closest concept in NAS is the concept of "view groups" and "views" which are a two-level hierarchy of organization of entity types. Entity types may belong to more than one view, and each view may only belong to one view group. The two-letter FACC-like prefixes in NAS do not have any normative meaning since they are defined by a separate "Platform Specific Model" rather than being a core part of the entity type definition, although in practice new entity types in NAS still select 5-letter codes in a way that mostly maintains semantic groupings based on the first two letters. The closest concept in GGDM is the feature index, which is recognizably similar to the NAS view groups but not consistent with them, but are geometry specific.</p>
</div>
<div class="paragraph">
<p>The original design from Phase 3 only accounted for NAS view groups and views as a replacement for category and subcategory. This was done by assigning each entity type only to its primary view. However the experimentation showed this was insufficient to model CDB 1.0 due to the core role datasets play in the CDB storage layout and attribution. The fact that attributes are specified at the dataset level is a curve ball. In NAS only entities may conceptually have attributes - not containers or groupings - which made the initial design insufficient to migrate CDB 1.x databases into the new logical model.</p>
</div>
<div class="paragraph">
<p>Going back to the most abstract level - the NCV - gave some insight on how to reconcile this mismatch. At that level, every definition is simply a vocabulary term, with containers being just a different type of term that can have children. This is not exactly what we needed, but the participants realized that combining that with a concept of relationships from the NAS would enable us to generalize containers such as datasets to also be entities.</p>
</div>
<div class="paragraph">
<p>So the specific recommendations to map CDB 1.x to the NAS conceptual model are as follows:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Define entity types that represent each dataset and associate the relevant attributes to each dataset as described in the prior section.</p>
</li>
<li>
<p>Add a "generalization" relationship from each dataset to NAS entity type ZI031 "Dataset".</p>
</li>
<li>
<p>Define entity types for each category and subcategory.</p>
</li>
<li>
<p>Add an "aggregation" relationship from entities to datasets that contain them.</p>
</li>
<li>
<p>Add an "aggregation" relatioship from entities to their containing subcategory.</p>
</li>
<li>
<p>Add an "aggregation" relationship from subcategory to its containing category.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>In CDB 1.x all of these constructs would be implicitly set up by the definition of the Datasets.xml and Feature_Data_Dictionary.xml, whereas in CDB X these could be explicitly represented in the data model SQLite storage and logical model.</p>
</div>
<div class="paragraph">
<p>In CDB X, we recommend the NAS-compliant replacement to do the following:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Define entity types that represent each dataset, aligning with NAS/NCV where possible.</p>
</li>
<li>
<p>Define attributes for each entity type as specified by NAS and GGDM.</p>
</li>
<li>
<p>Add a "generalization" relationship from each dataset to NAS entity type ZI031 "Dataset".</p>
</li>
<li>
<p>Use the existing NAS view groups and views as the replacement of category and subcategory, defined as entity types.</p>
</li>
<li>
<p>Add an "aggregation" relationship from entities to datasets that contain them.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>As part of a backward-compatible change to CDB 1.x, the subgroup recommends adding an &lt;Aggregation&gt; element sequence to the current &lt;Subcode&gt; element to enable specifying additional containers for entity types beyond the category, subcategory, and dataset containers implied by the current structure. This will provide a migration path to generally specifying of arbitrary depth of views and containers compliant with ISO 19109. The subgroup also recommends adding a &lt;Generalization&gt; element to each &lt;Subcode&gt; element to capture the parent/child subclassing relationship for entity types defined by NAS.</p>
</div>
</div>
<div class="sect3">
<h4 id="_per_entity_vs_per_dataset_attributes"><a class="anchor" href="#_per_entity_vs_per_dataset_attributes"></a>8.5.2. Per-Entity vs. Per-Dataset Attributes</h4>
<div class="paragraph">
<p>As explained in the previous section about feature groupings, one divergence of CDB vs. NAS and GGDM is that CDB 1.x defines which attributes are valid at the dataset level, whereas NAS and GGDM define the set of valid attributes and their associated constraints specifically for each entity type (and in GGDM, unique for each geometry type). To migrate toward NAS compliance, CDB X will need to specify the set of valid attributes per entity type. The previous sections proposes a recommendation of how to adapt the existing per-dataset attribute definitions to the proposed CDB X conceptual model to maintain backward compatibility.</p>
</div>
<div class="paragraph">
<p>However, the inverse can also be done: Extend the CDB_Feature_Dictionary.xml to add a new XML &lt;Attributes&gt; element under the existing &lt;Feature_Type&gt; element to list the set of valid attributes for that particular entity type referencing the definitions present in CDB_Attributes.xml. Each such element could include an optional XML modifier for each attribute to specify that the attribute only applies to a particular geometry type to represent GGDM geometry-specific constraints. Another XML modifier could apply the same "Mandatory", "Preferred", "Optional", or "Deprecated" status as currently prescribed for linking attributes to datasets. This &lt;Attribute&gt; element could also specify the same set of constraints such as range, precision, etc. to override the global definition for that specific feature type, although in practice most will probably just use the global definition.</p>
</div>
<div class="paragraph">
<p>This recommendation would enable implementing NAS-compliant per-entity attribution constraints within the current CDB 1.x structural framework via backward-compatible extensions while allowing the prior per-dataset definitions to remain in place as a deprecated element while clients migrate.Ths approach could then be fully retired in CDB X as a breaking change. The global attribute definitions are still useful from an NCV deep semantics standpoint of capturing which attributes across different entity types have the same semantic meaning.</p>
</div>
</div>
<div class="sect3">
<h4 id="_multi_valued_attributes"><a class="anchor" href="#_multi_valued_attributes"></a>8.5.3. Multi-Valued Attributes</h4>
<div class="paragraph">
<p>GGDM and NAS added the conceptual model for multi-valued attributes and many existing FACC attributes were retrofitted to become multiply-valued due to many entity types logically having more than one material, function, product, etc. Notably, many of the attributes that are likely to be mapping targets for CDB feature subcodes become multiply valued such as FFN "Feature Function", POS "Power Source", and PPO "Physical Product". For NAS compliance, the CDB X logical data model must support multi-valued attributes.</p>
</div>
<div class="paragraph">
<p>The GGDM provides a very convenient way to represent multiply-valued attributes that preserves backward compatibility with clients that do not understand multi-valued attribution. The attribute is defined with its name and code as normal, and the corresponding Shapefile or SQL column provides the first value of the multiple values. Each additional value is suffixed with an ordinal and defines the next value. So, for example, FFN column defines the first "Feature Function" value, FFN2 column defines the second "Feature Function" value, and so on. GGDM imposes a hard limit of 3 values, but no such limit needs to exist in CDB. Semantically, GGDM also imposes two useful constraints: Values must be ordered by significance with the most significant (i.e. highest relevance) value first, and must also be filled out in order: FFN2 cannot be set if FFN is blank, for example. Clients not aware of multi-valued attributes will simply read the first and most relevant value and see the remaining value columns as simply unknown attributes, whereas clients aware of multi-valued attributes can interpret them directly.</p>
</div>
<div class="paragraph">
<p>This change can be accomplished with a backward-compatible update to CDB 1.3 to update the &lt;Attribute&gt; element in CDB_Attributes.xml to have an optional &lt;Cardinality&gt; element with &lt;Min&gt; and &lt;Max&gt; children specifying the minimum and maximum number of values permitted for the attribute. Clients not aware of this change can simply ignore this element and treat the attribute as a scalar value reading the most significant value. If the &lt;Cardinality&gt; element is not present, a default value of 1 for both &lt;Min&gt; and &lt;Max&gt; may be assumed. Actual storage of attribute values in the Shapefile encoding will follow the GGDM ordinal-suffix column convention described previously.</p>
</div>
<div class="paragraph">
<p>For CDB X, the cardinality of attributes must be properly represented as well. More options exist in terms of value encoding. For example, having a single column encoded using "Well-Known Binary" list of values would be an option, as well as sticking with the GGDM ordinal-suffix convention. For 3D model encodings such as glTF, multi-valued attributes are already inherently supported in binary buffers due to the use of visual vertex attriutes of position, normal vector, etc. For advanced simulation, particularly for civilian infrastructure, extending the NAS concept to allow weighted multi-valued attributes may also be useful. This could be where the data can specify the percentage or a weight relevance factor of each value to precisely state what fraction it contributes to the overall entity. This would an area of new research if adopted.</p>
</div>
</div>
<div class="sect3">
<h4 id="_range_valued_attributes"><a class="anchor" href="#_range_valued_attributes"></a>8.5.4. Range-Valued Attributes</h4>
<div class="paragraph">
<p>GGDM and NAS added the conceptual model for range-valued numeric attributes specified as a lower bound, an upper bound, and a closure enumerant specifying whether the left, right, or both endpoints of the range are included. This is primarily used for representing attributes on larger-scale aggregate features such as EC015 "Forest" where the value represents an average or range of uncertain values over a whole curve or surface rather than a precise value at a specific point. FACC had previously represented such attributes instead using enumerations that provided a set of predetermined range buckets to choose; that approach was very imprecise particularly at the highest and lowest range buckets. For NAS compliance, the CDB X logical data model must support range-valued attributes. These types of attributes can particularly be useful for procedural random generation of point models and other detailed content from much coarser aggregate linear and polygon features.</p>
</div>
<div class="paragraph">
<p>The GGDM provides a mechanism for representing range-valued attributes: The base attribute code is suffixed with 'L' for the lower bound, with 'U' for the upper bound, and with 'C' for the closure enumerant to define three Shapefile or SQL attribute columns that fully specify the range. This approach works, but is not backward compatible with clients that do not understand range-valued attributes which is a drawback for an incremental change. Therefore the subgroup proposes a slightly different approach for backward compatibility to add this to CDB 1.3: Specify the mean or midpoint of the range as the base attribute code without a suffix, specify the width of the interval as the attribute code with the 'W' suffix, and the endpoint closure enumerant with the 'C' suffix as in GGDM. Clients not upgraded to work with range-valued attribution would then simply read the midpoint of the range as a single scalar value which is a reasonable fallback. Attributes could be marked as range-valued by adding an additional &lt;Mode&gt; element as a child of the &lt;Range&gt; element in &lt;Attribute&gt;&lt;Value&gt; with possible values of "Scalar" and "Interval" with "Scalar" being the assumed default if missing; additional modes could be added in the future if applicable. The actual vector or model encoding could still decide to only use the single scalar value or the full range value depending on data content availability. While GGDM range-valued attributes are always real numbers, there is no inherent reason to disallow integer attributes from being range-valued as well to simplify the XML schema.</p>
</div>
<div class="paragraph">
<p>For CDB X, little would change except range-valued attributes would be natively part of the data model. The proposed mean-width-closure attribute encoding could still be used, or alternate encodings packing the values into triplets in a binary structure. An area of future research may be adding metadata to specify additional details of the range such as the random distribution in use such as "Uniform" vs. "Normal" vs. "Exponential" - such an extension would be extremely useful for procedural generation of individual feature attribution from containing zones or aggregations.</p>
</div>
</div>
<div class="sect3">
<h4 id="_text_patterns_and_codelists"><a class="anchor" href="#_text_patterns_and_codelists"></a>8.5.5. Text Patterns and Codelists</h4>
<div class="paragraph">
<p>The CDB Standard already provides for text attributes and also for specifying a minimum length constraint. For basic text attributes, the current CDB approach is sufficient. However, GGDM and NAS define two more advanced variants of text attributes that would benefit from a backward-compatible update to specify them. The first is the notion of "Structured Text" which is a text attribute that matches a particular layout and pattern. Examples of structured text includes dates, Basic Encyclopedia Number, and URIs. This could easily be accommodated in CDB 1.3 by adding to the &lt;Attribute&gt;&lt;Value&gt; tag in the CDB_Attributes.xml a new tag for &lt;Pattern&gt; which is simply a regular expression that the values must match.</p>
</div>
<div class="paragraph">
<p>NAS and GGDM also define a concept of codelist attributes, which are effectively open-ended enumerations stored as text values rather than as integer codes. In many cases, these codelists are references to external ISO standards like country codes. Much like precisely defining the existing integer-based enumerations, we recommend explicitly capturing the codelists into the &lt;Attribute&gt;&lt;Value&gt; element as the child element &lt;Codelist&gt; specified by one of two mechanisms: either explicitly with a sequence of &lt;Term&gt; elements specifying the value and definition, or implicitly for ISO standards and such by providing the name and URI to the referenced standard.</p>
</div>
<div class="paragraph">
<p>This change does not imply any change to vector encoding and would be carried forward exactly as described into CDB X. Clients not aware of the pattern constraint or the codelist definition would simply treat such attributes as freeform text as is currently done.</p>
</div>
</div>
<div class="sect3">
<h4 id="_instance_class_and_extended_attributes"><a class="anchor" href="#_instance_class_and_extended_attributes"></a>8.5.6. Instance, Class, and Extended Attributes</h4>
<div class="paragraph">
<p>CDB 1.x provides three different encoding techniques for representing attribution. Instance-level attribution is the most traditional approach. This is the case where each attribute is treated as a column and each entity is treated as a row, so every entity has a unique value. Class-level attribution provides a level of indirection in which a separate table has each unique row of attribution and entities reference the row providing their attribution via the CNAM foreign key attribute. This approach allowed for de-deduplication if multiple features had exactly the same attribution for a subset of their attributes. Extended attributes were a third representation using a separate table in which each attribute value was a separate row with a column for feature ID, attribute code, and attribute value. Currently, attributes in the CDB_Attributes.xml identify whether they are preferred, supported, or deprecated for each of the instance, class, and extended encodings.</p>
</div>
<div class="paragraph">
<p>No similar concept exists in NAS or GGDM, and teh subgroup believes this concept should not be present in CDB  either, at least not at the feature data dictionary level. This sort of thing instead represents a physical encoding choice that may vary substantially between different databases based on actual content and capabilities of the container formats. In particular, all breakout groups had a consensus that Extended Attributes were no longer necessary as they were not widely used, were extremely inefficient, and are totally unnecessary with a GeoPackage or glTF encoding. The subgroup saw some potential applicability for class-level attribution as a compression technique at the encoding level, possibly using foreign key constraints in GeoPackage. Feature-level metadata and information feature relationships - described separately - provide a more structured way for providing common descriptions shared by many features that better solve the use case when semantically many features do in fact share the same values for any reason other than chance.</p>
</div>
<div class="paragraph">
<p>The subgroup recommend fully deprecating Extended Attribution in CDB 1.3 and to be removed completely in CDB X. The subgroup also recommends deprecating in CDB 1.3 in CDB_Attributes.xml the &lt;Level&gt; tag identifying which attributes are preferred, supported, or deprecated for each attribution encoding and to consider all attributes to be instance-level attributes at the logical level. Clients already must be prepared to handle all attributes at both the instance and class levels, so no change will occur in that regard. Whether class-level attribution should exist as an optimization technique for vector and model containers remains an open question that should be resolved at that level without any feature data dictionary implications.</p>
</div>
</div>
<div class="sect3">
<h4 id="_mandatory_vs_optional_attributes_and_default_values"><a class="anchor" href="#_mandatory_vs_optional_attributes_and_default_values"></a>8.5.7. Mandatory vs. Optional Attributes and Default Values</h4>
<div class="paragraph">
<p>GGDM considers all attributes mandatory and thus no default values (aside from the global defaults of false, 0, and the empty string) are defined. Many but not all enumerations have a value for "unknown." For the operational purposes for which GGDM was designed, this is sensible. However, for the much wider modeling and simulation use case for which CDB is designed, many attributes may not have data availability, some may truly be optional. Further, in any case modeling and simulation will need reasonable default values to assume for procedural generation of content to support behaviors and other modeling goals.</p>
</div>
<div class="paragraph">
<p>The CDB Standard already provides mechanisms to specify default values for attributes specifically for each dataset that uses them in the Defaults.xml file. The exact elements and formatting for this is awkward and relies on specific text formatting of the &lt;Name&gt; element, but it sufficient to meet the requirement. However, currently no mechanism exists to specify the default value for an attribute when it used for a particular entity - the case in which it is mostly semantically meaningful - and there also no mechanism to specify whether a particular attribute is required or optional for a particular dataset or entity.</p>
</div>
<div class="paragraph">
<p>The subgroup proposes adding these definitions as a backwards-compatible extension to CDB 1.3. The subgroup proposes:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Adding the &lt;Default_Value&gt; element to be a valid child of each &lt;Attribute&gt; defined under a &lt;Feature_type&gt; in CDB_Feature_Attributes.xml (specified previously).</p>
</li>
<li>
<p>To define with the same &lt;Default_Value&gt; syntax as currently present in the Defaults.xml, minus the &lt;Dataset&gt; element.</p>
</li>
<li>
<p>To specify the default value of an attribute for a particular feature regardless of what dataset it is in.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>As discussed in the prior section about capturing existing constraints into the XML metadata, the subgroup also recommends capturing the &lt;Status&gt; of an attribute relative to both its containing dataset or it containing feature where these bindings are specified as one of the following statuses:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Mandatory - The attribute must be present on this dataset or feature and it is validation error for it not to be set.</p>
</li>
<li>
<p>Preferred - The attribute is strongly recommended to be present on this dataset or feature.</p>
</li>
<li>
<p>Supported - The attributed may be present on this dataset or feature with no judgment on whether it should be present.</p>
</li>
<li>
<p>Optional - The attribute may be present on this dataset or feature but is considered purely optional and may be safely omitted.</p>
</li>
<li>
<p>Deprecated - The attribute may currently be present on this dataset or feature but is dicouraged and may be removed in the future</p>
</li>
<li>
<p>Retired - The attribute was allowed in a previous version of the standard to be present on this dataset or feature but is currently no longer allowed (not strictly necessary but may be more useful for error messages vs. attributes that are just completely made up).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For range-valued elements, additional elements would need to be added to support defining the default value&#8217;s range width and closure type in a way that clients would ignore if they do not understand it. If a default value should be mulit-valued, that case should also be defined in a way that clients unaware of it can ignore it.</p>
</div>
<div class="paragraph">
<p>Clients unaware of the new feature attributes defaults would simply ignore them and not use them, as well as ignoring the &lt;Status&gt; element added in various places.</p>
</div>
<div class="paragraph">
<p>For the CDB X, all of the feature defaults and status can be directly consolidated and represented in the CDB X SQLite data dictionary without issue.</p>
</div>
</div>
<div class="sect3">
<h4 id="_organizing_attributes_by_domain"><a class="anchor" href="#_organizing_attributes_by_domain"></a>8.5.8. Organizing Attributes by Domain</h4>
<div class="paragraph">
<p>One prior observation is that the migration to NAS will extend CDB from 66 attributes currently to a possibility of 1,942 NAS attributes. This could be even more if augmented by additional standards for maritime, aeronautics, and building interiors. While great from a completeness standpoint, this has a corresponding impact on resource use and many CDB clients will only be interested in a small subset of those attributes for a particular use case.</p>
</div>
<div class="paragraph">
<p>The subgroup proposes developing a new conceptual mechanism for organizing entities and attributes into one or more functional domains such as "Physics", "Visual", and so on so that a particular user can quickly identify which entities and attributes might possibly relevant to them and only load and use those attributes. Tools could then easily use this to tailor full repository CDBs into slimmed-down CDBs intended for edge computing or other streamlined use cases. Domains could be composed into larger domains to make it easy to describe any particular use case.</p>
</div>
<div class="paragraph">
<p>Aside from tailoring to optimize a CDB for a particular use case, domains could also be useful to clients to provide default functional behavior for broad classes of entity types without explicit simulation support for each entity type. For example, every entity type in a "Solid" domain could have a default interaction to block line-of-sight and weapon fire simulations in a client device unless specifically overriden by entity type or attribution, whereas entities not in that domain would not affect such simulations by default.</p>
</div>
<div class="paragraph">
<p>As a new concept in the metamodel, substantial care would need to be taken to careful define the semantics of domains. One research question would be whether domains are a type of entity and thus can arleady be described using the entity and aggregation mechanisms proposed in prior sections, or whether this should be done as its own separate orthogonal concept.</p>
</div>
</div>
<div class="sect3">
<h4 id="_metadata_vs_attribution"><a class="anchor" href="#_metadata_vs_attribution"></a>8.5.9. Metadata vs. Attribution</h4>
<div class="paragraph">
<p>Metadata and provenance are a major discussion topic in many geographic information standards activities. Historically, metadata tended to mean one of two orthogonal things: Provenenance metadata describing the authorship, acquisition, accuracy/precision/uncertainty, and creation process of particular data, and indexing metadata which provides simplified summaries of the data to make it easier to discover through search techniques. {<strong>This sentence is quite long and convoluted. Any way to break it up?</strong>} provided for by the CDB organizational structure itself, but the former is a major gap of substantial importance.</p>
</div>
<div class="paragraph">
<p>The reality is that, as the NAS development proves, the historical distinction between metadata and attribution is largely artificial and unnecessary. Structurally, metadata is attribution and attribution is metadata. The only difference is which entity types provide for which attributes and how they are related. For provenance metadata, typically many features share the same provenance metadata since they were generated from the same data sources using the same authorship and workflows - the provenance itself can be represented as a single entity with attributes and other reference entities such as workflow steps, with all features with the same provenance referencing the same provenance entity.</p>
</div>
<div class="paragraph">
<p>The NAS and GGDM provide for the following entity metadata types, for example:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>ZI001 Source - representing a single data source</p>
</li>
<li>
<p>ZI002 Restriction Information - description of a unique set of commercial and classification restrictions controlling data</p>
</li>
<li>
<p>ZI004 Data Process Step - describes an individual workflow step of an overall production process</p>
</li>
<li>
<p>ZI005 Geographic Name Information - representing a particular abstract named thing</p>
</li>
<li>
<p>ZI006 Note - a general sticky note that can be attached to just about anything</p>
</li>
<li>
<p>ZI026 Physical Object Metadata - general information about cartographic usability of an object with associated process workflow</p>
</li>
<li>
<p>ZI031 Dataset</p>
</li>
<li>
<p>ZI039 Entity Collection Metadata</p>
</li>
<li>
<p>ZR102 Acquisition Process Metadata</p>
</li>
<li>
<p>ZR106 Data Quality</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In a purely flat Shapefile-like encoding, GGDM binds these metadata entities to individual features by taking all of their attributes and applying them as prefixed attributes to the source entity, duplicating the metadata values for every entity that uses them. This approach is simple and can be done today in CDB 1.x, although it is very resource inefficient. With the CDB X GeoPackage encoding, these metadata entities can instead be stored in their own dataset tables inside of the GeoPackage and simply referenced by the relevant features using a foreign key attribute implementing an entity-level relationship. It would even be possible to use a table inside of the GeoPackage to provide the collection-level data for all contained tiles, datasets, the GeoPackage as a whole, or even the containing CDB as a whole.</p>
</div>
<div class="paragraph">
<p>Subtantial metadata-specific work would need to be invested to determine the exact details of which NAS metadata is necessary for the CDB NAS profile and the exact representation of metadata in the target encodings. The subgroup proposes using the latest version of the NAS cross-walked against the NSG Metadata Foundation (NMF) and the ISO 19115 Geographic Information Metadata standards.</p>
</div>
</div>
<div class="sect3">
<h4 id="_cdb_vector_geometry_data_model_vs_other_ogc_standards"><a class="anchor" href="#_cdb_vector_geometry_data_model_vs_other_ogc_standards"></a>8.5.10. CDB Vector Geometry Data Model vs. Other OGC Standards</h4>
<div class="paragraph">
<p>One minor divergence the subgroup found in OGC CDB 1.x vs. the other OGC standards was the definition of vector geometry. OGC Simple Features provides an implementation of ISO 19125 that describes the vector feature model used in essentially all modern geographic applications with core geometry types Point, Curve (typically realized as LineString) and Surface (typically realized as Polygon). The existing CDB 1.x standard is inconsistent about the terminology used, and in the machine-readable CDB_Feature_Attributes.xml the non-standard terms Lineal and Areal are used instead of Curve and Surface (as used in GGDM) or LineString and Polygon (as used in OGC Simple Features for the equivalent geometry). The set of valid geometry types is also not defined in the CDB 1.x XML metadata aside from implicitly in the CDB_Feature_Attributes.xml as references in the &lt;Recommended_Dataset_Component&gt; element.</p>
</div>
<div class="paragraph">
<p>These are very minor issues, but should be resolved. The subgroup proposes updating the CDB 1.3 specification to consistently use the same terms from OGC Simple Features - whether it is "Curve" and "Surface" or "LineString" and "Polygon" is a matter for debate - to also align those terms with the equivalent terms in the latest NAS which were themselves pulled in from OGC GML. The subgroup also proposes, for completeness, creating a new Geometries.xml metadata file for CDB 1.3 that captures the list of valid geometry types in that particular CDB. While most clients likely will have specialized handling of geometries, this can be used as a validation check for a client to make sure it can process all geometries specified in the metadata file. Unfortunately, to maintain backward compatibility, the geometry names as used in CDB file name structure and CDB_Feature_Attributes.xml &lt;Recommended_Dataset_Component&gt; values cannot be fixed. That change will have to wait until CDB X to fully align the specification with other OGC standards.</p>
</div>
<div class="paragraph">
<p>Strictly speaking, the latest NAS defines geometry as a type of entity in the same sense as a feature, lifeform, or idea, including giving each geometry a 5-letter FACC-like entity code; the vertex geometry of a feature is then treated as a particular attribute for entities that have physical geometry at the logical level. However, it is unclear whether this view of geometry would be practically useful in any way; by nature specific encodings like GeoPackage and glTF treat geometry specially.</p>
</div>
<div class="paragraph">
<p>One final question to investigate later on geometry is whether there is any benefit to expanding CDB to support the full geometry capabilities specified by OGC GML. The increased generality would have a tradeoff with the performance constraints for which CDB was designed.</p>
</div>
</div>
<div class="sect3">
<h4 id="_entity_dictionary_storage_design"><a class="anchor" href="#_entity_dictionary_storage_design"></a>8.5.11. Entity Dictionary Storage Design</h4>
<div class="paragraph">
<p>As part of the code prototype experiment, the subgroup started experimenting with a SQLite table design for representing the entirety of the proposed CDB X logical data model and code to read and write it. This implementation was not completed but based on the partial efforts found no reason to believe there was an substantial technical barrier to doing so. The subgroup also observed that by laying out the metamodel in UML, it would be possible to create equivalent XML and JSON schemas - perhaps through tools like ShapeChange - to offer multiple possible encodings of the CDB X metadata.</p>
</div>
<div class="paragraph">
<p>Based on cross-referencing the GGDM, NAS, and NCV with CDB-specific requirements, the following tables were notionally identified as important. This structure is intended to be experimental rather than prescriptive - we believe this should be an area of further research for CDB X. It may also be appropriate to conduct experiments on using an SQLite data dictionary vs. XML or JSON data dictionaries to see if the impact on clients is noticeable.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Entities - core vocabulary of entity types</p>
<div class="ulist">
<ul>
<li>
<p>ID  - primary key</p>
</li>
<li>
<p>Label - NCV label</p>
</li>
<li>
<p>Code - FACC code</p>
</li>
<li>
<p>Definition - full definition</p>
</li>
<li>
<p>Generalization - base Entity type</p>
</li>
<li>
<p>Type - Entity, Geometry, Category, Dataset</p>
</li>
</ul>
</div>
</li>
<li>
<p>Quantities - core vocabulary of measurement physical quantity types</p>
<div class="ulist">
<ul>
<li>
<p>ID  - primary key</p>
</li>
<li>
<p>Label - NAS label</p>
</li>
<li>
<p>Definition - full definition</p>
</li>
</ul>
</div>
</li>
<li>
<p>Measurements - core vocabulary of specific measurement units</p>
<div class="ulist">
<ul>
<li>
<p>ID  - primary key</p>
</li>
<li>
<p>Label - NAS label</p>
</li>
<li>
<p>Quantity - foreign key referencing which quantity this measurement measures</p>
</li>
<li>
<p>Prefix - prefix when used (typically empty, example could be $ for currency)</p>
</li>
<li>
<p>Suffix - suffix when used (i.e. m for metre, may be empty if suffixes not used)</p>
</li>
<li>
<p>Multiplier - multiplication factor to go from this unit to base quantity unit</p>
</li>
<li>
<p>Divisor - divisor to divide by to go from this unit to base quantity unit (keep exact precision when this is how conversion is defined)</p>
</li>
<li>
<p>Offset - offset to addto go from this unit to base quantity unit (typically 0 except for temperature)</p>
</li>
<li>
<p>Derivation - mathematical expression to describe how derived measurement is composed of products of powers of base units</p>
</li>
</ul>
</div>
</li>
<li>
<p>Datatypes - core definitions of attribute value types and base constraints, de-duplicate attribute value definitions</p>
<div class="ulist">
<ul>
<li>
<p>ID  - primary key</p>
</li>
<li>
<p>Label - name of datatype</p>
</li>
<li>
<p>Primitive - underlying primitive Boolean, Integer, Real, Text</p>
</li>
<li>
<p>Minimum - minimum value (integer and real variants)</p>
</li>
<li>
<p>Maximum - maximum value (integer and real variants)</p>
</li>
<li>
<p>Precision - preferred decimal precision for real attributes</p>
</li>
<li>
<p>Closure - whether minimum and/or maximum are included in valid range</p>
</li>
<li>
<p>Mode - Scalar (0) or Interval (1)</p>
</li>
<li>
<p>Measurement - the default measurement unit if applicable (also used for min/max)</p>
</li>
<li>
<p>Cardinality - maximum cardinality of values (1 is scalar, more than 1 allows multiple values)</p>
</li>
<li>
<p>Length - maximum length of text values</p>
</li>
<li>
<p>Pattern - regular expression pattern that text value must match</p>
</li>
<li>
<p>Enumerated - if true, then controlled vocabulary (enumeration values if integer or codelists if text) applies from Codelists table</p>
</li>
</ul>
</div>
</li>
<li>
<p>Attribute - core definition of attribute vocabulary (independently entity types)</p>
<div class="ulist">
<ul>
<li>
<p>ID  - primary key</p>
</li>
<li>
<p>Label - NCV label</p>
</li>
<li>
<p>Code - FACC code</p>
</li>
<li>
<p>Definition - full definition</p>
</li>
<li>
<p>Datatype - the default datatype for this attribute (optional)</p>
</li>
<li>
<p>Quantity - the physical quantity this attribute measures, if applicable</p>
</li>
</ul>
</div>
</li>
<li>
<p>Codelists - definitions of enumerated value vocabulary</p>
<div class="ulist">
<ul>
<li>
<p>ID - primary key</p>
</li>
<li>
<p>Datatype - foreign key to parent datatype</p>
</li>
<li>
<p>Filter - foreign key to EntityAttribute if this codelist should only apply to a particular entity and attribute binding</p>
</li>
<li>
<p>Index - integer value if applicable (enumerations)</p>
</li>
<li>
<p>Code - text value if applicable (codelists)</p>
</li>
<li>
<p>Definition - full definition</p>
</li>
</ul>
</div>
</li>
<li>
<p>EntityRepresentations - table to bind entities to particular geometry representations</p>
<div class="ulist">
<ul>
<li>
<p>ID - primary key of binding</p>
</li>
<li>
<p>Entity - foreign key to entity type</p>
</li>
<li>
<p>Geometry - foreign key to geometry entity type</p>
</li>
<li>
<p>Container - foreign key to category or dataset entity type</p>
</li>
<li>
<p>Label - override for entity label when used in this context</p>
</li>
<li>
<p>Code - override for entity code when used in this context</p>
</li>
</ul>
</div>
</li>
<li>
<p>EntityAttributes - table to bind attributes to particular entities with datatypes</p>
<div class="ulist">
<ul>
<li>
<p>ID - primary key of binding</p>
</li>
<li>
<p>Entity - foreign key to entity-representation definition the attribute applies to</p>
</li>
<li>
<p>Attribute - foreign key to attribute definition</p>
</li>
<li>
<p>Datatype - foreign key to datatype specifying attribute value type and constraints</p>
</li>
<li>
<p>Label - override for attribute label when used in this context</p>
</li>
<li>
<p>Code - override for attribute code when used in this context</p>
</li>
</ul>
</div>
</li>
<li>
<p>Relationships - core set of relationship type definitions</p>
<div class="ulist">
<ul>
<li>
<p>ID - primary key</p>
</li>
<li>
<p>Label - name of relationship type</p>
</li>
<li>
<p>Directed - boolean true if directed, false if bidirectional</p>
</li>
</ul>
</div>
</li>
<li>
<p>EntityRelationships - table to constraint how entities can relate to each other</p>
<div class="ulist">
<ul>
<li>
<p>ID - primary key of binding</p>
</li>
<li>
<p>Source - foreign key to source entity type</p>
</li>
<li>
<p>Mediator - foreign key to mediator entity type, if applicable</p>
</li>
<li>
<p>Target - foreign key to target entity type</p>
</li>
<li>
<p>Cardinality - maximum number of target entities that a source feature may relate to</p>
</li>
<li>
<p>Definition - detailed definition of the purpose of the relationship</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_data_dictionary_versioning_changes_and_extensions"><a class="anchor" href="#_data_dictionary_versioning_changes_and_extensions"></a>8.5.12. Data Dictionary Versioning, Changes, and Extensions</h4>
<div class="paragraph">
<p>One challenge with maintaining long-running data repositories is that data model standards evolve over time. The vast distance between FACC 2.1 and NAS X-3 is a great illustration of that. For CDB X, the subgroup believes that capturing the exact version of data model used and, ideally, the lineage and authority of each definition will be useful to clients for managing their data over periods of years and decades.</p>
</div>
<div class="paragraph">
<p>The subgroup identified the following concepts relevant to data dictionary configuration management (which also overlap with metadata standards):</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Agent - an organization, standards body, or individual that performed or approved some action.</p>
</li>
<li>
<p>Standard - representation of a complete specific version of a data dictionary definition.</p>
<div class="ulist">
<ul>
<li>
<p>Author - the authority that originally created a particular definition.</p>
</li>
<li>
<p>Publisher - the authority that approved a particular definition for inclusion in a particular release version.</p>
</li>
<li>
<p>Title - the name and concept of a particular compilation of definitions - e.g. GGDM, NAS, CDB, OWT.</p>
</li>
<li>
<p>Version - the specific iteration of a particular titled compilation of definitions, typically a version number.</p>
</li>
<li>
<p>Creation Date - the date on which a particular version of a titled compilation was authored.</p>
</li>
<li>
<p>Publication Date - the date on which the particular version of a titled compilation was published.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>The available lineage of any particular feature dictionary - including the current CDB 1.x Feature Dictionary - would consist of a set of Standards referencing a set of Agents that authored and published them. Individual definitions would then be tracked through a sequence of Actions describing what was done with the definition, each Action referencing the Standard in which it occurred:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Action - a particular change related to a definition.</p>
<div class="ulist">
<ul>
<li>
<p>Author - the agent that created that particular action (may be different from overall standard author).</p>
</li>
<li>
<p>Publisher - the agent that approved that particular action for inclusion (may be different from overall standard publisher).</p>
</li>
<li>
<p>Creation Date - the date on which the action was authored.</p>
</li>
<li>
<p>Effective Date - the date on which the action should actually take effect.</p>
</li>
<li>
<p>Standard - in which standard this particular action was taken.</p>
</li>
<li>
<p>Action Type - the specific action that was taken.</p>
<div class="ulist">
<ul>
<li>
<p>Creation - a new definition was created from scratch without referencing any existing Standard.</p>
</li>
<li>
<p>Adoption - a definition was integrated from another Standard, which must be referenced - subsequent adoptions will override prior actions.</p>
</li>
<li>
<p>Amendment - an existing definition was modified relative to its most recent creation or adoption.</p>
</li>
<li>
<p>Application - an existing definition was bound to a new use case e.g. an attribute was added to an entity or a listed value was added to an enumeration.</p>
</li>
<li>
<p>Deprecation - a definition was marked for deprecation to begin the process to sunset its use in the standard.</p>
</li>
<li>
<p>Retirement - a definition was retired and is no longer valid for use in the standard.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>This experiment was purely a thought experiment of how to manage multiple versions of data dictionaries over the lifetime of a single CDB. Among other things, this would enable different containers in the CDB to reference different versions of the standard to enable data model updates without invalidating older data, or to migrate a particular CDB between different data dictionary standard versions. Whether any of this is a desireable use case is a separate question for the CDB SWG to answer. The one use case where tracking the lineage of a particular definition is of utmost important is the integration of non-NAS definitions. these need to be clearly distinguished so that the appropriate work can be done to propose them for NAS adoption or filter them out for use cases that mandate NAS-only attributes. While it was not the intent of this thought experiment, some of these concepts may also be useful for CDB content revisioning.</p>
</div>
</div>
<div class="sect3">
<h4 id="_relationship_to_materials"><a class="anchor" href="#_relationship_to_materials"></a>8.5.13. Relationship to Materials</h4>
<div class="paragraph">
<p>The current CDB 1.x standard specifies a simple yet fairly robust physical material system that is more advanced than what is present in NAS and GGDM. Detailed material information is critical for modeling and simulation, particularly for sensor modeling, weapon fire penetration modeling, blast effects modeling, and chemical/biological/radiological/nuclear/explosive (CBRNE) modeling.</p>
</div>
<div class="paragraph">
<p>The GDGM and NAS approach provides simple enumeration attributes describing material composition of particular feature types - examples include MCC "Structural Material Composition", VCM "Vertical Construction Material", PYM "Pylon Material Type", and BMC "Bottom Material Type". The enumeration values for these material types tends to be limited and fairly broad - examples include "Wood", "Metal", "Concrete", and "Brick". Most of these attributes are multi-valued, although no mechanism exists to describe the proportion of each material or assign them to individual components. Thus the best detail you can typically obtain is to say an entire building is made of brick or an entire river has a bottom of soil. While this baseline capability is important for simulations that don&#8217;t need more detail, it is insufficient for physically-accurate simulations. Regrettably, the enumerations aren&#8217;t even consistent between different attributes: "Wood" might have value 5 for one attribute and value 15 for a different attribute, and may or may not have the same actual definition. This is a flaw in the NCV vocabulary for materials due to literally importing the FACC 2.1 material enumerations that NSG is aware of.</p>
</div>
<div class="paragraph">
<p>The CDB 1.x approach defines a similar set of base materials that serve as primitives in the material system. These base materials are roughly similar to the NAS material enumerants, but more detailed and independent of any particular attribute or enumeration. There is one such base material table in the CDB metadata. More complex materials can then be defined at the tile and model level using composite materials that combine base materials using a primary substrate, an optional surface substrate, and any number of subsurface substrates each with a specified thickness. These materials can then be applied to raster material coverages or to assign materials to model components. However, this approach is defined completely independent of the feature and attribute data model.</p>
</div>
<div class="paragraph">
<p>The gap of GGDM and NAS regarding materials was identified as a problem by the STE One World Terrain Data Model Working Group. Based on those findings, US Army CCDC is funding research efforts to create a NAS-compliant data model for materials. The baseline goal for the material data model is to fully represent CDB 1.x and SE Core materials including substrate definitions. The model also goes substantially further in defining an entity model for base materials that includes physics parameters affecting kinematics and electromagnetism phenomena, weighted chemical and isotope composition, and radiation and other emitters. This research will also explore other ways of combining materials such as conglomeration. The research goal of this effort is to define a material system that not only can provide a semantically rich material model but also provides enough specific quantitative detail that each simulation can interpret each material the same way in terms of inputs to physics effects. This goal will be demonstrated with a material library implementing the actual parameters (or at least decent guesses) for the coarse material enumerations currently defined in the NAS as well as showing detailed materials applying to mesh surfaces and volumes through texturing.</p>
</div>
<div class="paragraph">
<p>The subgroup recommend leaving the CDB material system as-is for CDB 1.3, but coordinate with STE One World Terrain and other stakeholders to integrate the material data model and material library concepts into a NAS-compliant data model for CDB X.</p>
</div>
</div>
<div class="sect3">
<h4 id="_relationship_to_lights"><a class="anchor" href="#_relationship_to_lights"></a>8.5.14. Relationship to Lights</h4>
<div class="paragraph">
<p>The current CDB 1.x Lights.xml and Lights_Client.xml defines a data model of sorts for light name hierarchy and light rendering properties. While the subgroup did not conduct a detailed investigation or mapping, the superficial assessment suggests that these definitions can be refined into a NAS-compliant data model and incorporated into the main feature data dictionary by modeling them as entity types, attributes, and entity-level relationships. Some of the relevant concepts may be present in the latest NAS, and the AIXM data model may go into more detail. This is an item that should probably be left unmodified in CDB 1.3 and investigated further for CDB X.</p>
</div>
</div>
<div class="sect3">
<h4 id="_relationship_to_model_components"><a class="anchor" href="#_relationship_to_model_components"></a>8.5.15. Relationship to Model Components</h4>
<div class="paragraph">
<p>While a detailed investigation of model components was not conducted, a brief glance at Model_Components.xml and Moving_Model_Codes.xml suggests that it would be extremely straightforward to reformulate these in terms of the proposed NAS-compliant data model as entity types, attributes, and enumerations with entity-level relationship constraints. This is an item that should probably be left unmodified in CDB 1.3 and investigated further for CDB X. If this content is to be included in CDB X, that would be a good time to do this reformulation taking advantage of the fact that most - possibly all - of these definitions are likely to be present in the current NAS version.</p>
</div>
</div>
<div class="sect3">
<h4 id="_building_interior_considerations"><a class="anchor" href="#_building_interior_considerations"></a>8.5.16. Building Interior Considerations</h4>
<div class="paragraph">
<p>Building interiors - and underground structures, having similar considerations - introduce substantial complexity in the data model and attribution. CDB 1.x currently specifies a building interior data model that is mostly a literal encoding of the US Army OneSAF Ultra-High Resolution Building (UHRB) data model. Each building component item - structural items such as walls, organizational items such as floor levels and rooms, and fixtures and furniture - are represented as an entity (feature) type with a CDB-invented 5-letter FACC-like code typically starting with 'U'.  Unfortunately, the UHRB specification is no longer publicly available, effectively orphaning the CDB 1.x definitions. Even more unfortunately, building interiors is also a near-complete gap in the NAS and GGDM entity definitions, so this leaves CDB X with substantial work to do.</p>
</div>
<div class="paragraph">
<p>Building interiors are a specialized use case - many aeronautics, maritime, and large-scale ground environment simulations simply do not need that level of detail. However, emerging applications in architecture, engineering, and construction (AEC), autonomous navigation for robotics, serious games for training, and high-fidelity live/virtual/constructive simulations modeling urban warfare critically rely on rich building interior data models. There are a number of different existing building data models out there for various purposes: the Industry Foundation Class (IFC) is used as a Building Information Management (BIM) interchange format in CAD and AEC, OGC CityGML and associated standards are actively being developed for multiple communities to represent from individual building components all the way up to full cities, and Apple has recently submitted a new Indoor Mapping Data Format to OGC as a community standard primarily aimed at autonomous navigation.</p>
</div>
<div class="paragraph">
<p>This has also been identified by the STE One World Terrain Working Group as a critical gap in the OWT data model, with an initial interim proposal submitted based on cross-referencing the existing CDB 1.x definitions with other open standards. As part of the OWT assessment, Greg Peele conducted a rough <a href="Experiments/Attribution/Interior Assessment and Correlation.xlsx">initial cross-walk between different building interior standards</a> and took freeform notes on the <a href="Experiments/Attribution/Assessment of IFC 4.docx">key elements found in IFC 4.3</a>. One deeply problematic finding on this cross-walk is that there are substantial incompatibilities and gaps between these different standards. Another substantial problem is that while IFC is the most widely used for AEC and CAD interchange, it is particularly complex yet does not sufficiently constrain its semantics for true interoperability: Many attributes describing building interior components are unconstrained freeform text in the natural language of the author rather than a controlled vocabulary. If an implementer is lucky, that freeform text might or might not reference municipial, provincial, or national standards where the building is constructed. If not, then all bets are off. There is no off-the-shelf solution that will meet the CDB X or OWT needs right now. Compared to other standards, Apple IMDF is much more limited in scope but relatively precise - it is unlikely to add anything new semantically but can act as a good data input source.</p>
</div>
<div class="paragraph">
<p>Given CDB&#8217;s relationship to OGC, the proper step forward for CDB is to cross-reference the existing CDB 1.x definitions to CityGML, IndoorGML, and similar efforts - ideally keeping the same 5-letter FACC-like codes but using CityGML labels where possible. One substantial question to resolve is whether to use existing NAS and GGDM definitions for elements that could be either indoor or outdoor, or to define separate indoor entity types and use the NAS entity types only for freestanding outdoor items. Examples of such dual-use entity types would include AL175 "Courtyard", AL195 "Ramp", AL260 "Wall", AQ150 "Stair", and AP040 "Gate". Some artifacts introduced by the literal UHRB mapping can be cleaned up in the current CDB 1.x feature dictionary: in particular, a number of duplicate feature type definitions exist in the current CDB 1.x feature dictionary with different 5-letter codes, and a number of abstract feature types that aren&#8217;t actually useful were mapped in from UHRB as well.</p>
</div>
<div class="paragraph">
<p>CityGML and IndoorGML can also provide a set of useful definitions for room types, fixtures and furniture, and other items to a richer level of detail while preserving interoperability between OGC standards. Items that are in CDB but are missing from CityGML should also be cross-walked to IFC if possible, acknowledging the difficulty of that task: Extensive ongoing efforts have attempted to reconcile the BIM/IFC approach with CityGML for quite some time. The subgroup also recommends ongoing coordination with Army Geospatial Center, NGA, and STE One World Terrain as multiple agencies also look at this problem. In any case, representing the full breadth of interior content will require the development of substantial amounts of vocabulary and attribution.</p>
</div>
</div>
<div class="sect3">
<h4 id="_impacts_of_attribution_changes_on_vector_encoding"><a class="anchor" href="#_impacts_of_attribution_changes_on_vector_encoding"></a>8.5.17. Impacts of Attribution Changes on Vector Encoding</h4>
<div class="paragraph">
<p>Summarizing all of our findings into the impact on the CDB vector encoding: Surprisingly, there really isn&#8217;t a substantial impact, . Migrating CDB to NAS and GGDM will of course change the attribute column names in Shapefiles and in the proposed GeoPackage encoding, and will change the possible F_CODE values and in some cases attribute data types. However, this does not necessarily imply any particular changes to the vector encoding file names or content storage beyond that. If (optionally) the dataset names are aligned with NAS views, then of course those names would change. Everything that we have proposed can still be done in the existing Shapefile encoding in CDB 1.3, although the GeoPackage encoding will make some of it easier to model directly and much more storage-efficient (particularly foreign keys for feature-level relationships). We identified ways that multi-valued, range-valued, and codelist attributes can be implemented such that existing clients unaware of them would simply see the first and most significant value, the range mean value, and freeform text values instead, which is a graceful degradation. The vast majority of the changes apply to the CDB XML metadata and associated implications on the logical data model and its proposed future replacement in the CDB X SQLite data model.</p>
</div>
</div>
<div class="sect3">
<h4 id="_impacts_of_attribution_changes_on_3d_models"><a class="anchor" href="#_impacts_of_attribution_changes_on_3d_models"></a>8.5.18. Impacts of Attribution Changes on 3D Models</h4>
<div class="paragraph">
<p>Summarizing all of the group&#8217;s findings into the impact on the CDB 3D model encoding: The impact is relatively minor. The main change is that the current CDB 1.x naming scheme models would result in different filenames for models representing entity types whose name or 5-letter FACC code changed between CDB 1.x and NAS/GGDM. Adopting the newer glTF encoding or other advances may open up additional opportunities for more detailed attribution on 3D models, but there is no fundamental reason why the proposed attribution changes to align with NAS in CDB 1.3 could not work with the existing OpenFlight models.</p>
</div>
<div class="paragraph">
<p>The relationship between 3D models and light definitions and material composition if those are reformulated into a NAS-compliant data model would be on substantive breaking change if adopted for CDB X. The subgroup does not propose making any changes to these definitions for CDB 1.3 and careful consideration should be given on how to best approach that problem.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_summary_of_recommendations"><a class="anchor" href="#_summary_of_recommendations"></a>8.6. Summary of Recommendations</h3>
<div class="ulist">
<ul>
<li>
<p>Adopt NAS-compliant logical entity-attribute model for CDB X with extensions for CDB use cases</p>
<div class="ulist">
<ul>
<li>
<p>Store all aspsects of feature and attribute dictionary in single SQLite file for portability and runtime performance</p>
</li>
<li>
<p>Use GGDM 3.0 as the initial starting point for definitions to populate CDB X data dictionary</p>
</li>
<li>
<p>Match up remaining CDB non-GGDM feature types and subcodes with latest NAS definitions where possible, matching subcodes to attributes where relevant and adding missing enumerant values where necessary (with associated NCV vocabulary)</p>
</li>
<li>
<p>Augment NAS definitions with other open standards and new development</p>
<div class="ulist">
<ul>
<li>
<p>Match up missing maritime definitions to DGIM followed by IHO S-100 where possible, define NCV vocabulary for such integrated definitions</p>
</li>
<li>
<p>Match up missing aeronautics definitions to DGIM followed by AIXM where possible, define NCV vocabulary for such integrated definitions</p>
</li>
<li>
<p>Coordinate with OGC, NGA, and STE OWT to develop replacement building interior data model incorporating IFC/BIM, CityGML, IMDF, and other open standards</p>
</li>
<li>
<p>Coordinate with OGC, NGA, STE OWT, and civilian environment agencies to develop detailed data model for vegetation</p>
</li>
<li>
<p>Create data model and vocabulary for material and light point definitions and capture into existing material and lightpoint libraries</p>
</li>
<li>
<p>Define NCV vocabulary and NAS-compatible entity and attribute types for CDB feature types and subcodes totally missing in all other standards</p>
</li>
</ul>
</div>
</li>
<li>
<p>Remove CDB feature subcodes entirely; migrate to existing and new feature and attribute types instead in NAS-compliant structure</p>
</li>
<li>
<p>Define entity types for CDB datasets and define "aggregation" relationships from feature types to containing datasets</p>
</li>
<li>
<p>Capture feature-level, dataset-level, and database metadata as NAS-compliant attribution meeting the NSG Metadata Foundation (NMF) and ISO 19115</p>
</li>
<li>
<p>Define functional role domains and create mechanism to organize attribution by domain for tailoring to runtime devices</p>
</li>
</ul>
</div>
</li>
<li>
<p>Delegate entity and attribute physical encoding choices to vector and 3D model containers instead of specifying globally</p>
<div class="ulist">
<ul>
<li>
<p>Deprecate extended attributes entirely, to be removed in CDB X</p>
</li>
<li>
<p>Delegate containerization of entity types (one per table, multiple in same table specified by F_CODE attribute, etc.) to vector and model containers</p>
</li>
<li>
<p>Delegate decision whether to use class or instance attributes to individual vector and model containers rather than global data dictionary</p>
</li>
<li>
<p>Delegate decision of whether to use FACC-like codes, NAS labels, or natural language names for entity types, attributes, and values to vector and model containers</p>
</li>
<li>
<p>Delegate decision of whether to flatten complex feature relationships and attributes used GGDM attribute prefixing to vector and model containers</p>
</li>
<li>
<p>Delegate decision of whether to flatten multi-valued and range-valued attributes using GGDM attribute prefixing to vector and model containers</p>
</li>
<li>
<p>Specify minimum and maximum cardinality of multi-valued attributes in feature and attribute dictionary, allow containers to use a lower maximum if using GGDM attribute prefixing encoding</p>
</li>
</ul>
</div>
</li>
<li>
<p>Define backward-compatible extensions in CDB 1.3 to add constructs necessary to move toward NAS-compliant attribution</p>
<div class="ulist">
<ul>
<li>
<p>Capture proposed NAS-complaint replacement feature dictionary in existing CDB metadata XML with necessary extensions</p>
</li>
<li>
<p>Only use feature subcode 000 in replacement dictionary and deprecate use of feature subcodes to be removed in CDB X</p>
</li>
<li>
<p>Add mechanism to mark numeric attributes as interval ranges (existing non-upgraded clients should see still attribute as single-valued and read mean value from associated unsuffixed attribute, use suffixed attributes for deviation and closure for upgraded clients to read)</p>
</li>
<li>
<p>Add minumum and maximum cardinality elements for attribute definitions to specify mininum and maximum element count for multi-valued attributes (existing non-upgraded clients should just see attribute as scalar base value and will only read the first value from associated content, will see ordinal-suffixed attributes as separate attributes)</p>
</li>
<li>
<p>Add list of valid attributes to datasets in CDB 1.x metadata XML files to match existing human-readable specification</p>
</li>
<li>
<p>Add list of valid enumerants for each attribute in CDB 1.x CDB_Attributes.xml file to match existing human-readable specification</p>
</li>
<li>
<p>Add list of valid attributes for each entity type as extension to CDB 1.x Feature_Data_Dictionary.xml to implement NAS-compliant per-entity attributes</p>
</li>
<li>
<p>Update CDB 1.x CDB_Attributes.xml to allow specifying text pattern constraints through &lt;Pattern&gt; element and text codelists for text attributes via &lt;Codelist&gt; element</p>
</li>
<li>
<p>Update CDB 1.x Feature_Data_Dictionary.xml for each feature to specify its generalization (base) entity type via &lt;Generalization&gt; element</p>
</li>
<li>
<p>Update CDB 1.x Feature_Data_Dictionary.xml to add &lt;Aggregation&gt; element to define additional associated category for an entity type, or parent category for a category</p>
</li>
<li>
<p>Existing category and subcategory XML structure will add implicit definitions and aggeregation links for the category/subcategory items as used by CDB 1.0 for model storage</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="_phase_3_day_3"><a class="anchor" href="#_phase_3_day_3"></a>8.6.1. Phase 3, Day 3</h4>
<div id="img_Peele_Whiteboard_Day_3" class="imageblock text-center">
<div class="content">
<img src="images/Greg%20Peele%20Day%203%20whiteboard.png" alt="Greg Peele Day 3 whiteboard" width="1000">
</div>
<div class="title">Figure 2. Greg Peele&#8217;s Whiteboard from Phase 3 Day 3.</div>
</div>
</div>
<div class="sect3">
<h4 id="_phase_3_day_4"><a class="anchor" href="#_phase_3_day_4"></a>8.6.2. Phase 3, Day 4</h4>
<div id="img_Attribution-in-GGDM-prove-me-wrong" class="imageblock text-center">
<div class="content">
<img src="images/Day%204%20Attribution%20in%20GGDM%20Prove%20me%20Wrong%20sign.png" alt="Day 4 Attribution in GGDM Prove me Wrong sign" width="500">
</div>
<div class="title">Figure 3. 'Attribution will be in GGDM, Prove me Wrong' Day 4 Sign.</div>
</div>
<div id="img_Attribution-Day-4-Whiteboard" class="imageblock text-center">
<div class="content">
<img src="images/Attribution%20Day%204%20Sub%20Team%20Whiteboard%201.png" alt="Attribution Day 4 Sub Team Whiteboard 1" width="1000">
</div>
<div class="title">Figure 4. Attribution Day 4 Whiteboard.</div>
</div>
</div>
<div class="sect3">
<h4 id="_phase_3_day_5"><a class="anchor" href="#_phase_3_day_5"></a>8.6.3. Phase 3, Day 5</h4>
<div id="img_Attribution-Day-5-WIP1-Whiteboard" class="imageblock text-center">
<div class="content">
<img src="images/Day%205%20Attribution%20Whiteboard%20WIP1.png" alt="Day 5 Attribution Whiteboard WIP1" width="1000">
</div>
<div class="title">Figure 5. Attribution Day 5 Work in Progress Whiteboard One.</div>
</div>
<div id="img_Attribution-Day-5-WIP2-whiteboard" class="imageblock text-center">
<div class="content">
<img src="images/Day%205%20Attribution%20Whiteboard%20WIP2.png" alt="Day 5 Attribution Whiteboard WIP2" width="1000">
</div>
<div class="title">Figure 6. Attribution Day 5 Work in Progress Whiteboard Two.</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="vectorgpkg"><a class="anchor" href="#vectorgpkg"></a>9. CDB X All Vector Data in GeoPackage</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This clause provides discussion using GeoPackage for vector data storage including requirements and the results of the prototyping activities.</p>
</div>
<div class="sect2">
<h3 id="_general"><a class="anchor" href="#_general"></a>9.1. General</h3>

</div>
<div class="sect2">
<h3 id="_question_to_be_answered"><a class="anchor" href="#_question_to_be_answered"></a>9.2. Question to be answered</h3>
<div class="ulist">
<ul>
<li>
<p>Is the GeoPackage tiling scheme enough for the whole world with dense data, or is there some CDB tiling structure outside that uses multiple GeoPackages?</p>
</li>
<li>
<p>How does GeoPackage work with the need to update data layers dynamically?  SQLite has a write model that only allows a single writer lock that prevents any reads to the database.</p>
</li>
<li>
<p>Lots of discussion on locking. Main sticky note states: PENDING lock means that the process holding the lock wants to write to the database as soon as possible and is just waiting on all current SHARED locks to clear so that it can get an EXCLUSIVE lock. No new SHARED locks are permitted against the database if a PENDING lock is active, though existing SHARED locks are allowed to continue.</p>
<div class="ulist">
<ul>
<li>
<p>Discussion:</p>
<div class="ulist">
<ul>
<li>
<p>Once an EXCLUSIVE lock is acquired, no read/SHARED locks are permitted.</p>
</li>
<li>
<p>Can&#8217;t that exclusive lock be released once the writing is done though?</p>
</li>
<li>
<p>Absolutely, it is held as short as possible.  What are the SOCOM requirements for dynamic updates?  And how often might they occur?</p>
</li>
<li>
<p>Also, this is about multi-processs right&#8230;&#8203; A process that has an exclusive lock can both read &amp; write from the DB.</p>
</li>
<li>
<p>Reading and writing can&#8217;t happen at the same time, and mostly transparent from the calling process.  Also, I am assuming that reading is from one client, and the update is coming from another process.</p>
</li>
<li>
<p>It could be possible for a single process to act as both the reading and proxy for the applying any updates.
***That is one method.  From a flight sim perspective, there might be multiple devices that want direct access to the data.  Or maybe those updates come through other channels (DIS/HLA) and not the CDB</p>
</li>
<li>
<p>What I&#8217;m trying to say is if you wanted a PostgreSQL equivalent for a SQLite DB, you would implement your own server handling multiple connecionts on top of it and that could be considered the "direct" access to the data.</p>
</li>
<li>
<p>So at that point, you are no longer interacting with the CDB, but a service</p>
</li>
<li>
<p>A local service yes, but much as if you used another database like PostgreSQL (meant as a counter-argument to reasons not to chose SQLite over a heavier RDBMS).</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="threedcontent"><a class="anchor" href="#threedcontent"></a>10. 3D Models and other 3D Content</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This section discusses the proposal to use glTF to encode and store 3D models in the CDB X data store. This section also describes the prototype testing performed during the the &lt;activity&gt;. In CDB, 3D models are such phenomenon as trees (static), buildings, transmission towers, or helicopters (dynamic).</p>
</div>
<div class="paragraph">
<p>Currently, the OpenFlight specification is used to define all the 3D models in a CDB data store. The current OGC CDB 1.x core standard and <a href="https://portal.opengeospatial.org/files/16-009r4">Volume 6 CDB Rules for Encoding Data using OpenFlight</a> specifies all of the rules and requirements for using OpenFlight models in a CDB data store. The early advantage OpenFlight held over many 3d geometry model file formats (.obj, .dxf, .3ds) was its specific real-time 3d graphics industry design.</p>
</div>
<div class="paragraph">
<p>For CDB X, the participants in the 3D Geospatial Series Tech Sprint II – OGC CDB 2.0 activity agreed that a more modern 3D model encoding and transmission format should be explored. Based on wide adoption and use in many domains, the Khronos glTF 2.0 specification was selected for further research and prototyping. A key part of this activity was to perform a detailed analysis of glTF functionality as compared to OpenFlight capabilities. The participants agreed that no (or as little as possible) functionality should be lost. NOTE: glTF will not be a replacement for OpenFlight in a CDB data store. Instead, glTF is recommended as the preferred encoding for CDB 3D Models. There are a few OpenFlight to glTF conversion tools.</p>
</div>
<div class="paragraph">
<p>The remainder of this section discusses the findings of the comparison as well as lessons learned from the prototyping activity.</p>
</div>
<div class="sect2">
<h3 id="Questions"><a class="anchor" href="#Questions"></a>10.1. Questions to be addressed</h3>
<div class="paragraph">
<p>Following are some of the questions that the 3D Modelling Subgroup initially identified as needing further discussion and possible experimentation. These formed the basis for the specific questions and approaches uses in the CDB-X 3D Prototyping and Experimentation.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Models be stored in GeoPackage (Editors Note: <code>Is this a good idea? One could store the glTF in the CDB data store without using GeoPackage - just as OpenFlight today. Need to think about also perhaps having I3S, 3D Tiles, CityGML and other encodings.</code>)</p>
</li>
<li>
<p>Models preferred to be glTF (others allowed) (glb package?)</p>
</li>
<li>
<p>Textures shall be xxxx format (png, jp2)  Power of 2 enforced?</p>
</li>
<li>
<p>UV Map with model?</p>
</li>
<li>
<p>naming convention tbd - should have some metadata use - indexing? directory path? layer? featureID?</p>
</li>
<li>
<p>LOD Structure? (3d tiles?  MS LOD extenxtion for glTF) (Editors note: <code>Shouldn&#8217;t the same LoD structure be used throughout CDB-X? Otherwise, things get confusing.</code>)</p>
</li>
<li>
<p>Describe model placement</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>point features</p>
</li>
<li>
<p>Terrain Reconstruction</p>
</li>
<li>
<p>Elevation</p>
</li>
<li>
<p>Imagery</p>
</li>
<li>
<p>Areal features. (Editor&#8217;s note: <code>We stopped using "aerial" in CDB 1.1 - changed to polygon.</code>)</p>
</li>
<li>
<p>linear features</p>
</li>
</ol>
</div>
</li>
<li>
<p>Is there a way to map glTF Material vs CDB physical material?</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>CDB catalog service for 3D tile inside a tile</p>
</div>
</div>
<div class="sect2">
<h3 id="_cdb_x_requirements_for_3d_model_components"><a class="anchor" href="#_cdb_x_requirements_for_3d_model_components"></a>10.2. CDB X Requirements for 3D Model Components</h3>
<div class="paragraph">
<p>Based on the questions and follow-up discussion, the CDB X participants derived the following requirements for CDB-X model components.</p>
</div>
<table class="tableblock frame-all grid-all" style="width: 90%;">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Requirement</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Objectives</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Improve interoperability with OWT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">* Align 3D model geometry attribution in order to support conversion between the two standards. Test that conversion in both directions.<br>
* Support similar encoding (glTF) to support convergence as standards evolve.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Serve archiving/repository use case and runtime usage</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">* Package 3D models LODs in an easy to edit manner while allowing fast runtime access of independent LODs.<br>
* Increase 3D tools (edit and view) interoperability.<br>
* Support multiple encoding with metadata to identify which one is used (Starting with OpenFlight and glTF).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Modernize CDB</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">* Support newer 3D encoding formats (glTF initially)<br>
* Support newer attribution (NAS/GGDM) in point feature and in 3D geometry<br>
* Provide flexibility to extend 3D models components and attribution<br>
* Review LOD “bins” in context of today’s GPU capabilities<br>
* Added constructs for better game engine support (navigation and collision mesh, PBR etc..)<br>
*Review lightpoint (Dataset and in 3D model), light source, lightmap.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Support SOF use cases : Same dataset for M&amp;S and C2 including the mission command and TAK devices</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">* ATAK: Support 3D view and attribution<br>
* ATAK:  Support building interior 3D encoding (and 2D floorplan?)<br>
* ATAK:  Support packing 3D models in small memory footprint<br>
* ATAK:  Support LOD selection “per model or per zone” to transfer only the required data<br>
* Mission command: Support merging of CDB (Versioning) to cover large area<br>
* Mission command: Support 3D WEB based map steaming</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_short_and_medium_term_objectives"><a class="anchor" href="#_short_and_medium_term_objectives"></a>10.3. Short and Medium Term Objectives</h3>
<div class="paragraph">
<p>The following are the short and medium term objectives for the 3D Model Prototyping and Experimentation. These design objectives are based on the initial set of <a href="#questions">questions</a> posed by the CDB-X participants.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Support more 3D model encoding with metadata detailing which is used. Preserve OpenFlight (and potentially improve its usage), add glTF with extensions</p>
</li>
<li>
<p>Reduce file count and package models better while providing enough indexing data to allow readers to quickly extract only what they need. Metadata/catalog - support editing/replace use case</p>
</li>
<li>
<p>Address GS, GT, model instancing</p>
</li>
<li>
<p>Support Building interior with navigation mesh and collision mesh</p>
</li>
<li>
<p>Encode 3D models in glTF</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Node grouping, LOD grouping in json</p>
</li>
<li>
<p>Define CDB extensions for glTF</p>
</li>
<li>
<p>Look at tools to allow CDB attribution editing</p>
</li>
</ol>
</div>
</li>
<li>
<p>Model packing with MetaData</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_3d_experiment_object_model"><a class="anchor" href="#_3d_experiment_object_model"></a>10.4. 3D Experiment Object Model</h3>
<div class="sect3">
<h4 id="_the_data"><a class="anchor" href="#_the_data"></a>10.4.1. The data</h4>
<div class="paragraph">
<p>This experiment uses a GeoPackage comprised of a point feature table with attribution.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="images/3d-model-gpkg-attr-table.png" alt="#img_3d-model-experiment 1" width="900">
</div>
<div class="title">Figure 7. 3D Experiment 1 attribute table for point features.</div>
</div>
</div>
<div class="sect3">
<h4 id="_attribute_changes_explored"><a class="anchor" href="#_attribute_changes_explored"></a>10.4.2. Attribute changes explored</h4>
<div class="paragraph">
<p>The following current CDB attribute changes were explored.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>CNAM - no longer needed</p>
</li>
<li>
<p>FACC - FSC - Change to GGDM - impact on field type</p>
</li>
<li>
<p>MLOD - (LOD of the model to use) This is closely linked to tiling and LODs of vector where each point features would point to a model at a given LOD (should be lower than feature vector LOD). Presume at the moment we keep this.</p>
</li>
<li>
<p>MODL - (Name of the model to use). In this case, we should point to a metadata file for the model. Alternatively, the content of the metadata could be encoded in GeoPackage - which is bad for tool operability.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>A key challenge to resolve is how to link the model data with the feature data. Currently, the MLOD and MODL are composed and lookup into the tile index of the point feature. Is that functional capability (approach?) preserved? Do we use a model table in Geopackage with a primary key? As decided, models would remain separate files and not encoded in the GeoPackage. So, a unique file name is required for this experiment.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_description_of_3d_formatsencodings_and_references_for_this_section"><a class="anchor" href="#_description_of_3d_formatsencodings_and_references_for_this_section"></a>10.5. Description of 3D formats/encodings and References for this section:</h3>
<div class="sect3">
<h4 id="_openflight"><a class="anchor" href="#_openflight"></a>10.5.1. OpenFlight</h4>
<div class="paragraph">
<p>OpenFlight (or .flt) is an open, freely available 3d geometry model file format originally developed by Software Systems Inc. for its MultiGen real-time 3d modeling package and now actively maintained by the OGC member <a href="https://www.presagis.com/en/">Presagis</a>. OpenFlight is an open format, binary encoded with support for user extensions, which is supported widely in modeling and simulation community for dynamic and static 3D model. OpenFlight has numerous constructs that have no equivalent to date in other open standards. In CDB 1.x, OpenFlight is used for  the  representation  of  3D  static and dynamic  models  and  RGB  format  for  the  3D model’s textures. OpenFlight is now an OGC Community standard.</p>
</div>
<div class="paragraph">
<p><a href="https://portal.opengeospatial.org/files/90663">OpenFlight v16</a></p>
</div>
<div class="listingblock">
<div class="title"><strong>Recommendation</strong></div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="ruby"><span class="constant">The</span> <span class="integer">3</span><span class="constant">D</span> model group recommends that a new <span class="constant">CDB</span> standard adopts the latest version of <span class="constant">OpenFlight</span>,
leveraging the extended materials, hot spots <span class="keyword">and</span> other important constructs it brings.</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_gl_transmission_format_gltf_2_0"><a class="anchor" href="#_gl_transmission_format_gltf_2_0"></a>10.5.2. GL Transmission Format (glTF) 2.0</h4>
<div class="paragraph">
<p>glTF is a royalty-free specification for the efficient transmission and loading of 3D scenes and models by applications. glTF uses the JSON standard. glTF is an API-neutral runtime asset delivery format developed by the Khronos Group 3D Formats Working Group.</p>
</div>
<div class="paragraph">
<p><a href="https://github.com/KhronosGroup/glTF/tree/master/specification/2.0">glTF 2.0</a> GitHub repo and description.</p>
</div>
<div class="paragraph">
<p><a href="https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_lights_punctual">KHR_lights_punctual</a> is an extension that defines a set of lights for use with glTF 2.0. Lights define light sources within a scene.</p>
</div>
<div class="paragraph">
<p><a href="https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Vendor/MSFT_lod">MSFT_lod</a> is an extension that adds the ability to specify various Levels of Detail (LOD) to a glTF asset.</p>
</div>
<div class="paragraph">
<p><a href="https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Vendor/EXT_mesh_gpu_instancing">EXT_mesh_gpu_instancing</a> is an extension that is specfically designed to enable GPU instancing which renders many copies of a single mesh at once using a small number of draw calls. It&#8217;s useful for things like trees, grass, road signs, etc.</p>
</div>
<div class="paragraph">
<p><a href="https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Vendor/FB_geometry_metadata">FB_geometry_metadata</a> is an extension that annotates glTF scene objects with a summary of the cumulative geometric complexity and scene-space extents of the scene&#8217;s associated scene graph. <code>Editors note: While the computed total vertex and primitive count are metadata this is very limited metadata and may not meet the needs of the CDB X community.</code></p>
</div>
<div class="paragraph">
<p><a href="https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_unlit">KHR_materials_unlit</a> is an extension that defines an unlit shading model for use in glTF 2.0 materials, as an alternative to the Physically Based Rendering (PBR) shading models provided by the core specification.</p>
</div>
<div class="paragraph">
<p><a href="https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_texture_transform">KHR_texture_transform</a> is an extension that adds offset, rotation, and scale properties to textureInfo structures. These properties would typically be implemented as an affine transform on the UV coordinates.</p>
</div>
<div class="paragraph">
<p><a href="https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Vendor/AGI_articulations">AGI_articulations</a> is an extension that adds articulations that define the names and ranges of allowable motions of nodes on a models. The extension includes articulation stages, pointing vectors, and attach points.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_original_prototyping_experiments_keeping_for_now_but_will_delete_when_this_section_is_more_mature"><a class="anchor" href="#_original_prototyping_experiments_keeping_for_now_but_will_delete_when_this_section_is_more_mature"></a>10.6. Original Prototyping Experiments - Keeping for now but will delete when this section is more mature.</h3>
<div class="paragraph">
<p>Two profiles.</p>
</div>
<div class="paragraph">
<p>Profile 1 Storing the mesh in as 3D tile: Experiments</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Question: How to store LODs? In glTF extensions, In 3D tiles, in separate glTF</p>
</li>
<li>
<p>Question: Are there missing glTF constructs?</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Profile 2 Storing the mesh in as 3D tile (Editor&#8217;s note: <code>Why just 3D Tiles? Why not a more general approach that allows other encodings/approaches?</code>)</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Question: What is the ability to source edit the mesh?</p>
</li>
<li>
<p>Question: Mixing GeoPackage with 3D tiles?</p>
</li>
<li>
<p>Question: CDB catalog service for 3D tile inside a tile</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Both Profile 1 and Profile 2</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Question: What are the efficient format/packing for each different end-points:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>ATAK</p>
</li>
<li>
<p>Mission command (wms/wfs)</p>
</li>
<li>
<p>Modsim</p>
</li>
<li>
<p>Gaming</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
<div id="img_3d-model-experiments" class="imageblock text-center">
<div class="content">
<img src="images/3d-model-prototyping.png" alt="3d model prototyping" width="800">
</div>
<div class="title">Figure 8. Profles and Experiments for CBD-X 3D Models.</div>
</div>
</div>
<div class="sect2">
<h3 id="_investigation_1_make_cdb_3d_models_easier_to_maintain_andor_modify"><a class="anchor" href="#_investigation_1_make_cdb_3d_models_easier_to_maintain_andor_modify"></a>10.7. Investigation 1 - Make CDB 3D models easier to maintain and/or modify</h3>
<div class="paragraph">
<p>One of the objective of the 3D model refactoring in CDB is to facilitate the editing {<strong>Update</strong>} process. In the CDB 1.X environment, 3D model encoding is hard because:
. The OpenFlight format has fewer editing tools than in newer 3D formats {<strong>Give an example</strong>}. This situation led the 3D subgroup to investigate the glTF encoding for possible use in CDB-X.
. The CDB 1.X model components (geometry, texture, metadata) as well as the Level of Detail (LoD) for those components are stored in different folders. This distribution is not well supported by editing tools and edits often require updating many files, including collections contained in Zip files. Therefore the 3D subgroup investigated a grouping for all 3D model components.</p>
</div>
<div class="paragraph">
<p>While investigating these potential solutions, understand the motivationing and design requirements behind the original CDB structure is required so as to properly assess the impact of the changes against the original design criteria. This would include a determination on the current installed CDB user base.</p>
</div>
<div class="paragraph">
<p>CDB 1.X Geospecific 3D models were likely motivated by:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>A single encoding (OpenFlight) for 3D model geometry: At the time of the development of the original CDB specification, OpenFlight was the most adopted and used format for 3D models in the Modeling and Simulation industry. OpenFlight meet the requirements for an open format, an efficient binary encoding, and an editable source format supported by a number of tools. Having a single possible encoding increases interoperability by reducing the number of encoding to support on both the CDB producer and the consumer side. Supporting different encodings (OpenFlight and glTF) may result in less interoperability. In some cases, multiple versions of a CDB with the different encodings may be required as different consumers may only support one encoder.</p>
</li>
<li>
<p>Facilitate parallel access to all components as opposed to sequential access. By grouping all components into datasets (textures geometry, material etc&#8230;&#8203;) into tiles and LODs, a client can assess which tile and component is required and fetch all components in parallel. In other words, without having to read the result of a request before sending a new request (like waiting for geometry to identified {<strong>Confusing here. Not sure what to write</strong>} referred textures and materials).</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>Focusing on GeoSpecific models</strong></p>
</div>
<div class="paragraph">
<p>The initial experimentation targeted Geospecific models inside the CDB structure. This was because they represent the greatest challenge. The GeoTypical models still need to be reviewed. However, the belief is that a sub-set of the GeoSpecific concepts can also be applied to GeoTypical models. The tasks describe below document the investigation along with the results:</p>
</div>
<div class="sect3">
<h4 id="_task_1_cdb_openflight_and_gltf_feature_analysis"><a class="anchor" href="#_task_1_cdb_openflight_and_gltf_feature_analysis"></a>10.7.1. TASK 1 - CDB OpenFlight and glTF Feature Analysis</h4>
<div class="paragraph">
<p>OGC CDB 1.X relies on a number of OpenFlight constructs that have no equivalent in glTF. One of the first task of the group was to list all OGC CDB 1.X requirements with regard to 3D model encodings and assess whether glTF has equivalent constructs.  The following provides details of the resultes of the analysis.</p>
</div>
<div class="paragraph">
<p>==</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 14.2857%;">
<col style="width: 14.2857%;">
<col style="width: 14.2857%;">
<col style="width: 14.2857%;">
<col style="width: 14.2857%;">
<col style="width: 14.2857%;">
<col style="width: 14.2858%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><strong>OpenFlight Construct</strong></th>
<th class="tableblock halign-left valign-top"><strong>CDB Requirement/Guidelines</strong><br>
(all from Chapter 6)</th>
<th class="tableblock halign-left valign-top"><strong>Notes</strong></th>
<th class="tableblock halign-left valign-top"><strong>glTF Equivalent</strong></th>
<th class="tableblock halign-left valign-top"><strong>New glTF extension required</strong></th>
<th class="tableblock halign-left valign-top"><strong>Mapping OF to glTF difficulty</strong></th>
<th class="tableblock halign-left valign-top"><strong>Implemented in converter prototype</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Node Hierarchy</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Req 2 - Global Zone</p>
</div>
<div class="paragraph">
<p>Req 3 - Model Zone</p>
</div>
<div class="paragraph">
<p>Chap 6.5.6.1 - Model Landing Zone</p>
</div>
<div class="paragraph">
<p>Req 17 - Model Footprint Zone</p>
</div>
<div class="paragraph">
<p>Req 18 - Model Footprint Hierarchy</p>
</div>
<div class="paragraph">
<p>Req 19 - Model Cutout Zone</p>
</div>
<div class="paragraph">
<p>Req 20 - Model Cutout Geometry</p>
</div>
<div class="paragraph">
<p>Req 21 - Model Pseudo-Interior Zone</p>
</div>
<div class="paragraph">
<p>Req 22 - Model Interior Zone</p>
</div>
<div class="paragraph">
<p>Req 4 - Layers</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Chap 6.2 - Using hierarchy to organize models helps identify components of intereset</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Node Hierarchy fully supported</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Easy</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Comment Attribute</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Req 14 - Zone Names</p>
</div>
<div class="paragraph">
<p>Chap 6.5.3.1 - Zone Material Index</p>
</div>
<div class="paragraph">
<p>Req 16 - Hot Spot Temperature</p>
</div>
<div class="paragraph">
<p>Req 23 - Model Point (Damage)</p>
</div>
<div class="paragraph">
<p>Req 24 - Model Point (DIS Origin)</p>
</div>
<div class="paragraph">
<p>Req 25 - Model Point (View Point)</p>
</div>
<div class="paragraph">
<p>Chap 6.6.2.3 - Model Attach Point</p>
</div>
<div class="paragraph">
<p>Chap 6.6.2.4 - Model Anchor Point</p>
</div>
<div class="paragraph">
<p>Chap 6.6.2.5 - Model Center of Mass</p>
</div>
<div class="paragraph">
<p>Req 29 - Damage State (Levels)</p>
</div>
<div class="paragraph">
<p>Req 36 - Model Vendor Attributes</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Comment field is used to extend OpenFlight node for CDB specialization for many uses</p>
</div>
<div class="paragraph">
<p>A number of constructs are available in the OF spec that could be natively encoded in the format instead of using the comment field.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Implemented using CDB extension</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Easy</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Node Attribution</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Req 13 - Model Zone Bounding Box</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Group node has bounding box attribute</p>
</div>
<div class="paragraph">
<p>Other attributes available on the node:</p>
</div>
<div class="paragraph">
<p>Roof Flag</p>
</div>
<div class="paragraph">
<p>Culture Footprint</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Primitives have min/max properties.</p>
</div>
<div class="paragraph">
<p>For general nodes, this must be stored using the CDB extension</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Easy</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">External Referencing</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Chap 6.2.4 - Model Master File</p>
</div>
<div class="paragraph">
<p>Req 6 - Use XRef node to reference other files</p>
</div>
<div class="paragraph">
<p>Chap 6.2.5.1 - Models straddling multiple files</p>
</div>
<div class="paragraph">
<p>Chap 6.2.5.2 - Models with multiple LODs</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Model Master File (comprised of xrefs) ensures a Model is seen as a single "object" even though its constituents are stored in separate files</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No external referencing</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Difficult</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Partial</p>
</div>
<div class="paragraph">
<p>The converter can parse external references and combine them into one gltf file (using mesh instancing for repeated references)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Level of Detail Node</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Chap 6.2.5.2 - Models with multiple LODs</p>
</div>
<div class="paragraph">
<p>Req 26 - Significant Size</p>
</div>
<div class="paragraph">
<p>Chap 6.8.1 - Exchange LODs</p>
</div>
<div class="paragraph">
<p>Chap 6.8.2 - Additive LODs</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>LOD node contained in XRefs in master file</p>
</div>
<div class="paragraph">
<p>Significant Size attribute on LOD</p>
</div>
<div class="paragraph">
<p>LOD node support exchange and additive LOD strategies</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Requires extension (MSFT_lod)</p>
</div>
<div class="paragraph">
<p>No sig size. Works with switch in/out</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Medium</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Yes</p>
</div>
<div class="paragraph">
<p>Uses MSFT_lod extension</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Switch Node</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Req 27 - Switch Masks (one per state)</p>
</div>
<div class="paragraph">
<p>Req 28 - Switch Mask Names</p>
</div>
<div class="paragraph">
<p>Req 29 - Damage State (Transition)</p>
</div>
<div class="paragraph">
<p>Req 31 - Blur State (Transition)</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Switch node supports multiple masks. Each mask can be named.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No native support for this.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Medium</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Degree of Freedom Node</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Req 32 - Articulation</p>
</div>
<div class="paragraph">
<p>Req 33 - Gimbal Limits</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DOF node supports min/max limits for each degree of articulation (translation, scale, rotation)</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Skins, Joints, Animations.</p>
</div>
<div class="paragraph">
<p>glTF is more flexible/complex than OF when it comes to animated models</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Medium</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Light Point Node</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Req 35 - Model Light Points</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Light Point node can represent individual points or light "string"</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>No native support.</p>
</div>
<div class="paragraph">
<p>Existing extensions for light sources but these are a different concept than light points</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Difficult</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Projection</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Req 1 - Specify Projections</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required projections for GTModel, GSModel, MModel and T2DModel</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Could be done as part of the CDB extension or using a separate extension to improve interoperability.</p>
</div>
<div class="paragraph">
<p>Technically not required for CDB because CDB enforces the projection of models. GSModels, GTModels and MModels must use flat earth and T2DModels must use geodetic.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Medium</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Coordinate System</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Req 7 - X (left/right), Y (front/back), Z (bottom/top)</p>
</div>
<div class="paragraph">
<p>Req 8 - Origin (0,0,0)</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">These are native OpenFlight conventions</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>glTF 2.0 uses a right-handed coordinate system, with x point right, y point up and z backward</p>
</div>
<div class="paragraph">
<p>Changing this requires an extension and would reduce performance and interoperability</p>
</div>
<div class="paragraph">
<p>Would recommend keeping glTF&#8217;s axis system and adjusting the standard if needed.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">N/A</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Local Coordinate System</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Chap 6.3.1.2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Transformation Matrix is used to specify LCS</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Transformations on nodes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Easy</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Units</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Char 6.3.1.3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Header attribute is used to specify Units</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Can be specified in extras property</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Easy</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Instancing</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Req 11 - Avoid repeating identical pieces of geometry</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Efficiency - smaller database size</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Multiple nodes can instantiate the same mesh.</p>
</div>
<div class="paragraph">
<p>However, there is no concept of node instancing. OF is more flexible</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Medium</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mesh</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Req 11 - Favor mesh over polygons</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Efficiency - smaller database size, fewer graphics states</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Mesh is supported and highly recommended over polygons.</p>
</div>
<div class="paragraph">
<p>In OF many models use individual polygon nodes, but this would be inefficient in glTF. May lead to large geojson files.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Easy</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Yes</p>
</div>
<div class="paragraph">
<p>Polygon nodes at the same level with the same textures are merged into one mesh</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Vertex Ordering</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Req 11 - CCW order of verts define polygon "front"</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">GLTF uses CCW ordering of vertices</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Easy</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Relative Priority</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Req 12 - Layers of coplanar geometry</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Relative Priority attribute at :</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Face</p>
</li>
<li>
<p>Mesh</p>
</li>
<li>
<p>Object</p>
</li>
<li>
<p>Group</p>
</li>
</ul>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Not supported natively. Can be stored in an extension, but per-face priority is more complicated.</p>
</div>
<div class="paragraph">
<p>Two possible solutions :</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Faces with different priorities should be grouped in separate meshes</p>
</li>
<li>
<p>Use an extension to support per-face metadata</p>
</li>
</ul>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Easy</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Textures</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Req 37 - Textures stored in separate files from models</p>
</div>
<div class="paragraph">
<p>Req 41 - Relative Texture Paths</p>
</div>
<div class="paragraph">
<p>Req 42 - Object Shadow Attribute</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Loading efficiency</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Textures supported.</p>
</div>
<div class="paragraph">
<p>Materials in glTF are similar to extended materials in OF, but not all layers from openflight exist in glTF.</p>
</div>
<div class="paragraph">
<p>Ex: Light map, specular map, reflection map.</p>
</div>
<div class="paragraph">
<p>Material textures are not a concept in gltf. Would require extension.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Difficult</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>==</p>
</div>
<div class="paragraph">
<p>==</p>
</div>
<div class="paragraph">
<p>==</p>
</div>
<div class="paragraph">
<p>==</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_supporting_more_than_cdb_1_x"><a class="anchor" href="#_supporting_more_than_cdb_1_x"></a>11. Supporting more than CDB 1.X:</h2>
<div class="sectionbody">
<div class="paragraph">
<p>OpenFlight capabilities that could be leveraged:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Extensions</p>
</li>
<li>
<p>Extended Materials</p>
</li>
<li>
<p>Hotspots</p>
</li>
<li>
<p>LOD Transitions</p>
</li>
<li>
<p>Cultural Footprint</p>
</li>
<li>
<p>Point Nodes (Model Points instead of using tranforms)</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="_task_2_developing_gltf_cdb_extensions"><a class="anchor" href="#_task_2_developing_gltf_cdb_extensions"></a>11.1. TASK 2 - Developing glTF CDB extensions</h4>
<div class="paragraph">
<p><code>EXT_CDB</code> is a draft glTF extension that adds required CDB simulation capabilities identified as missing from glTF. The new (and prototype) capabilities include:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Indicating that a glTF node is a certain type of CDB point: Attachment point, anchor point, center of mass, DIS origin, or viewpoint.</p>
</li>
<li>
<p>Referencing light points from glTF nodes.</p>
</li>
<li>
<p>Attaching CDB zones to glTF nodes.</p>
</li>
<li>
<p>Assigning switch nodes to a glTF node to represent damage states.</p>
</li>
<li>
<p>Storing model attributes on a glTF node.</p>
</li>
<li>
<p>Extending materials with CDB texture types: Detail texture, contaminants texture, and material map texture.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The full schema can be found <a href="https://github.com/sofwerx/cdb2-concept/blob/3Dmodels_prototype/3Dmodel_Prototype/glTF-CDB-extension-schema.zip">here</a> (TODO - need link to updated schema)</p>
</div>
<div class="paragraph">
<p>The CDB glTF extension contains most of the required CDB-specific features. However there are some possible additions that could be made:</p>
</div>
<div class="paragraph">
<p><strong>Coordinate reference system (CRS)</strong>
Openflight can store the CRS of a model in its header and this capability is currently not possible in glTF.
While not strictly required for CDB (A CRS of WGS 84 (EPSG 4326 and EPSG 4329) is mandated by the CDB standard), the 3D subgroup determined that this would be useful for interoperability. There is also interest in such an extension for One World Terrain (OWT). Therefore, specifying a CRS should likely be done as a stand-alone extension and not as part of the CDB glTF extension</p>
</div>
<div class="paragraph">
<p><strong>Per face metadata</strong>
The current OpenFlight specification allows for storing materials or relative priority per-face. However, in glTF faces are usually collapsed into meshes so there is no way to store information per polygon.
With the current extension, the solution would be to group polygons with the same relative priority and material into a single mesh and store the information at the mesh level.</p>
</div>
<div class="paragraph">
<p>There is an OWT extension in progress to enable storing metadata at the feature level. <a href="https://github.com/CesiumGS/glTF/pull/1">This extension</a> currently supports storing per-vertex metadata but that extension could possibly be expanded to support per-face metadata and used in a CDB datastore.</p>
</div>
<div class="paragraph">
<p><strong>External References</strong>
This is one of the larger challenges encountered during our investigations. In the past there was discussion about including an external reference extension in glTF but it was decided not to include it {<strong>Who made this decision?</strong>}.
In past cases, separate index files were used to reference multiple glTF files from a common source. This is sufficient for some cases but does not help for the use case of sharing geometry between multiple models. For example sharing common roof clutter objects between different buildings</p>
</div>
<div class="sect4">
<h5 id="_extensions_roadmap"><a class="anchor" href="#_extensions_roadmap"></a>Extensions Roadmap</h5>
<div class="paragraph">
<p>One of the challenges was deciding which CDB capabilities belong in <code>EXT_CDB</code> and which belong in standalone extensions. This is especially true when judged by an extension&#8217;s utility to the wider glTF ecosystem. The 3D subgroup also investigated whether leveraging existing glTF extensions is possible. Finally, the 3D subgroup determined that some capabilities should go in the model indexing file rather than in the glTF. Our recommendations are below:</p>
</div>
<div class="paragraph">
<p><strong>The EXT_CDB extension</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>CDB-specific constructs such as points, zones, lights, light maps, and extended texture types.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Possible standalone extensions</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Coordinate Reference System - shared interest with One World Terrain and possibly wider glTF ecosystem</p>
</li>
<li>
<p>Switch nodes - shared interest with One World Terrain moving models format</p>
</li>
<li>
<p>External references - some interest in wider glTF ecosystem, but many unresolved implementation details</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Leverage existing extensions</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Articulations - <a href="https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Vendor/AGI_articulations">AGI_articulations</a></p>
</li>
<li>
<p>Metadata - <a href="https://github.com/CesiumGS/glTF/pull/1">EXT_feature_metadata</a> - extension for storing metadata at different levels of granularity - per-mesh, per-face, per-vertex, and per-texel. This could be a good candidate for CDB model attributes and material map textures.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Model indexing file</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Model LODs</p>
</li>
<li>
<p>Interior and exteriors</p>
</li>
<li>
<p>Navigation and collision mesh</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_adoption"><a class="anchor" href="#_adoption"></a>Adoption</h5>
<div class="paragraph">
<p>The initial approach was to create a monolithic CDB glTF extension so that editors and viewers would only need to support a single extension to load CDB glTF models. However, the group determined that there was a significant amount of overlap between CDB and OWT requirements and shifted towards a more granular approach to avoid multiple redundant extensions being developed. Generally glTF extensions that have seen wider adoption are both simple and useful to a wide variety of vendors. Suggested next steps are to collaborate more closely with OWT stakeholders and reach out to the wider glTF community for review. This review would be followed by practical experimentation in runtime engines. After OGC review and agreement, the extensions may be formalized as either ratified Khronos extensions (KHR prefix) or, more likely, Multi-Vendor extensions (EXT prefix), and be listed in the <a href="https://github.com/KhronosGroup/glTF/tree/master/extensions">glTF Extension Registry</a>.</p>
</div>
<div class="paragraph">
<p>Another key topic for adoption is editor support. glTF has seen increasing adoption in 3D modelling software like Blender, 3DS Max, and Maya but extensions are often lost during the import/export process. Workarounds have been proposed such as storing extension information outside of the glTF container (see <a href="https://github.com/AnalyticalGraphicsInc/gmdf">The glTF Metadata File (GMDF) for Systems Tool Kit (STK)</a>). Some capabilities like per-face feature assignment are not possible in standard modelling packages and would require plugins. The most likely path of adoption is native support for the extensions in simulation editors and plugins for more general purpose 3D modeling software.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_task_3_prototype_a_openflight_to_gltf_converter_supporting_the_new_extension"><a class="anchor" href="#_task_3_prototype_a_openflight_to_gltf_converter_supporting_the_new_extension"></a>11.2. TASK 3 - Prototype a OpenFlight to glTF converter supporting the new extension</h4>
<div class="imageblock text-center">
<div class="content">
<img src="images/Tank-model_3Dview.jpg" alt="Tank model 3Dview" width="800">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="images/TankModel_nodes_OpenFlight.png" alt="TankModel nodes OpenFlight" width="300">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="images/TankModel_nodes_glTF.jpg" alt="TankModel nodes glTF" width="300">
</div>
</div>
<div class="paragraph">
<p>Above are some images of a tank 3D model in both formats. This model was selected as benchmark as it contains a number OpenFlight specific constructs leveraged in the CDB standard. Converting this model will exercise {<strong>exercized?</strong>) many of the proposed glTF extensions.</p>
</div>
<div class="sect4">
<h5 id="_ofgltf_size_comparison_metrics"><a class="anchor" href="#_ofgltf_size_comparison_metrics"></a>OF/gltf size comparison metrics:</h5>
<div class="paragraph">
<p><strong>Small CDB size comparisons (898 GS models - without textures)</strong></p>
</div>
<div class="paragraph">
<p>Comparing the size of the 300_GSModelGeometry and 303_GSModelDescriptor folders from the source CDB to the 999_ModelGeometry folder in the converted CDB {<strong>models?</strong>}:</p>
</div>
<table class="tableblock frame-all grid-all" style="width: 30%;">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Format</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Size</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Openflight</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">11.0 MB</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ascii gltf</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">9.16 MB</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Binary glb</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">6.83 MB</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong>Size comparison for a single very large model</strong></p>
</div>
<table class="tableblock frame-all grid-all" style="width: 30%;">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Format</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Size</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Openflight</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">16.7 MB</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ascii gltf</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">9.27 MB</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Binary glb</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">10.78 MB</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>In the CDB test case, the Ascii glTF file is slightly smaller than the Openflight file and the binary glb is almost twice as small.
In the test case with a single large model, both the binary and ascii glTF provide a significant improvement in space savings. However, in this case the binary file is actually slightly larger than the ascii glTF. The reason for this is not entirely clear, but it seems to be an outlier based on teh results of the other tests.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_task_4_define_a_new_structure_to_store_3d_models"><a class="anchor" href="#_task_4_define_a_new_structure_to_store_3d_models"></a>11.3. TASK 4 - Define a new structure to store 3D models</h4>
<div class="paragraph">
<p>Storing the 3D models in a CDB datastore can be either in files and folders or inside a GeoPackage. Where the prototype stopped short of packing {<strong>Packing where</strong>} the resulting glTF files, a number of elements need to be considered when this gets {<strong>When what gets?</strong>} investigated. Those are:</p>
</div>
<div class="paragraph">
<p><strong>File based approach</strong></p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Use zip: One challenge of using the CDB 1.X stadnrd is the large number of files that are created. Where many small files are not optimal on I/O, putting all datasets into one large file would lead to a large volume of data needing to be scanned to extract what is needed {<strong>NOTE: This was investigated in the OGC Testbed 16 GeoPackage activity. Some interesting recommendations</strong>}. A ZIP is a good format to allow quick access to the content index in order to decode only the required data. As such, a recommendation is to group each model data into a zip (all LODs, textures etc&#8230;&#8203;) while keeping the xml (index file) separate. A quick access to the index file would allow identifying what is required to be loaded into each ZIP. This way, a client server could work with a scheme similar to the OGC getCapabilities to query the available data prior to accessing the actual payload.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>GeoPackage based approach</strong></p>
</div>
<div class="paragraph">
<p><strong>&lt;TBD&gt;</strong></p>
</div>
</div>
<div class="sect3">
<h4 id="_task_5_define_an_index_file_for_all_3d_model_components"><a class="anchor" href="#_task_5_define_an_index_file_for_all_3d_model_components"></a>11.4. TASK 5 - Define an index file for all 3D model components</h4>
<div class="paragraph">
<p>The grouping of all components of a 3D model together requires an index file that indexes and references all those components. The list of components proposed include: Feature attribution (GGDM), reference to source model used, model exterior, Model interior, Collision volume, and nav mesh. Splitting those constructs into separate component follows the current logic in the CDB standard of splitting the dataset in order to quickly access only required data without having to load larger component(s) that include all {<strong>All what?</strong>} only to reject most of the content. This approach also serves the purpose of rapid update by allowing changing one element without the other (update nav mesh, or interior without changing the complete model) needing to be updated.</p>
</div>
<div class="paragraph">
<p>Some consideration should be made to ensure all existing GSModelDescriptor information is migrated into this file {<strong>The index file?</strong>} (texture mapping info being one).</p>
</div>
<div class="paragraph">
<p><strong>Duplication of information</strong>
There was a request to also store the model georeferencing inside this file {<strong>The index file?</strong>}. The challenge with this is the duplication of information such as CDB positions models based on the point feature. Changing the georeferencing in this file would not lead to a change in the model position. The CDB standard typically avoids duplication of information as duplication creates confusion. In this same idea, one could argue that the model attribution (GGDB) should not be there either as this would also be duplication.</p>
</div>
<div class="paragraph">
<p>This file content and structure requires a review and alignment with the rest of the CDB metadata.</p>
</div>
<div class="paragraph">
<p><strong>task:</strong> convert sample {<strong>sample what?</strong>} to object model and produce associated schema.</p>
</div>
<div class="listingblock">
<div class="title"><strong>Sample XML model indexing file</strong></div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="preprocessor">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span>
<span class="comment">&lt;!-- &quot;Model&quot; node includes encoding statement. Should this info be pushed down,
     maybe in the geometry node? Do we allow multiple encodings all referenced
         in the same indxing file?
--&gt;</span>
<span class="tag">&lt;Model</span> <span class="attribute-name">encoding</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">OpenFlight</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">multi-instance</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">false</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
        <span class="comment">&lt;!-- &quot;Name&quot; has to be unique in a tile. Do we need this info or we rely on the filename
             or geopackage entry name.
    --&gt;</span>
        <span class="tag">&lt;Name&gt;</span>cdb_swa_gs_hotel_03<span class="tag">&lt;/name&gt;</span>
        <span class="tag">&lt;Identification&gt;</span>
                <span class="tag">&lt;GGDM&gt;</span>
                        <span class="tag">&lt;Code&gt;</span>AL015 <span class="tag">&lt;/Code&gt;</span>
                        <span class="tag">&lt;Subcode&gt;</span>0 <span class="tag">&lt;/Subcode&gt;</span>
                <span class="tag">&lt;/GGDM&gt;</span>
        <span class="tag">&lt;/Identification&gt;</span>

    <span class="comment">&lt;!-- model_complete_source - Do we allow uses/users to store this in CDB? Where? Any format?
         This model would typically include all LODs and possibly constructs not supported
         by CDB. This would likely also require the storing of the source textures. As such,
         a zip is likely a better container. Still, inclusion of this will increase CDB size
    --&gt;</span>
        <span class="tag">&lt;model_complete_source</span> <span class="attribute-name">file</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">My_hotel_model_full_Detail.obj</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">encoding</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">obj</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>

    <span class="comment">&lt;!-- model_exterior - Following current CDB, exterior (shell) of a model should be seperated
         from interiror and other mesh representation for load/stream efficency.
        --&gt;</span>
        <span class="tag">&lt;model_exterior&gt;</span>
                <span class="tag">&lt;LODherarchy</span> <span class="attribute-name">coarsestCDBLOD</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">1</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">finestCDBLOD</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">5</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                        <span class="tag">&lt;RootModel&gt;</span>  <span class="comment">&lt;!-- root model points to all LODs --&gt;</span>
                                <span class="tag">&lt;geometry</span> <span class="attribute-name">file</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">cdb_swa_gs_hotel_03_ROOT.flt</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
                                <span class="tag">&lt;Metadata&gt;</span>myFile.xml<span class="tag">&lt;/Metadata&gt;</span>
                        <span class="tag">&lt;/RootModel&gt;</span>
                        <span class="tag">&lt;LevelOfDetail</span> <span class="attribute-name">LOD</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">2</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                                <span class="tag">&lt;geometry&gt;</span>
                                        <span class="tag">&lt;file&gt;</span>cdb_swa_gs_hotel_03_L02.flt<span class="tag">&lt;/file&gt;</span>
                                <span class="tag">&lt;/geometry&gt;</span>
                                <span class="tag">&lt;Metadata&gt;</span>N12E044_D303_S001_T001_L02_U1_R1_AL015_000_cdb_swa_gs_hotel_03.xml<span class="tag">&lt;/Metadata&gt;</span>
                                <span class="comment">&lt;!-- need to add provenance to metadata --&gt;</span>
                        <span class="tag">&lt;/LevelOfDetail&gt;</span>
                        <span class="tag">&lt;LevelOfDetail</span> <span class="attribute-name">LOD</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">5</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                                <span class="tag">&lt;geometry&gt;</span>
                                        <span class="tag">&lt;file&gt;</span>cdb_swa_gs_hotel_03_L05.flt<span class="tag">&lt;/file&gt;</span>
                                <span class="tag">&lt;/geometry&gt;</span>
                                <span class="tag">&lt;Metadata&gt;</span>N12E044_D303_S001_T001_L05_U1_R1_AL015_000_cdb_swa_gs_hotel_03.xml<span class="tag">&lt;/Metadata&gt;</span>
                                <span class="comment">&lt;!-- need to add provenance to metadata --&gt;</span>
                        <span class="tag">&lt;/LevelOfDetail&gt;</span>
                <span class="tag">&lt;/LODherarchy&gt;</span>
        <span class="tag">&lt;/model_exterior&gt;</span>
    <span class="comment">&lt;!-- model_interior - The linkage between exteriror and interior geometry currently relies on XREF in
             OpenFlight in order to position/connect interior with exterior. (requirement for glTF)
                 Alternatively, model with the interior could be a higher LOD of an object. This is not precluded
                 by the standard (as long a geometry comply to CDB geometry LOD rules).
        --&gt;</span>
        <span class="tag">&lt;model_interior&gt;</span>
                <span class="tag">&lt;LODherarchy</span> <span class="attribute-name">coarsestCDBLOD</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">5</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">finestCDBLOD</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">5</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                        <span class="tag">&lt;RootModel&gt;</span>  <span class="comment">&lt;!-- root model points to all LODs --&gt;</span>
                                <span class="tag">&lt;geometry</span> <span class="attribute-name">file</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">cdb_swa_gs_hotel_interior.flt</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
                                <span class="tag">&lt;Metadata&gt;</span>myFile.xml<span class="tag">&lt;/Metadata&gt;</span>
                        <span class="tag">&lt;/RootModel&gt;</span>
                        <span class="tag">&lt;LevelOfDetail</span> <span class="attribute-name">LOD</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">5</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                                <span class="tag">&lt;geometry&gt;</span>
                                        <span class="tag">&lt;file&gt;</span>cdb_swa_gs_hotel_interior_L05.flt<span class="tag">&lt;/file&gt;</span>
                                <span class="tag">&lt;/geometry&gt;</span>
                                <span class="tag">&lt;Metadata&gt;</span>N12E044_D303_S001_T001_L01_U1_R1_AL015_000_cdb_swa_gs_hotel_03.xml<span class="tag">&lt;/Metadata&gt;</span>
                                <span class="comment">&lt;!-- need to add provenance to metadata --&gt;</span>
                        <span class="tag">&lt;/LevelOfDetail&gt;</span>
                <span class="tag">&lt;/LODherarchy&gt;</span>
        <span class="tag">&lt;/model_interior&gt;</span>
        <span class="tag">&lt;collision_volume</span><span class="tag">/&gt;</span>
        <span class="tag">&lt;navigation_mesh</span><span class="tag">/&gt;</span>
<span class="tag">&lt;/Model&gt;</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_investigation_2_merging_all_geometry_in_a_tile_i_am_assuming_this_section_will_get_more_information_and_an_edit"><a class="anchor" href="#_investigation_2_merging_all_geometry_in_a_tile_i_am_assuming_this_section_will_get_more_information_and_an_edit"></a>11.5. Investigation 2 - Merging all geometry in a tile {<strong>I am assuming this section will get more information - and an edit</strong>}</h3>
<div class="paragraph">
<p>This investigation was not done by the 3D group but the tiling group did&#8230;&#8203;.
This type of solution has significant impact on the CDB data model:
. The mesh solution merges many CDB datasets into one. The elevation and 3D features along with the imagery are now all merged into one dataset.
. The attribution to objects on the terrain is currently done in the vector, with a reference to the geometry. In a mesh case, the linkage will likely need to be revered and have the geometry link to the attribution.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="metadata"><a class="anchor" href="#metadata"></a>12. CDB X Metadata and Integration</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This section discusses metadata in CDB X</p>
</div>
<div class="sect2">
<h3 id="_summary_of_history_of_cdb_x_metadata_discussions"><a class="anchor" href="#_summary_of_history_of_cdb_x_metadata_discussions"></a>12.1. Summary of history of CDB X metadata discussions.</h3>
<div class="paragraph">
<p>The earlier 'industry' versions, and OGC CDB 1.x versions of CDB contain a 'metadata' directory.  Despite the directory name, this is a collection of .XSD (XML Schema Definition) and associated .XML (eXtensible Markup Language) files that are essentially controlled vocabularies for elements of the CDB standard.</p>
</div>
<div class="paragraph">
<p>In the OGC CDB  Github "Schema" repo, the contents of the root level are:</p>
</div>
<div id="img_CDB1-schema-root-level-files" class="imageblock text-center">
<div class="content">
<img src="images/CDB%201dotX%20schema%20repo%20root%20directory%20files.png" alt="CDB 1dotX schema repo root directory files" width="750">
</div>
<div class="title">Figure Mtd_Ph3 - 9. OGC CDB Schema Github Repo Root level files.</div>
</div>
<div class="paragraph">
<p>and the contents of the Metadata subdirectory are:</p>
</div>
<div id="img_CDB1-schema-metadata-subdir-files" class="imageblock text-center">
<div class="content">
<img src="images/CDB%201dotX%20schema%20repo%20Metadata%20file%20directory.png" alt="CDB 1dotX schema repo Metadata file directory" width="750">
</div>
<div class="title">Figure Mtd_Ph3 - 10. OGC CDB Schema Github Repo Metadata sub-directory files.</div>
</div>
<div class="paragraph">
<p>OGC CDB V1.1 is a minor revision of OGC CDB that provides for optional global and local metadata.  The description of the new geospatial metadata provisions is in the Volume 1 Core document, in Section 5.1:</p>
</div>
<div id="img_CDB1dot2-Vol-1-new-geo-metadata" class="imageblock text-center">
<div class="content">
<img src="images/Metadata%20in%20CDB%20V1dot2.png" alt="Metadata in CDB V1dot2" width="750">
</div>
<div class="title">Figure Mtd_Ph3 - 11. OGC CDB V1.2 Volume 1 Table-of-Contents Exerpt.</div>
</div>
<div class="paragraph">
<p>For ease of reference, sections 5.1.10 thru 5.1.12 from Volume 1 of OGC CDB V1.2 are repeated here:</p>
</div>
<div class="sect3">
<h4 id="GeospatialMetadataGuidance"><a class="anchor" href="#GeospatialMetadataGuidance"></a>12.1.1. Geospatial Metadata – Guidance</h4>
<div class="paragraph">
<p>These are optional metadata files. This file is not included with the CDB distribution schema package.</p>
</div>
<div class="paragraph">
<p>Most metadata standards specify dozens of possible elements, such as author, that can be specified in a metadata encoding. This is why in many communities there are profiles that are applicable to the information sharing and discovery requirements of that community. For example, there are numerous profiles of ISO 19115:2013 Geographic information – Metadata. These include the INSPIRE, Defence NSG Geospatial Core metadata, and FGDC profiles. As such, the CDB standard does not specify mandatory and/or optional metadata elements. Instead, a suggested set of minimal metadata elements are provided. The two lists – one for global and one for local – are based on an evaluation of mandatory elements in eight widely implemented metadata standards that are used in the geospatial and simulation communities. The one requirement is that all local metadata in a CDB data store provides the same mandatory elements as defined in the metadata standard specified in the Version metadata.</p>
</div>
<div class="paragraph">
<p>These following two sub-clauses recommend the metadata elements for global and local metadata. The use of F.1 refers to Table F.1 in ISO 19115-1:2014. Each element is identified by a general string followed by two element names The first name is the DCAT name followed by the ISO 19115:2014 element name.</p>
</div>
<div class="sect4">
<h5 id="SuggestedGlobalGeospatialMetadataElements"><a class="anchor" href="#SuggestedGlobalGeospatialMetadataElements"></a>Suggested Global Geospatial Metadata Elements</h5>
<div class="paragraph">
<p>Resource Identifier (dct:identifier, MD_Metadata.metadataIdentifier): A unique identifier for the entire CDB data store instance. This identifier is persistent and is considered global metadata. For example, this could be a Digital Object Identifier (DOI). The <strong>DOI</strong> system provides a framework for persistent identification of electronic resources management of intellectual content, managing metadata, linking customers with content suppliers, facilitating electronic commerce and enable automated management of media.</p>
</div>
<div class="paragraph">
<p>Resource Title (<a href="http://purl.org/dc/terms/title">dct:title</a>, CI_Citation.title): Title by which the resource is known (Table F.1). For global metadata for a CDB data store, this would be a name given to the entire data store. For example, this could be “Yemen demonstration CDB data store.”</p>
</div>
<div class="paragraph">
<p>Resource point of contact (dcat:contactPoint, (MD_Metadata.contact/CI_ResponsibleParty): Name of the person, position, or organization responsible for the resource. (Table F.1). This is a text string. An example of a resource point of contact could be “Flight Safety” or “CAE.”</p>
</div>
<div class="paragraph">
<p>Resource reference date (dct:issued, CI_Citation.date): A date which is used to help identify the resource. (Table F.1). For global metadata, this is the date that the CDB data store was created or issued.</p>
</div>
<div class="paragraph">
<p>Resource Language (dct:language, PT_Locale): The language and character set used in the resource (if a language is used). (Table F.1) NOTE: We should recommend use of ISO 639-2 . For example, for English, the code would be “ENG.”</p>
</div>
<div class="paragraph">
<p>Geographic Location (dct:spatial, EX_GeographicBoundingBox): Geographic description or coordinates (latitude/longitude) which describes the location of the resource. Note: I think for the CDB standard that the definition should be narrowed to the bounding box of the contents of the data store. (Table F.1). We should also follow guidance from OGC OWS Common. See also 19115 annex B.3.1.2 Geographic extent information.</p>
</div>
<div class="paragraph">
<p>Resource abstract (dct:description <sup class="footnote">[<a id="_footnoteref_1" class="footnote" href="#_footnotedef_1" title="View footnote.">1</a>]</sup>, MD_DataIdentification.abstract): A brief description of the content of the resource (Table F.1).</p>
</div>
<div class="paragraph">
<p>Metadata date stamp (dct:issued, MD_Metadata.dateInfo): Reference date(s) for the metadata, especially creation. (Table F.1). Note: Date gives values for year, month and day. Character encoding of a date is a string which shall follow the format for date specified by ISO 8601. This class is documented in full in ISO/TS 19103.</p>
</div>
<div class="paragraph">
<p>Temporal Extent information for the dataset (dct:temporal, EX_TemporalExtent): The temporal extent of the resource. For a CDB data store, this would be the temporal range of when the data store was initially created to the point where the most recent content was created.</p>
</div>
<div class="paragraph">
<p>Constraints on resource access and use (dct:accessRights, MD_SecurityConstraints): Security restrictions on the access and use of the resource. These would be constraints for an entire CDB data store. This could be information necessary to generate an EDH compliant encoding.</p>
</div>
<div class="paragraph">
<p>Constraints on resource access and use (dct:license, MD_LegalConstraints): A sub-class of all access constraints. These legal constraints include copyright, patent, patent pending, trademark, license, Intellectual Property Rights, restricted, and other. At the global level, these are legal constraints applicable to an entire CDB data store.</p>
</div>
</div>
<div class="sect4">
<h5 id="_suggested_local_geospatial_metadata_elements"><a class="anchor" href="#_suggested_local_geospatial_metadata_elements"></a>Suggested Local Geospatial Metadata Elements</h5>
<div class="paragraph">
<p>Local Geospatial metadata can be stored in a number of different folder locations based on the data resource (data set) for which the metadata is associated. For instance, metadata for vector data will be stored at the LoD/tile level. Metadata for a moving model would be stored in the same folder using the same path name as the actual model definition. See Clause 5.1.2 above for examples.</p>
</div>
<div class="paragraph">
<p>+
While the same metadata elements are recommended for both global and local geospatial metadata, there are some differences that should be considered.</p>
</div>
<div class="paragraph">
<p>+
<em>Metadata Reference Information</em> (dct:identifier, MD_Metadata.metadataIdentifier) This is a unique identifier for the dataset. In CDB, this could be the pathname to the dataset or the tile. These pathnames are unique. Using such identifers would facilitate development of a RESTful API for discovery and access of CDB resources.</p>
</div>
<div class="paragraph">
<p>+
<em>Resource Title</em> (<a href="http://purl.org/dc/terms/title">dct:title</a>, CI_Citation.title): Title by which the data set is known (Table F.1). For local metadata, this could be a name given to a layer or model in the data store. In a CDB data store, at the dataset or tile level this would be a name given to the resource, such as “county soils.”</p>
</div>
<div class="paragraph">
<p>+
<em>Resource point of contact</em>: Name of the person, position, or organization responsible for the resource. This is a text string. An example of a resource point of contact for the content for a given layer and tile could be “Ordnance Survey.”</p>
</div>
<div class="paragraph">
<p>+
<em>Resource reference date</em> (dct:issued , CI_Citation.date): A date which is used to help identify the resource. For local metadata, this could the date that the tile content was created in the CDB data store or the date a moving model was added to the data store</p>
</div>
<div class="paragraph">
<p>+
<em>Spatial Resolution Information</em> (No equivalent, MD_Identification.spatialResolution): The nominal scale and/or spatial resolution of the resource. This description can include LoD information. Note: This is not precision! Precision is more about the number of decimal places and not the accuracy of the resource.</p>
</div>
</div>
<div class="sect4">
<h5 id="_where_are_local_metadata_files_stored"><a class="anchor" href="#_where_are_local_metadata_files_stored"></a>Where are local metadata files stored?</h5>
<div class="paragraph">
<p>Typically, local metadata files will be stored with the physical data. For GTModel geotypical data sets, the metadata file would be stored along with the model XML file. If the model is stored in multiple LoDs, the metadata would also be stored at each LoD. For tiled vector data, the local metadata would be stored with the vector files at the tile level. Please see the esamples in Section 3.0 for more detail.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_phase_3_consensus_day_3"><a class="anchor" href="#_phase_3_consensus_day_3"></a>12.1.2. Phase 3 Consensus, Day 3</h4>
<div id="img_Metadata-sub-team-consensus" class="imageblock text-center">
<div class="content">
<img src="images/Metadata%20sub-team%20consensus.png" alt="Metadata sub team consensus" width="250">
</div>
<div class="title">Figure Mtd_Ph3 - 12. Day 3 Consensus and formation of the Metadata / Integration sub-team.</div>
</div>
</div>
<div class="sect3">
<h4 id="_phase_3_day_4_2"><a class="anchor" href="#_phase_3_day_4_2"></a>12.1.3. Phase 3, Day 4</h4>
<div id="img_Metadata-Day-4-Whiteboard" class="imageblock text-center">
<div class="content">
<img src="images/Metadata%20Ph3%20Day%204.png" alt="Metadata Ph3 Day 4" width="1000">
</div>
<div class="title">Figure Mtd_Ph3 - 13. Metadata Day 4 Whiteboard.</div>
</div>
</div>
<div class="sect3">
<h4 id="_phase_3_day_5_2"><a class="anchor" href="#_phase_3_day_5_2"></a>12.1.4. Phase 3, Day 5</h4>
<div id="img_Attribution-Day-4-Whiteboard" class="imageblock text-center">
<div class="content">
<img src="images/Metadata%20Ph3%20Day%205.png" alt="Metadata Ph3 Day 5" width="1000">
</div>
<div class="title">Figure Mtd_Ph3 - 14. Metadata Day 5 Whiteboard.</div>
</div>
</div>
<div class="sect3">
<h4 id="_plan_for_experimentation_in_subsequent_phases"><a class="anchor" href="#_plan_for_experimentation_in_subsequent_phases"></a>12.1.5. Plan for Experimentation in subsequent phases</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="tiling"><a class="anchor" href="#tiling"></a>13. Tiling and packaging of data layers</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This chapter covers the evaluation of a specific global tiling scheme for CDB X, the configurable grouping of Levels of Detail to balance file size vs
file count, an approach to packaging one or more data layers in GeoPackages (including coverage, vector and 3D data), current and proposed GeoPackage
extensions for storing this data, as well as the results of related prototyping activities.</p>
</div>
<div class="paragraph">
<p>Although the tiling sub-group was initially assigned specifically to explore tiled coverage data, some experiments went beyond this and also applied the
same tiling approach to vector data and 3D models and used existing or new extensions to store this tiled data in GeoPackages.</p>
</div>
<div class="sect2">
<h3 id="_general_2"><a class="anchor" href="#_general_2"></a>13.1. General</h3>
<div class="paragraph">
<p>Any tiling schemes specified in a CDB X data store (repository) SHALL be based on and consistent with the:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://portal.ogc.org/files/?artifact_id=92962&amp;version=1">OGC Core Tiling Conceptual and Logical Models for 2D Euclidean Space</a> (19-014r3)</p>
</li>
<li>
<p><a href="https://www.ogc.org/standards/tms">OGC Two Dimensional Tile Matrix Set Standard</a> (17-083r2)</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="_ogc_core_tiling_conceptual_and_logical_models_for_2d_euclidean_space"><a class="anchor" href="#_ogc_core_tiling_conceptual_and_logical_models_for_2d_euclidean_space"></a>13.1.1. OGC Core Tiling Conceptual and Logical Models for 2D Euclidean Space</h4>
<div class="paragraph">
<p>This OGC Abstract Specification consists of two Parts: A General Tiling Conceptual Model and, based on the Conceptual Model, a Logical Model for the Tessellation (Tiling) of 2D Euclidean Space. Tiling  of  2D  Euclidean  space  is  the  most  commonly  known  approach  to  partitioning  space  in traditional  geospatial  technology.  However, there are also common elements and/or semantics for any approach to partitioning space in any dimension. The logical model in this document defines a set  common  required  elements  and  then  follows  with  more  specific  requirements  for  the  two dimensional case.</p>
</div>
<div class="paragraph">
<p>Part  1  of  the  Abstract  Specification  describes  a  general  tiling  conceptual  model.  The conceptual model is applicable to any dimension.  The  conceptual model makes no assumptions regarding content, use cases, implementation scenarios, or how the space is to be tessellated (tiled).  The conceptual model is abstract and cannot be implemented as is.</p>
</div>
<div class="paragraph">
<p>Part  2  of  the Tiling  Abstract  Specification  defines  a  detailed  logical  model  for  the  tessellation  of  2D Euclidean  Space.  One  or  more  logical  models  are  required  to  provide  the  requirements  and structure  necessary  for  implementation.  Therefore, in  addition to the conceptual model, this Abstract Specification also specifies a core logical model for the 2D planar (Euclidean) use case.</p>
</div>
</div>
<div class="sect3">
<h4 id="_ogc_two_dimensional_tile_matrix_set_standard"><a class="anchor" href="#_ogc_two_dimensional_tile_matrix_set_standard"></a>13.1.2. OGC Two Dimensional Tile Matrix Set Standard</h4>
<div class="paragraph">
<p>The OGC Tile Matrix Set standard defines the rules and requirements for a tile matrix set as a way to index space based on a set of regular grids defining a domain (tile matrix) for a limited list of scales in a Coordinate Reference System (CRS) as defined in [OGC 08-015r2] Abstract Specification Topic 2: Spatial Referencing by Coordinates. Each tile matrix is divided into regular tiles. In a tile matrix set, a tile can be univocally identified by a tile column a tile row and a tile matrix identifier. This document presents a data structure defining the properties of the tile matrix set in both UML diagrams and in tabular form. This document also presents a data structure to define a subset of a tile matrix set called tile matrix set limits. XML and JSON encodings are suggested both for tile matrix sets and tile matrix set limits. Finally, the document offers practical examples of tile matrix sets both for common global projections and for specific regions.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_design_objectives_for_cdb_x_tiling_lods_and_layers"><a class="anchor" href="#_design_objectives_for_cdb_x_tiling_lods_and_layers"></a>13.2. Design Objectives for CDB X Tiling, LoDs and Layers</h3>
<div class="paragraph">
<p>The following are the key design principles for a CDB X tiling, levels of detail, and layering.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>OGC GeoPackage structured containers are a primary storage format for derived vector data layers, coverages, and other data types as identified (<code>TBD</code>). The two OGC Standards of relevance are <a href="https://portal.opengeospatial.org/files/12-128r15">OGC GeoPackage version 1.1</a> and <a href="http://docs.opengeospatial.org/is/17-066r1/17-066r1.html">OGC GeoPackage Extension for Tiled Gridded Coverage Data</a>.</p>
</li>
<li>
<p>Use metadata for whole datasets that describe how data layers are regrouped in GeoPackages (LOD grouping and data layer grouping)</p>
</li>
<li>
<p>Provide for fewer top level tiles than in OGC CDB 1.x</p>
</li>
<li>
<p>Store imagery in GeoPackage according to the tiling scheme specified below (<code>need anchor</code>)</p>
</li>
<li>
<p>Store coverage data in GeoPackage according to the tiling scheme specified below (<code>need anchor</code>). Suggested coverage types based on current CDB standard and user specified requirements: (Ellipsoidal body surface): Elevation models, visual and non-visual (multi-spectral) imagery, terrain light maps (emissive at night), and raster materials (for non-visual sensors). Should be extensible to support other types.</p>
</li>
<li>
<p>Coordinate Reference System is WGS 84 with epoch encoding (same as current CDB Standard except for epoch).</p>
</li>
<li>
<p>Need to keep the various encodings that CDB 1.x already has:</p>
<div class="ulist">
<ul>
<li>
<p>Elevation compression encodings (use of scaled integers vs floating point for smaller data sizes)</p>
</li>
<li>
<p>Elevation grids that are adjustable (better terrain fidelity at lower LODs/zoom levels)</p>
</li>
<li>
<p>Raster Material encodings using multiple coverage layers</p>
</li>
<li>
<p>Imagery Compression (Imagery is typically the largest layer in CDB by disk storage)</p>
</li>
</ul>
</div>
</li>
<li>
<p>Must enable a "relatively" easy migration path from the CDB 1.1/1.2 tiling/LoD structure into the CDB X structure.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_proposed_tiling_logical_model_for_cdb_x"><a class="anchor" href="#_proposed_tiling_logical_model_for_cdb_x"></a>13.3. Proposed Tiling Logical Model for CDB X</h3>
<div class="paragraph">
<p>The following figure, based on the Tiling Abstract Specification Logical Model and the CDB 1.x Conceptual Model, shows the properties by class (concept) and the relationships between the classes.</p>
</div>
<div id="img_logical-model" class="imageblock text-center">
<div class="content">
<img src="images/tiling_logical_model.jpg" alt="tiling logical model" width="800">
</div>
<div class="title">Figure Mtd_Ph3 - 15. Logical Model for partitioning based on tiles in CDB X.</div>
</div>
</div>
<div class="sect2">
<h3 id="_proposed_cdb_x_tiling_scheme"><a class="anchor" href="#_proposed_cdb_x_tiling_scheme"></a>13.4. Proposed CDB X Tiling Scheme</h3>
<div id="img_gggtms-model" class="imageblock text-center">
<div class="content">
<img src="images/cdbxTMS.png" alt="cdbxTMS" width="800">
</div>
<div class="title">Figure Mtd_Ph3 - 16. Level 2 of the GNOSIS Global Grid proposed for CDB X.</div>
</div>
<div class="paragraph">
<p>The proposed tiling scheme would be based on the GNOSISGlobalGrid, where the tiling starts with a 2x4 grid of tiles with each tile 90 degrees on a side that covers the whole Earth.  This is zoom level 0 (or tile matrix identifier "0").  Each experiment used a tile size of 256x256, although that could be experimented with.  At each successive zoom level, each lower level tile is split into four new tiles at the next zoom level, except for any tile that touches either the North or South Pole is not split in the longitude direction.  This subdivision can continue until the zoom level is high enough to accommodate the highest resolution data that is to be stored within the CDB X.</p>
</div>
<div class="paragraph">
<p>References for the GNOSISGlobalGrid tiling scheme:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The 2D TMS Standard Annex H.2: <a href="http://docs.opengeospatial.org/is/17-083r2/17-083r2.html#106" class="bare">http://docs.opengeospatial.org/is/17-083r2/17-083r2.html#106</a></p>
</li>
<li>
<p>The 2D TMS JSON description: <a href="http://schemas.opengis.net/tms/1.0/json/examples/GNOSISGlobalGrid.json" class="bare">http://schemas.opengis.net/tms/1.0/json/examples/GNOSISGlobalGrid.json</a></p>
</li>
<li>
<p>Testbed 13 - Vector Tiles ER: <a href="http://docs.opengeospatial.org/per/17-041.html#_global_gnosis_tiling_scheme_adapted_to_polar_regions" class="bare">http://docs.opengeospatial.org/per/17-041.html#_global_gnosis_tiling_scheme_adapted_to_polar_regions</a></p>
</li>
<li>
<p>OGC Standard Tracker - Global WGS84 tiling scheme adapted to polar regions (quad tree except for always having 4 tiles at the poles): <a href="http://ogc.standardstracker.org/show_request.cgi?id=520" class="bare">http://ogc.standardstracker.org/show_request.cgi?id=520</a></p>
</li>
<li>
<p>OGC Ideas Repository - Global tiling grid approximating equal-area while maintaining a simple latitude/longitude aligned rectangular tile layout (not quite a DGGS) <a href="https://github.com/opengeospatial/ideas/issues/59" class="bare">https://github.com/opengeospatial/ideas/issues/59</a></p>
</li>
<li>
<p>Vector Tiles Pilot - Phase 2 Summary ER: <a href="https://docs.ogc.org/per/19-088r2.html" class="bare">https://docs.ogc.org/per/19-088r2.html</a></p>
</li>
</ul>
</div>
<div id="img_logical-model" class="imageblock text-center">
<div class="content">
<img src="images/image2020-7-8_10-39-39.png" alt="image2020 7 8 10 39 39" width="515">
</div>
<div class="title">Figure Mtd_Ph3 - 17. Proposed Tiling Scheme for CDB X.</div>
</div>
</div>
<div class="sect2">
<h3 id="_findings_from_experiments"><a class="anchor" href="#_findings_from_experiments"></a>13.5. Findings from experiments</h3>
<div class="paragraph">
<p>The following graph compares the CDB 1.x zones with the Gnosis grid and shows how the GNOSIS algorithm helps to keep the typical tile closer to a “square” than CDB’s zones.</p>
</div>
<div id="img_logical-model" class="imageblock text-center">
<div class="content">
<img src="images/image2020-9-4_10-41-0.png" alt="image2020 9 4 10 41 0" width="800">
</div>
<div class="title">Figure Mtd_Ph3 - 18. CDB 1.x to GNOSIS Comparison - Ratio.</div>
</div>
<div class="sect3">
<h4 id="_tiling_changes_from_ogc_cdb_1_x"><a class="anchor" href="#_tiling_changes_from_ogc_cdb_1_x"></a>13.5.1. Tiling Changes From OGC CDB 1.x</h4>
<div class="paragraph">
<p>Benefits from changing to the proposed tiling scheme:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>OGC CDB 1.x has 41,220 top level tiles, which requires opening huge numbers of files to show the Earth at world scales.  The proposed CDB X tiling would use 8 tiles to cover the Earth at the coarsest level of detail.</p>
</li>
<li>
<p>The concept of "zones" in OGC CDB 1.x are still present in the tiling scheme, but algorithmically derived rather than at fixed latitudes.  New zones are introduced at higher levels of detail, keeping the tiles near the poles closer to an ideal square shape than in OGC CDB 1.x</p>
</li>
<li>
<p>The ratio of the longitude size of tiles is always 1:1, 2:1, or the inverse 1:2, where OGC CDB 1.x has several ratios that must be supported, such as 2:1, 3:2 and 4:3</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Drawbacks from changing to the proposed tiling scheme include the following.  These issues would require some level of rework for existing CDB applications to be compatible with the new tiling scheme.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The new tiling scheme is incompatible with OGC CDB 1.x, as there is no alignment between the tile areas and the LOD or zoom levels.  To convert data between these two tiling schemes would require merging and splitting of raster data tiles, while changing their resolution, and would require reprocessing all the coverage data (like imagery).</p>
</li>
<li>
<p>Some CDB applications might have more trouble with tiles that are not based on integer latitude and longitude boundaries.</p>
</li>
<li>
<p>Some CDB applications might have an issue with a format where there are not a fixed number of "zones" (using the OGC CDB 1.x term) or different grid cell sizes used.  This is because the GNOSIS grid introduces a new "zone" closer to the poles at each successive zoom level to help preserve a grid cell that is closer to an ideal square real world size.</p>
</li>
<li>
<p>Tile Matrix Set naming (numbering) is different from OGC CDB 1.x, with the numbering starting from the top left corner of a set of tiles in CDB X vs starting from the bottom left corner of a set of tiles in OGC CDB 1.x.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_proposed_cdb_x_data_container"><a class="anchor" href="#_proposed_cdb_x_data_container"></a>13.6. Proposed CDB X Data Container</h3>
<div class="paragraph">
<p>The coverage, vector and 3D models data would be stored using GeoPackage containers.
Imagery and coverage data would always be tiled, while vector data could optionally be stored tiled using extensions for tiled vector data being standardized,
and 3D models could either be stored in a single table referenced by placement points, or as batched 3D models tiles.</p>
</div>
</div>
<div class="sect2">
<h3 id="_proposed_levels_of_detail_grouping"><a class="anchor" href="#_proposed_levels_of_detail_grouping"></a>13.7. Proposed Levels of Detail Grouping</h3>
<div class="paragraph">
<p>There are two proposed ways to group data within a series of GeoPackage containers.  Within these choices is a tradeoff between the format simplicity of working with a single container, and access latency due to larger file and table sizes.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>For edge users and smaller areas, we would recommend that all the CDB X coverage layers be present within a single GeoPackage container.  This approach could be an export from a larger CDB X dataset, where only the resolutions and the boundaries of the data needed are stored and delivered to an end user.</p>
</li>
<li>
<p>For Modeling and Simulation uses, as well as data repository cases, we recommend that a series of GeoPackage containers be used to store CDB X coverage layers.  This involves storing a region of the world at a set of zoom levels, or levels of detail, within a single GeoPackage, with a specified file and directory naming scheme.  This approach would allow for faster access to data at specified areas and zoom levels.  It would also lend itself to concurrent access and editing for data repository maintainers.</p>
<div class="ulist">
<ul>
<li>
<p>We propose that a configurable grouping value be used to specify how many zoom levels or levels of detail are put into a single GeoPackage.  This would be a tradeoff between the number of GeoPackages created and the file and table sizes within each GeoPackage.</p>
</li>
<li>
<p>Multiple grouping numbers were experimented with. 5 was found to be a good number for packaging together all data layers of the San Diego CDB. This grouping number might need to be adjusted for different types of data layers, or different data sets as well.</p>
</li>
<li>
<p>The proposed naming of each GeoPackage file is based on the layer name and the coarsest, lowest level tile included within the grouping inside the GeoPackage.  That tile&#8217;s level, row (from the top) and column within the tile matrix set make up the filename, along with the level of the finest or highest level tile that can be placed into this GeoPackage.  For example:  <strong>Coverages_L4_R16_C12_L6.gpkg</strong></p>
</li>
<li>
<p>The proposed directory naming creates a directory tree to limits the number of GeoPackage files that could exist within a single directory.  Each GeoPackage will exist within a set of directory names that represents each coarser or lower zoom level GeoPackage that encompases the smaller higher resolution area.  For example:  The file, <strong>Coverages_L4_R16_C12_L6.gpkg</strong>, will exist in the directory named <strong>Coverages\L0_R1_C0\L1_R2_C1</strong></p>
<div class="ulist">
<ul>
<li>
<p>The file and directory naming needs to be easy to compute algorithmically or exist within a catalog, without having to search a data repository to discover arbitrarily named files.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>To facilitate extraction from a large (or even worldwide) dataset, easily merging these extracted sub-datasets, as well as the ability
to augment these base datasets with additional more detailed insets, without requiring to repackage the entire dataset, the following solutions are proposed:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The publisher of a large repository of data could pre-establish fixed maximum LODs for specific data layers (e.g. imagery, elevation, 3D Models)</p>
</li>
<li>
<p>When inset data is added to a dataset, these could go beyond the regular maximum LOD specified for the 'packaging',
thus these inset tiles are always grouped together with the tiles of the regular maximum LOD.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Recommendation: Define this capability for splitting GeoPackages based on a specific tiling scheme outside of the CDB X standard so that it can be used by itself.</p>
</div>
</div>
<div class="sect2">
<h3 id="_proposed_cdb_json_index_of_packages_and_data_layers"><a class="anchor" href="#_proposed_cdb_json_index_of_packages_and_data_layers"></a>13.8. Proposed <code>cdb.json</code> index of packages and data layers</h3>
<div class="paragraph">
<p>The Tiling group developed a simple schema for describing the data layers provided by a CDB X, which CDB component selector they correspond to, and how
they are packaged in one ore more <em>packages</em>, which can themselves either be stored in a single GeoPackage (zero or <em>null</em> LOD grouping), or separated in
multiple GeoPackage based on tiles grouped in multiple LODs (non-zero LOD grouping). This index allows the flexibility to use the best suited configuration
for a given dataset or use case, yet it is very simple for a client to parse and access the data in a deterministic manner using any of these configurations.
When using a single GeoPackage is used, potentially this <code>cdb.json</code> could be included inside as metadata (using the GeoPackage metadata extension) to make
this GeoPackage a single file, very portable compliant CDB X.
The following <code>cdb.json</code> index files demonstrate the three main configuration possibilities.
Additional examples are also provided along with the experiments results.</p>
</div>
<div class="paragraph">
<p><strong>Example 1</strong>: two data layers (with a maximum LOD of 16 and 18) packaged as a single GeoPackage ("groupLOD" : 0&#8201;&#8212;&#8201;all LODs grouped together).
This will be a single file named <code>SampleCDBX.gpkg</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
   <span class="key"><span class="delimiter">&quot;</span><span class="content">packages</span><span class="delimiter">&quot;</span></span> : [
      {
         <span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">SampleCDBX</span><span class="delimiter">&quot;</span></span>,
         <span class="key"><span class="delimiter">&quot;</span><span class="content">tms</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">GNOSISGlobalGrid</span><span class="delimiter">&quot;</span></span>,
         <span class="key"><span class="delimiter">&quot;</span><span class="content">groupLOD</span><span class="delimiter">&quot;</span></span> : <span class="integer">0</span>,
         <span class="key"><span class="delimiter">&quot;</span><span class="content">maxLOD</span><span class="delimiter">&quot;</span></span> : <span class="integer">18</span>,
         <span class="key"><span class="delimiter">&quot;</span><span class="content">layers</span><span class="delimiter">&quot;</span></span> : [
            {
               <span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">Elevation</span><span class="delimiter">&quot;</span></span>,
               <span class="key"><span class="delimiter">&quot;</span><span class="content">cs1</span><span class="delimiter">&quot;</span></span> : <span class="integer">1</span>,
               <span class="key"><span class="delimiter">&quot;</span><span class="content">maxLOD</span><span class="delimiter">&quot;</span></span> : <span class="integer">16</span>
            },
            {
               <span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">Imagery</span><span class="delimiter">&quot;</span></span>,
               <span class="key"><span class="delimiter">&quot;</span><span class="content">cs1</span><span class="delimiter">&quot;</span></span> : <span class="integer">4</span>,
               <span class="key"><span class="delimiter">&quot;</span><span class="content">maxLOD</span><span class="delimiter">&quot;</span></span> : <span class="integer">18</span>
            },
         ]
      }
   ]
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Example 2</strong>: two data layers (with a maximum LOD of 16 and 18) packaged as a single package, grouped in GeoPackages covering tiles across 5 LODs.
The one package will be organized in a folder named <code>SampleCDBX</code>, and the GeoPackages files will be grouped by 5 counting down from the maximum LOD 18,
e.g. <code>SampleCDBX/L0_R0_C0/L4_R10_C11/L9_R324_C356/SampleCDBX_L14_R10376_C11415_L18.gpkg</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
   <span class="key"><span class="delimiter">&quot;</span><span class="content">packages</span><span class="delimiter">&quot;</span></span> : [
      {
         <span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">SampleCDBX</span><span class="delimiter">&quot;</span></span>,
         <span class="key"><span class="delimiter">&quot;</span><span class="content">tms</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">GNOSISGlobalGrid</span><span class="delimiter">&quot;</span></span>,
         <span class="key"><span class="delimiter">&quot;</span><span class="content">groupLOD</span><span class="delimiter">&quot;</span></span> : <span class="integer">5</span>,
         <span class="key"><span class="delimiter">&quot;</span><span class="content">maxLOD</span><span class="delimiter">&quot;</span></span> : <span class="integer">18</span>,
         <span class="key"><span class="delimiter">&quot;</span><span class="content">layers</span><span class="delimiter">&quot;</span></span> : [
            {
               <span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">Elevation</span><span class="delimiter">&quot;</span></span>,
               <span class="key"><span class="delimiter">&quot;</span><span class="content">cs1</span><span class="delimiter">&quot;</span></span> : <span class="integer">1</span>,
               <span class="key"><span class="delimiter">&quot;</span><span class="content">maxLOD</span><span class="delimiter">&quot;</span></span> : <span class="integer">16</span>
            },
            {
               <span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">Imagery</span><span class="delimiter">&quot;</span></span>,
               <span class="key"><span class="delimiter">&quot;</span><span class="content">cs1</span><span class="delimiter">&quot;</span></span> : <span class="integer">4</span>,
               <span class="key"><span class="delimiter">&quot;</span><span class="content">maxLOD</span><span class="delimiter">&quot;</span></span> : <span class="integer">18</span>
            }
         ]
      }
   ]
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Example 3</strong>: three data layers (with a maximum LOD of 16, 18 and 13) packaged as three separate packages.
Elevation is grouped in GeoPackages covering tiles across 6 LODs, Imagery is grouped in tiles across 7 LODs while Buildings are stored grouped in a single GeoPackage.
The Elevation package will be organized in a folder named <code>Elevation</code>, and the GeoPackages files will be grouped by 5 counting down from the maximum LOD 16,
e.g. <code>Elevation/L0_R0_C0/L5_R20_C22/Elevation_L11_R1302_C1427_L16.gpkg</code>.
The Imagery package will be organized in a folder named <code>Imagery</code>, and the GeoPackages files will be grouped by 7 counting down from the maximum LOD 18,
e.g. <code>Imagery/L0_R0_C0/L5_R20_C22/Imagery_L12_R2605_C2855_L18.gpkg</code>.
The Buildings will be stored in a single file named <code>Buildings.gpkg</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
   <span class="key"><span class="delimiter">&quot;</span><span class="content">packages</span><span class="delimiter">&quot;</span></span> : [
      {
         <span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">Elevation</span><span class="delimiter">&quot;</span></span>,
         <span class="key"><span class="delimiter">&quot;</span><span class="content">tms</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">GNOSISGlobalGrid</span><span class="delimiter">&quot;</span></span>,
         <span class="key"><span class="delimiter">&quot;</span><span class="content">groupLOD</span><span class="delimiter">&quot;</span></span> : <span class="integer">6</span>,
         <span class="key"><span class="delimiter">&quot;</span><span class="content">maxLOD</span><span class="delimiter">&quot;</span></span> : <span class="integer">16</span>,
         <span class="key"><span class="delimiter">&quot;</span><span class="content">layers</span><span class="delimiter">&quot;</span></span> : [
            {
               <span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">Elevation</span><span class="delimiter">&quot;</span></span>,
               <span class="key"><span class="delimiter">&quot;</span><span class="content">cs1</span><span class="delimiter">&quot;</span></span> : <span class="integer">1</span>,
               <span class="key"><span class="delimiter">&quot;</span><span class="content">maxLOD</span><span class="delimiter">&quot;</span></span> : <span class="integer">16</span>
            }
         ]
      },
      {
         <span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">Imagery</span><span class="delimiter">&quot;</span></span>,
         <span class="key"><span class="delimiter">&quot;</span><span class="content">tms</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">GNOSISGlobalGrid</span><span class="delimiter">&quot;</span></span>,
         <span class="key"><span class="delimiter">&quot;</span><span class="content">groupLOD</span><span class="delimiter">&quot;</span></span> : <span class="integer">7</span>,
         <span class="key"><span class="delimiter">&quot;</span><span class="content">maxLOD</span><span class="delimiter">&quot;</span></span> : <span class="integer">18</span>,
         <span class="key"><span class="delimiter">&quot;</span><span class="content">layers</span><span class="delimiter">&quot;</span></span> : [
            {
               <span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">Imagery</span><span class="delimiter">&quot;</span></span>,
               <span class="key"><span class="delimiter">&quot;</span><span class="content">cs1</span><span class="delimiter">&quot;</span></span> : <span class="integer">4</span>,
               <span class="key"><span class="delimiter">&quot;</span><span class="content">maxLOD</span><span class="delimiter">&quot;</span></span> : <span class="integer">18</span>
            }
         ]
      },
      {
         <span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">Buildings</span><span class="delimiter">&quot;</span></span>,
         <span class="key"><span class="delimiter">&quot;</span><span class="content">tms</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">GNOSISGlobalGrid</span><span class="delimiter">&quot;</span></span>,
         <span class="key"><span class="delimiter">&quot;</span><span class="content">groupLOD</span><span class="delimiter">&quot;</span></span> : <span class="integer">0</span>,
         <span class="key"><span class="delimiter">&quot;</span><span class="content">maxLOD</span><span class="delimiter">&quot;</span></span> : <span class="integer">13</span>,
         <span class="key"><span class="delimiter">&quot;</span><span class="content">layers</span><span class="delimiter">&quot;</span></span> : [
            {
               <span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">Buildings</span><span class="delimiter">&quot;</span></span>,
               <span class="key"><span class="delimiter">&quot;</span><span class="content">cs1</span><span class="delimiter">&quot;</span></span> : <span class="integer">100</span>,
               <span class="key"><span class="delimiter">&quot;</span><span class="content">cs2</span><span class="delimiter">&quot;</span></span> : <span class="integer">1</span>,
               <span class="key"><span class="delimiter">&quot;</span><span class="content">subComponent</span><span class="delimiter">&quot;</span></span> : <span class="integer">1</span>,
               <span class="key"><span class="delimiter">&quot;</span><span class="content">maxLOD</span><span class="delimiter">&quot;</span></span> : <span class="integer">13</span>
            }
         ]
      }
   ]
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Recommendation: Consider also defining this description of the packages and LOD grouping outside of the CDB X standard so that it can be used elsewhere as well.</p>
</div>
</div>
<div class="sect2">
<h3 id="_backwards_compatibility_with_ogc_cdb_1_x"><a class="anchor" href="#_backwards_compatibility_with_ogc_cdb_1_x"></a>13.9. Backwards Compatibility with OGC CDB 1.x</h3>
<div class="paragraph">
<p>The current OGC CDB tiling scheme can be described as a Tile Matrix Set (TMS) that encodes the CDB fixed zones and the larger tile dimensions,
as seen in this <a href="https://maps.ecere.com/ogcapi/tileMatrixSets/CDBGlobalGrid">example description</a> (<a href="https://maps.ecere.com/ogcapi/tileMatrixSets/CDBGlobalGrid?f=json">JSON encoding</a>).
Using this TMS, a profile or extension of OGC CDB 1.x could be created that would support the same GeoPackage containers and level of detail groupings, while conforming to the OGC CDB 1.x conceptual model.  Using this approach could bring in some concepts of CDB X into OGC CDB 1.x and make the transition easier to a future version of OGC CDB.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
We do not recommend supporting more than one tiling scheme in a version of CDB, as this choice is foundational to how data layers are processed and stored and accessed.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_geopackage_tile_matrix_set_extension"><a class="anchor" href="#_geopackage_tile_matrix_set_extension"></a>13.10. GeoPackage Tile Matrix Set extension</h3>
<div class="paragraph">
<p>The engineering tests created in this effort made use of a proposed Tile Matrix Set extension defined and initially tested in the
<a href="https://www.ogc.org/projects/initiatives/vtp2">2019 OGC Vector Tiles Pilot Phase 2</a>, which enables support for the
<a href="https://maps.ecere.com/ogcapi/tileMatrixSets/GNOSISGlobalGrid">GNOSIS Global Grid</a>.
This extension has not yet been adopted as an official OGC GeoPackage extension, but is on the GeoPackage Standard Working Group roadmap.
The current draft is available from here: <a href="https://gitlab.com/imagemattersllc/ogc-vtp2/-/tree/master/extensions/14-tile-matrix-set.adoc">GeoPackage Two Dimensional Tile matrix Set (TMS) extension (Draft)</a>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Even though most current software do not yet support the GeoPackage TMS extension, the level 0 data
(e.g. for the BlueMarble imagery sample GeoPackages) will still work e.g. in QGIS, as the GNOSIS Global Grid does not use variable widths at level 0.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_tiled_coverage_data"><a class="anchor" href="#_tiled_coverage_data"></a>13.11. Tiled Coverage Data</h3>
<div class="paragraph">
<p>The <a href="http://docs.opengeospatial.org/is/17-066r1/17-066r1.html">GeoPackage Tiled Gridded Coverage extension</a> would be ideal for storing tiled coverage data, but it has some drawbacks that would need to be addressed.
Current limitations include:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Only single channel data is allowed in the coverage extension.  Many CDB coverages use more than one channel (Imagery, Raster Materials, etc.).  The alternative would be to store CDB X coverage data using different GeoPackage concepts, such as tiles for imagery, coverages for elevation, and related tables for raster material data.</p>
<div class="ulist">
<ul>
<li>
<p>Current change request:  <a href="http://ogc.standardstracker.org/show_request.cgi?id=662" class="bare">http://ogc.standardstracker.org/show_request.cgi?id=662</a></p>
</li>
</ul>
</div>
</li>
<li>
<p>GeoTiff data only supports using 32-bit floating point data.  In OGC CDB 1.x, GeoTiff files are used to store 8 bit unsigned and 8, 16, or 32 bit signed binary data as well.  And the proposed OGC CDB 1.2 will also adopt the use of binary 1-bit data elements as well.</p>
<div class="ulist">
<ul>
<li>
<p>Current change request:  <a href="http://ogc.standardstracker.org/show_request.cgi?id=661" class="bare">http://ogc.standardstracker.org/show_request.cgi?id=661</a></p>
</li>
</ul>
</div>
</li>
<li>
<p>An <a href="https://github.com/opengeospatial/geopackage/issues/551">issue</a> was filed asking for better clarity about whether 16-bit PNG encoding is signed or unsigned</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Multiple sample GeoPackages using TMS / GNOSISGlobalGrid are described and linked below in the results of the experiments.</p>
</div>
<div class="paragraph">
<p>The following are recommendations and suggested additional discussion topics. These recommendations and discussion topics resulted from the Tiling sub-groups discussion on an enhanced tiling model for CDB X and the potential impacts on the various data types (layers) in the current CDB standard and existing CDB data stores.</p>
</div>
<div class="sect3">
<h4 id="_elevation_minmax"><a class="anchor" href="#_elevation_minmax"></a>13.11.1. Elevation min/max</h4>
<div class="paragraph">
<p>CDB X needs to continue supporting the Min/Max Elevation component concept. In order to reduce the number of files and complexity, the recommendation is to move the minimum and maximum elevation values for the gridded elevation coverage contained in a tile to the tile metadata.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
The MinElevation and MaxElevation components are part of the MinMaxElevation dataset whose purpose is to provide a CDB conformant data store with the necessary data and structure to achieve a high level of determinism in computing line-of-sight intersections with the terrain.  The values of each component are with respect to WGS-84 reference ellipsoid.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_image_compression_jpeg"><a class="anchor" href="#_image_compression_jpeg"></a>13.11.2. Image Compression - JPEG</h4>
<div class="paragraph">
<p>Recommendation: That loss-less and lossy image compression solutions be explored for use in CDB X. Any such solutions are not viewed as a replacement for JPEG 2000 but instead as alternatives. This could be accomplished by submitting a change request for the OGC GeoPackage standard that provides guidance and requirements for support of other image formats beyond PNG and JPG. The sub-group identified a potential candidate: <a href="https://flif.info/">FLIF - Free Lossless Image Format</a>, although this format looks to be relatively slow as well.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
JPEG-2000 has very high compression, even in lossless mode, and there are multiple open-source implementations. However, performance can be extremely slow and non-optimal for all use cases.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_materials"><a class="anchor" href="#_materials"></a>13.11.3. Materials</h4>
<div class="paragraph">
<p>Recommendation: CDB X needs to support material data to provide the same functionality as CDB 1.x. To also reduce the number of files, this can be accomplished by putting all the raster material data (including material table) in a single CDB data layer in GeoPackage, perhaps using the related tables extension. The subgroup did have some discussion on what "materials" means in the CDB 1.x context. Materials in current CDB have to do with the physical substance of a feature that can then be used to simulate the emmisive or reflective properties of a feature in wavelengths of the electromagnetic spectrum other than what the human eye senses. These are for non-visualization use cases or special visualization such as IR or Radar. The subgroup did also discuss for the possible need for CDB X to provide guidance on using Physically-Based Rendering (PBR) to support the visualization/rendering use case. glTF, I3S, and 3D Tiles all support PBR.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_tiled_vector_data"><a class="anchor" href="#_tiled_vector_data"></a>13.12. Tiled Vector Data</h3>
<div class="paragraph">
<p>To tile vector data (including points referencing 3D models), draft GeoPackage extensions defined during the <em>OGC Vector Tiles pilots</em> were used:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><a href="https://gitlab.com/imagemattersllc/ogc-vtp2/-/blob/master/extensions/1-vte.adoc">GeoPackage Vector Tiles</a> The GeoPackage Tiled Vector Data extension defines the rules and requirements for encoding tiled feature data (aka "vector tiles") into a GeoPackage data store.</p>
</li>
<li>
<p><a href="https://gitlab.com/imagemattersllc/ogc-vtp2/-/blob/master/extensions/4-vtae.adoc">GeoPackage Vector Tiles Attributes Extension</a> This extension defines a relationship between features contained in a tiled layer and tiles containing those features.</p>
</li>
<li>
<p><a href="https://gitlab.com/imagemattersllc/ogc-vtp2/-/blob/master/extensions/2-mvte.adoc">MapBox Vector Tiles extension</a> The GeoPackage Mapbox Vector Tiles extension defines the rules and requirements for encoding vector tiles in a GeoPackage data store as Mapbox Vector Tiles.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>As an alternative to encoding tiled vector data as Mapbox Vector Tiles, some experiments used the
<a href="http://docs.opengeospatial.org/per/18-025.html#GMTSpecs">GNOSIS Map Tiles</a> encoding, specified by Ecere in Testbed 13 and 14.</p>
</div>
<div class="paragraph">
<p>Recommendation: Although the use of non-tiled vector data layers (e.g. storing the geometry as WKB in GeoPackage features tables) should also be supported
by CDB, the use of tiled vector data extension should be allowed. In particular, tiling vector data is essential for dealing with features spanning
a very large geospatial extent, such as coastlines (e.g. OpenStreetMap ways tagged with <a href="https://wiki.openstreetmap.org/wiki/Coastline"><code>natural=coastline</code></a>).</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Such large single features where tiling is essential was not used in experiments of the Vector data group, which focused on testing the performance
of a large number of features stored indexed, but not tiled inside GeoPackages.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>One thing that was noted is that even if the vector geometry is tiled and organized into multiple GeoPackages, it might be useful to support storing the data
attributes separately only at the top-level (level 0) tiles, or in a single GeoPackage storing only data attributes, to avoid duplication of that information
at each grouping level.</p>
</div>
</div>
<div class="sect2">
<h3 id="_tiled_3d_models"><a class="anchor" href="#_tiled_3d_models"></a>13.13. Tiled 3D Models</h3>
<div class="paragraph">
<p>Two approaches were experimented with to include 3D Models in GeoPackages, along with textures used by those models.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A) one where 3D models are individually stored in a single table, and referenced and placed by tiled vector data (points),</p>
</li>
<li>
<p>B) and another where batched 3D models are the content of the tiles.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Results of experiments for both variations are found below in the experiments description.</p>
</div>
<div class="sect3">
<h4 id="_3d_models_extension"><a class="anchor" href="#_3d_models_extension"></a>13.13.1. 3D Models Extension</h4>
<div class="paragraph">
<p>As a draft GeoPackage extension for 3D models is being defined, rows are added to the <code>gpkgext_extensions</code> table to identify all tables set up for this extension.</p>
</div>
<div class="paragraph">
<p>For all of these tables, the <code>extension_name</code> is configured to be <code>ecere_3d_models</code>, the definition to be <a href="http://github.com/ecere/gpkgext-3dmodels" class="bare">http://github.com/ecere/gpkgext-3dmodels</a>, and the <code>scope</code> to be <code>read-write</code>.</p>
</div>
<div class="paragraph">
<p>The tables registered with this extension are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>gpkgext_3d_models</code> (only used for the reference points approach A)</p>
</li>
<li>
<p>the individual tiles tables for batched 3D models (only used for approach B)</p>
</li>
<li>
<p><code>gpkgext_textures</code> for shared textures</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_a_referenced_3d_models_with_placement_information"><a class="anchor" href="#_a_referenced_3d_models_with_placement_information"></a>13.13.2. A) Referenced 3D models with placement information</h4>
<div class="paragraph">
<p>In this approach, best suited for geo-typical models, a single table per GeoPackage (<code>gpkgext_3d_models</code>) is used to define one model per row, in a blob within the <code>model</code> field.
A <code>format</code> field allows to specify the format. Both glTF and E3D have been used in the experiments.
The <code>name</code> field allows to specify a name for the model, andt the <code>lod</code> field can optionally be used to distinguish between multiple level of details for the model, or left NULL if only a single version exists. The combination of <code>name</code>, <code>lod</code> and <code>format</code> must be unique.</p>
</div>
<div class="paragraph">
<p>The <code>model::id</code> field of the attributes table for the 3D models referencing points (which would also contain the point geometry in a non-tiled approach) references the <code>id</code> (primary key) of the <code>gpkgext_3d_models</code> table.
The attributes table may also contain additional fields for scaling and orienting the models:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>model::scale</code>; or <code>model::scaleX</code>, <code>model::scaleY</code> and <code>model::scaleZ</code> for non-uniform scaling</p>
</li>
<li>
<p><code>model::yaw</code>, <code>model::pitch</code> and <code>model::roll</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>These attributes duplicate the CDB fields <code>AO1</code>, <code>SCALx</code>, <code>SCALy</code>, <code>SCALz</code> (and in a sense <code>MODL</code> as well), but are intended to be defined in a non-CDB specific manner within a generic 3D Models extension for GeoPackage.</p>
</div>
<div class="paragraph">
<p>The following SQL is used to create the <code>gpkgext_3d_models</code> table:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql"><span class="class">CREATE</span> <span class="type">TABLE</span> gpkgext_3d_models (
   id <span class="predefined-type">INTEGER</span> <span class="directive">PRIMARY</span> <span class="type">KEY</span> AUTOINCREMENT <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span>,
   name <span class="predefined-type">TEXT</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span>,
   lod <span class="predefined-type">INTEGER</span>,
   format <span class="predefined-type">TEXT</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span>,
   model <span class="predefined-type">BLOB</span>,
   <span class="type">CONSTRAINT</span> unique_models <span class="directive">UNIQUE</span>(name, lod, format));</code></pre>
</div>
</div>
<div class="paragraph">
<p>Example <code>gpkgext_3d_models</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>id  name               lod  format  model
--  -----------------  ---  ------  -----
1   coniferous_tree01       glb     glTF
2   palm_tree01             glb     glTF</code></pre>
</div>
</div>
<div class="paragraph">
<p>Sample SQL table creation for attributes table referencing the 3D models:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql"><span class="class">CREATE</span> <span class="type">TABLE</span> attributes_Trees (
   id <span class="predefined-type">INTEGER</span> <span class="directive">PRIMARY</span> <span class="type">KEY</span> AUTOINCREMENT <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span>,
   AO1 REAL, CNAM <span class="predefined-type">TEXT</span>, RTAI <span class="predefined-type">INTEGER</span>,
   SCALx REAL, SCALy REAL, SCALz REAL,
   AHGT <span class="predefined-type">TEXT</span>, BBH REAL, BBL REAL, BBW REAL, BSR REAL,
   CMIX <span class="predefined-type">INTEGER</span>, FACC <span class="predefined-type">TEXT</span>, FSC <span class="predefined-type">INTEGER</span>, HGT REAL,
   MODL <span class="predefined-type">TEXT</span>,
   <span class="string"><span class="delimiter">`</span><span class="content">model::id</span><span class="delimiter">`</span></span> <span class="predefined-type">INTEGER</span>,
   <span class="string"><span class="delimiter">`</span><span class="content">model::yaw</span><span class="delimiter">`</span></span> REAL,
   <span class="string"><span class="delimiter">`</span><span class="content">model::scale</span><span class="delimiter">`</span></span> REAL)</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_b_batched_3d_models_tiles"><a class="anchor" href="#_b_batched_3d_models_tiles"></a>13.13.3. B) Batched 3D Models tiles</h4>
<div class="paragraph">
<p>In this approach, best suited for geo-specific models, a single model covers a whole tile, batching all 3D models from the data layer found within that tile, and is stored in a tiles table much like raster or vector tiles (as a glTF blob in the <code>tile_data</code> field).
It is closer to the 3D Tiles / One World Terrain approach, and could potentially also combine both 3D Terrain and 3D Models (though ideally keeping them as distinct nodes within the model). Such an approach may facilitate transition between CDBX and OWT.</p>
</div>
<div class="paragraph">
<p>Because GeoPackage does not define a generic mechanism to specify the encoding of <code>tile_data</code> (it has previously been suggested that this would be a good field to add to the <code>gpkg_contents</code> table), the encoding of the 3D model must be deducted from the content of the blob. Fortunately, both glTF and E3D feature a header signature which facilitates this. The <code>3d-models</code> type is introduced to specify in the <code>data_type</code> column of the <code>gpkg_contents</code> table.</p>
</div>
<div class="paragraph">
<p>The translation origin of the model, as well as its orientation, is implied from the center of the tile (from the tile matrix / tile matrix set) for which it defined. The model is defined in the 3D cartesian space where (0, 0, 0) lies at that center, sitting directly on the WGS84 ellipsoid, and oriented so that by default it appears upright with its X axis pointing due East, its Z axis pointing North, and its Y axis pointing away from the center of the Earth. In other words, it would be equivalent to having a single point situated at the center of the tile in the referenced 3D points approach.</p>
</div>
<div class="paragraph">
<p>The height of the individual features (e.g. buildings) within the batched models tile models has already been adjusted match the elevation model. However, each separate feature from CDB is encoded in the model as a separate node to facilitate re-adjusting it to new elevation.</p>
</div>
</div>
<div class="sect3">
<h4 id="_textures_table"><a class="anchor" href="#_textures_table"></a>13.13.4. Textures table</h4>
<div class="paragraph">
<p>The textures table has the following fields:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>id</code>: integer primary key</p>
</li>
<li>
<p><code>name</code>: The filename used in the model to refer to the texture</p>
</li>
<li>
<p><code>width</code>: width of the texture</p>
</li>
<li>
<p><code>height</code>: height of the texture</p>
</li>
<li>
<p><code>format</code>: e.g. "png"</p>
</li>
<li>
<p><code>texture</code>: blob containing the texture data</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The combination of <code>name</code>, <code>width</code>, <code>height</code> and <code>format</code> must be unique.</p>
</div>
<div class="paragraph">
<p>The following SQL statement is used to create the table:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql"><span class="class">CREATE</span> <span class="type">TABLE</span> gpkgext_textures (
   id <span class="predefined-type">INTEGER</span> <span class="directive">PRIMARY</span> <span class="type">KEY</span> AUTOINCREMENT <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span>,
   name <span class="predefined-type">TEXT</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span>,
   width <span class="predefined-type">INTEGER</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span>,
   height <span class="predefined-type">INTEGER</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span>,
   format <span class="predefined-type">TEXT</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span>,
   texture <span class="predefined-type">BLOB</span>,
   <span class="type">CONSTRAINT</span> unique_textures <span class="directive">UNIQUE</span>(name, width, height, format));</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>id  name   width  height  format  texture
--  -----  -----  ------  ------  -------
1   1.png  512    512     png     �PNG
2   1.png  256    256     png     �PNG
3   2.png  512    512     png     �PNG
4   2.png  256    256     png     �PNG</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_ecere_geopackage_tiling_experiments"><a class="anchor" href="#_ecere_geopackage_tiling_experiments"></a>13.14. Ecere GeoPackage Tiling Experiments</h3>
<div class="sect3">
<h4 id="_overview"><a class="anchor" href="#_overview"></a>13.14.1. Overview</h4>
<div class="paragraph">
<p>Ecere conducted multiple experiments during the sprint tiling and packaging data sourced from CDB 1.x content.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The first experiment&#8217;s objective was to share an example of how to store CDB data in a GeoPackage following the GNOSIS Global Grid, using the TileMatrixSet and
vector tiles extensions, as well as describing this content using the proposed <code>cdb.json</code> schema. The Camp Pendleton sample CDB from Presagis was used
for this experiment.</p>
</li>
<li>
<p>The second experiment aimed to demonstrate how to distribute data covering a large area in multiple GeoPackages using a pre-determined LOD grouping setting.
The bigger San Diego CDB dataset provided by CAE was used for this experiment as well as the next.</p>
</li>
<li>
<p>The third experiment investigated storing 3D models inside the GeoPackages using two different approaches.
One approach is very similar to the CDB 1.x data model where all 3D models are stored in a single table and referenced from points stored in tiled vector data.
In the other approach, 3D models are batched per tile and stored in the <code>tile_data</code> blob of GeoPackage tiles table. The local origin of the 3D model corresponds
to the center of the tile in which it is stored, assuming a coordinate system whose axes are aligned with East, North and Up.
This approach is more similar to the one used for 3D Tiles and One World Terrain.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>These were originally described as separate experiments on the <a href="https://github.com/sofwerx/cdb2-concept/wiki">CDB X concept wiki</a>, but here the combined final results of producing a prototype
CDB X for the full San Diego CDB are presented. These results cover tiling the imagery, elevation, vector data and 3D models for the full San Diego CDB.</p>
</div>
<div id="img_gpkgexport" class="imageblock text-center">
<div class="content">
<img src="images/Ecere-GeoPackageCDBXExport.png" alt="Ecere GeoPackageCDBXExport" width="800">
</div>
<div class="title">Figure Mtd_Ph3 - 19. Ecere GeoPackage / CDB X Export dialog and options in Ecere’s GNOSIS Cartographer</div>
</div>
<div id="img_gpkgexport2" class="imageblock text-center">
<div class="content">
<img src="images/Ecere-GeoPackageCDBXExport2.png" alt="Ecere GeoPackageCDBXExport2" width="800">
</div>
<div class="title">Figure Mtd_Ph3 - 20. Ecere GeoPackage / CDB X Export dialog and options close up</div>
</div>
</div>
<div class="sect3">
<h4 id="_data_results"><a class="anchor" href="#_data_results"></a>13.14.2. Data results</h4>
<div class="sect4">
<h5 id="_single_geopackage"><a class="anchor" href="#_single_geopackage"></a>Single GeoPackage</h5>
<div class="paragraph">
<p>This one GeoPackage contains the whole San Diego CDB data (not including Blue Marble):</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
In the texture table for this GeoPackage, the texture names are prefixed by an extra directory to differentiate the numbered textures used in the
different 3D models data layers, however the reference from the 3D models was not yet updated to reflect this.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><a href="https://portal.ogc.org/files/?artifact_id=95378">Complete San Diego CDB X - <em>cdb.json</em> index</a></p>
</div>
<div class="paragraph">
<p><strong>FIXME awaiting portal link:</strong> <a href="ftp://cdb-x-2020@ftp.ogc.org/Ecere/SanDiego.gpkg.7z">Complete San Diego CDB X - GeoPackage</a> (12.8 GiB, 9.8 GiB compressed)</p>
</div>
<div class="paragraph">
<p><strong>FIXME awaiting portal link:</strong> <a href="ftp://cdb-x-2020@ftp.ogc.org/Ecere/SanDiego.gpkg">Complete San Diego CDB X - GeoPackage using GNOSIS Map Tiles and E3D Models</a> (10.3 GiB uncompressed)</p>
</div>
</div>
<div class="sect4">
<h5 id="_data_layers_packaged_together_tiles_grouped_in_multiple_geopackages"><a class="anchor" href="#_data_layers_packaged_together_tiles_grouped_in_multiple_geopackages"></a>Data layers packaged together (tiles grouped in multiple GeoPackages)</h5>
<div class="paragraph">
<p>This series of GeoPackages (also covering the whole San Diego CDB) groups tiles of 5 LODs for all data layers within the same GeoPackage.
In this approach, the textures are stored in a separate folder to avoid repeating them in each separate GeoPackage.</p>
</div>
<div class="paragraph">
<p><a href="https://portal.ogc.org/files/?artifact_id=95366"><em>cdb.json</em> index</a></p>
</div>
<div class="paragraph">
<p><strong>FIXME awaiting portal link:</strong> <a href="ftp://cdb-x-2020@ftp.ogc.org/Ecere/SanDiego.7z">One package using an LOD grouping of 5</a> (14.6 GiB, 9.9 GiB compressed)</p>
</div>
<div class="paragraph">
<p><a href="https://portal.ogc.org/files/?artifact_id=95370">Partial dataset (subset of the overall extent) using an LOD grouping of 5</a> (1.4 GiB, 217.5 MiB compressed)</p>
</div>
</div>
<div class="sect4">
<h5 id="_as_separate_layers"><a class="anchor" href="#_as_separate_layers"></a>As separate layers</h5>
<div class="paragraph">
<p>A series of GeoPackages (11.2 GB compressed) of the San Diego CDB, plus a full resolution global coverage (for one particular month) of the NASA Visible Earth Blue Marble,
along with an accompanying <code>cdb.json</code> can be found at:</p>
</div>
<div class="paragraph">
<p><a href="https://portal.ogc.org/index.php?m=projects&amp;a=view&amp;project_id=466&amp;tab=2&amp;artifact_id=95320">OGC portal folder</a></p>
</div>
<div class="paragraph">
<p><a href="https://portal.ogc.org/files/?artifact_id=95345">Top-level <em>cdb.json</em> index</a></p>
</div>
<div class="paragraph">
<p>The individual layers, as well as alternate encodings of some of them and are listed below:</p>
</div>
<div class="sect5">
<h6 id="_elevation"><a class="anchor" href="#_elevation"></a>Elevation</h6>
<div class="paragraph">
<p><a href="https://portal.ogc.org/files/?artifact_id=95352">Elevation (using 16-bit integer PNG encoding)</a> (483 MiB, 472 MiB compressed)</p>
</div>
<div class="paragraph">
<p><a href="https://portal.ogc.org/files/?artifact_id=95328">Elevation (using 16-bit integer Paeth/LZMA GMT encoding)</a> (370.8 MiB, 365.2 MiB compressed)</p>
</div>
<div class="paragraph">
<p><strong>FIXME awaiting portal link:</strong> <a href="ftp://cdb-x-2020@ftp.ogc.org/Ecere/ElevationTIF.7z">Elevation (using 32-bit float GeoTIFF encoding)</a> (1.4 GiB, 1.3 GiB compressed)</p>
</div>
</div>
<div class="sect5">
<h6 id="_imagery"><a class="anchor" href="#_imagery"></a>Imagery</h6>
<div class="paragraph">
<p><strong><em>Encoded as JPG</em>:</strong></p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
The imagery in these GeoPackages is lossy. Recommendation: allow the use of JPEG-2000 and/or additional lossless formats more compact than PNG in GeoPackages.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><strong>FIXME awaiting portal link:</strong> <a href="ftp://cdb-x-2020@ftp.ogc.org/Ecere/BlueMarble.7z">Full resolution global coverage (for one particular month) of the NASA Visible Earth Blue Marble</a> (1.6 GiB, 1.4 GiB compressed)</p>
</div>
<div class="paragraph">
<p><strong>FIXME awaiting portal link:</strong> <a href="ftp://cdb-x-2020@ftp.ogc.org/Ecere/ImageryMedium.7z">Medium resolution imagery</a> (4.9 GiB, 4.7 GiB compressed)</p>
</div>
<div class="paragraph">
<p><strong>FIXME awaiting portal link:</strong> <a href="ftp://cdb-x-2020@ftp.ogc.org/Ecere/ImageryHigh.7z">High resolution imagery</a> (4.5 GiB, 4.3 GiB compressed)</p>
</div>
</div>
<div class="sect5">
<h6 id="_vector_data_2"><a class="anchor" href="#_vector_data_2"></a>Vector data</h6>
<div class="paragraph">
<p><strong><em>Tiled and encoded as Mapbox Vector Tiles:</em></strong></p>
</div>
<div class="paragraph">
<p><a href="https://portal.ogc.org/files/?artifact_id=95348">Hydrography</a> (424 KiB)</p>
</div>
<div class="paragraph">
<p><a href="https://portal.ogc.org/files/?artifact_id=95350">Roads</a> (69.1 MiB, 17.6 MiB compressed)</p>
</div>
<div class="paragraph">
<p><a href="https://portal.ogc.org/files/?artifact_id=95346">Airport Lights</a> (144 KiB)</p>
</div>
<div class="paragraph">
<p><strong><em>Tiled and encoded as GNOSIS Map Tiles:</em></strong></p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
The latest specifications for the GNOSIS Map Tiles encoding is available in the <a href="http://docs.opengeospatial.org/per/18-025.html#GMTSpecs">Annex B</a> of the <em>CityGML and Augmented Reality</em> Engineering Report.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><a href="https://portal.ogc.org/files/?artifact_id=95330">Hydrography</a> (248 KiB)</p>
</div>
<div class="paragraph">
<p><a href="https://portal.ogc.org/files/?artifact_id=95331">Roads</a> (38 MiB, 23.4 MiB compressed)</p>
</div>
<div class="paragraph">
<p><a href="https://portal.ogc.org/files/?artifact_id=95329">Airport Lights</a> (148 KiB)</p>
</div>
</div>
<div class="sect5">
<h6 id="_3d_models_2"><a class="anchor" href="#_3d_models_2"></a>3D Models</h6>
<div class="paragraph">
<p><strong><em>Single GeoPackages using Mapbox Vector Tiles for reference points, and models encoded as binary glTF:</em></strong></p>
</div>
<div class="paragraph">
<p><a href="https://portal.ogc.org/files/?artifact_id=95351">Buildings</a> (2.9 GiB, 321.3 MiB compressed)</p>
</div>
<div class="paragraph">
<p><a href="https://portal.ogc.org/files/?artifact_id=95349">Trees</a> (2 MiB)</p>
</div>
<div class="paragraph">
<p><a href="https://portal.ogc.org/files/?artifact_id=95347">Coronado Bridge</a> (272 KiB)</p>
</div>
<div class="paragraph">
<p><strong><em>Single GeoPackages using GNOSIS Map Tiles for reference points, and models encoded as E3D:</em></strong></p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
The latest specifications for the <em>E3D</em> 3D Model and <em>GNOSIS Map Tiles</em> encodings are available in the <a href="http://docs.opengeospatial.org/per/18-025.html"><em>CityGML and Augmented Reality</em> Engineering Report</a>,
(<a href="http://docs.opengeospatial.org/per/18-025.html#E3DSpecs">Appendix A</a> and <a href="http://docs.opengeospatial.org/per/18-025.html#GMTSpecs">Appendix B</a>, respectively).
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
The unconmpressed GeoPackages are more compact because the E3D models feature internal LZMA compression.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><a href="https://portal.ogc.org/files/?artifact_id=95340">Buildings (GNOSIS Map Tiles / E3D)</a> (560.8 MiB, 332.8 MiB compressed)</p>
</div>
<div class="paragraph">
<p><a href="https://portal.ogc.org/files/?artifact_id=95339">Trees (GNOSIS Map Tiles / E3D)</a> (1.8 MiB)</p>
</div>
<div class="paragraph">
<p><a href="https://portal.ogc.org/files/?artifact_id=95338">Coronado Bridge (GNOSIS Map Tiles / E3D)</a> (196 KiB)</p>
</div>
<div class="paragraph">
<p><strong><em>Multiple GeoPackages using various LOD grouping, Mapbox Vector Tiles for reference points, and models encoded as binary glTF:</em></strong></p>
</div>
<div class="paragraph">
<p><a href="https://portal.ogc.org/files/?artifact_id=95344">Buildings grouped by 4 LODs</a> (4.1 GiB, 446.6 MiB compressed)</p>
</div>
<div class="paragraph">
<p><a href="https://portal.ogc.org/files/?artifact_id=95343">Buildings grouped by 5 LODs</a> (3.7 GiB, 409.2 MiB compressed)</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
The larger size for grouping by 4 and 5 LODs is mainly a result of lower resolution models being duplicated in higher level grouping GeoPackages.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><a href="https://portal.ogc.org/files/?artifact_id=95342">Buildings grouped by 7 LODs</a> (2.9 GiB, 321.3 MiB compressed)</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Except for the directory / file naming, the 7 LODs buildings are equivalent to 6 LODs since there are only 6 LODs of buildings in the dataset.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><a href="https://portal.ogc.org/files/?artifact_id=95341">Trees grouped by 6 LODs</a> (2.9 MiB, 1.2 MiB compressed)</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Except for the directory / file naming, the 6 LODs trees are equivalent to any other LOD groupings, since there is only 1 LOD of trees in the dataset.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><strong><em>Single GeoPackages batching 3D models for each tile as binary glTF:</em></strong></p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
The model is encoded in the <code>tile_data</code> field of the tiles table. This approach is best suited for geo-specific models, and can be used directly as the glTF payload of a <code>.b3dm</code> 3D Tile (with proper transformation matrix in JSON tileset).
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><a href="https://portal.ogc.org/files/?artifact_id=95337">Buildings (glTF / batched 3D models tiles)</a> (3.9 GiB, 512.4 MiB compressed)</p>
</div>
<div class="paragraph">
<p><a href="https://portal.ogc.org/files/?artifact_id=95335">Trees (glTF / batched 3D models tiles)</a> (91 MiB, 2.3 MiB compressed)</p>
</div>
<div class="paragraph">
<p><a href="https://portal.ogc.org/files/?artifact_id=95336">Coronado Bridge (glTF / batched 3D models tiles)</a> (576 KiB)</p>
</div>
<div class="paragraph">
<p><strong><em>Single GeoPackages batching 3D models for each tile as E3D:</em></strong></p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
The model is encoded in the <code>tile_data</code> field of the tiles table. This approach is best suited for geo-specific models. The unconmpressed GeoPackages are more compact because the E3D models feature internal LZMA compression.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><a href="https://portal.ogc.org/files/?artifact_id=95334">Buildings (E3D / batched 3D models tiles)</a> (417.3 MiB, 339.8 MiB compressed)</p>
</div>
<div class="paragraph">
<p><a href="https://portal.ogc.org/files/?artifact_id=95333">Trees (E3D / batched 3D models tiles)</a> (3.3 MiB)</p>
</div>
<div class="paragraph">
<p><a href="https://portal.ogc.org/files/?artifact_id=95332">Coronado Bridge (E3D / batched 3D models tiles)</a> (256 KiB)</p>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_ogc_api_access_demo"><a class="anchor" href="#_ogc_api_access_demo"></a>13.14.3. OGC API access demo</h4>
<div class="paragraph">
<p>At this address: <a href="https://maps.ecere.com/ogcapi/collections/SanDiegoCDB" class="bare">https://maps.ecere.com/ogcapi/collections/SanDiegoCDB</a></p>
</div>
<div class="paragraph">
<p>the San Diego CDB data from the GNOSIS data store can be accessed directly through the GNOSIS Map Server, including rendering maps, downloading coverages,
accessing as tiles in different tiling schemes, accessing individual vector features, retrieving them as (re-merged) GeoJSON, visualizing them on GeoJSON.io,
accessing as 3D Tiles tilesets or individual tiles, also supporting retrieving batched 3D tiles as binary glTF.
and so on. These delivery capabilities demonstrate that tiled data actually supports a wide range of use cases.
More details about accessing this data via the OGC API can be found in the Engineering Report for the OGC Interactive Simulation and Gaming Sprint.</p>
</div>
<div class="paragraph">
<p>At this address: <a href="https://maps.ecere.com/ogcapi/collections/SanDiegoLayers" class="bare">https://maps.ecere.com/ogcapi/collections/SanDiegoLayers</a></p>
</div>
<div class="paragraph">
<p>the prototype CDB X split GeoPackages can be accessed directly .
However at this point, the map server and visualization client do not present this as a unified data source, so instead the tiles structure and individual GeoPackages are individually accessible.</p>
</div>
</div>
<div class="sect3">
<h4 id="_visualization"><a class="anchor" href="#_visualization"></a>13.14.4. Visualization</h4>
<div class="paragraph">
<p>Ecere&#8217;s GNOSIS 3D visualization tools can currently visualize the individual CDB X/GeoPackage elevation and imagery directly.
Like for the server however the split geopackages are not yet unified as a single data source.
Accessing and visualizing the 3D models from the GeoPackage tables remains to be implemented.</p>
</div>
<div id="img_campPendleton" class="imageblock text-center">
<div class="content">
<img src="images/ecere-cdbx-1.png" alt="ecere cdbx 1" width="800">
</div>
<div class="title">Figure Mtd_Ph3 - 21. Visualizing Camp Pendleton CDB X/GeoPackage in Ecere&#8217;s GNOSIS Cartographer.</div>
</div>
<hr>
<div class="paragraph">
<p>The following screenshots are visualization of the intermediate GNOSIS data store used to generate the CDB X using the same tiling scheme.
Part of this effort was accomplished during the <a href="https://www.ogc.org/projects/initiatives/isg-sprint">OGC Interoperable Simulation and Gaming Sprint</a>.
A <a href="https://www.youtube.com/watch?v=gyaQjqy0N8g">video</a> was also published.</p>
</div>
<div class="paragraph">
<p>In addition to the San Diego CDB dataset, worldwide elevation data from <a href="http://viewfinderpanoramas.org/">Viewfinder Panoramas</a> by Jonathan de Ferranti and imagery from NASA Visible Earth’s <a href="https://earthobservatory.nasa.gov/features/BlueMarble">Blue Marble</a> are used outside of the extent covered by the San Diego dataset.</p>
</div>
<div id="img_sd1" class="imageblock text-center">
<div class="content">
<img src="https://github.com/opengeospatial/OGC-ISG-Sprint-Sep-2020/raw/master/Sprint%20Report/images/Ecere/SanDiego1.jpg" alt="SanDiego1" width="800">
</div>
<div class="title">Figure Mtd_Ph3 - 22. San Diego CDB data visualized in Ecere’s GNOSIS Cartographer (cape)</div>
</div>
<div id="img_sd2" class="imageblock text-center">
<div class="content">
<img src="https://github.com/opengeospatial/OGC-ISG-Sprint-Sep-2020/raw/master/Sprint%20Report/images/Ecere/SanDiego2.jpg" alt="SanDiego2" width="800">
</div>
<div class="title">Figure Mtd_Ph3 - 23. San Diego CDB data visualized in Ecere’s GNOSIS Cartographer (hotels and palm trees)</div>
</div>
<div id="img_sd4" class="imageblock text-center">
<div class="content">
<img src="https://github.com/opengeospatial/OGC-ISG-Sprint-Sep-2020/raw/master/Sprint%20Report/images/Ecere/SanDiego4.jpg" alt="SanDiego4" width="800">
</div>
<div class="title">Figure Mtd_Ph3 - 24. San Diego CDB data visualized in Ecere’s GNOSIS Cartographer (skyscrapers)</div>
</div>
<div id="img_sd5" class="imageblock text-center">
<div class="content">
<img src="https://github.com/opengeospatial/OGC-ISG-Sprint-Sep-2020/raw/master/Sprint%20Report/images/Ecere/SanDiego5.jpg" alt="SanDiego5" width="800">
</div>
<div class="title">Figure Mtd_Ph3 - 25. San Diego CDB data visualized in Ecere’s GNOSIS Cartographer (Coronado bridge)</div>
</div>
<div id="img_sd11" class="imageblock text-center">
<div class="content">
<img src="https://github.com/opengeospatial/OGC-ISG-Sprint-Sep-2020/raw/master/Sprint%20Report/images/Ecere/SanDiego11.jpg" alt="SanDiego11" width="800">
</div>
<div class="title">Figure Mtd_Ph3 - 26. San Diego CDB data visualized in Ecere’s GNOSIS Cartographer (airstrip)</div>
</div>
<div id="img_sd15" class="imageblock text-center">
<div class="content">
<img src="https://github.com/opengeospatial/OGC-ISG-Sprint-Sep-2020/raw/master/Sprint%20Report/images/Ecere/SanDiego15.jpg" alt="SanDiego15" width="800">
</div>
<div class="title">Figure Mtd_Ph3 - 27. San Diego CDB data visualized in Ecere’s GNOSIS Cartographer (high above, showing 3D globe)</div>
</div>
<div class="paragraph">
<p>This last image features ESA Gaia’s Sky in colour (Gaia Data Processing and Analysis Consortium (DPAC); A. Moitinho / A. F. Silva / M. Barros / C. Barata, University of Lisbon, Portugal; H. Savietto, Fork Research, Portugal.) CC BY SA 3.0.</p>
</div>
</div>
<div class="sect3">
<h4 id="_cesium_js_3d_tiles_demo"><a class="anchor" href="#_cesium_js_3d_tiles_demo"></a>13.14.5. Cesium JS / 3D Tiles demo</h4>
<div id="img_sdCesium1" class="imageblock text-center">
<div class="content">
<img src="http://ecere.com/tmp/SanDiegoCesium.png" alt="SanDiegoCesium" width="800">
</div>
<div class="title">Figure Mtd_Ph3 - 28. San Diego CDB (before implementing support for textures in generated 3D Tiles)</div>
</div>
<div id="img_CesiumJS3DTiles" class="imageblock text-center">
<div class="content">
<img src="https://github.com/opengeospatial/OGC-ISG-Sprint-Sep-2020/raw/master/Sprint%20Report/images/Ecere/CesiumSanDiego3.jpg" alt="CesiumSanDiego3" width="800">
</div>
<div class="title">Figure Mtd_Ph3 - 29. CesiumJS Client accessing San Diego CDB data as 3D Tiles from Ecere’s GNOSIS Map Server (Petco Park)</div>
</div>
<div class="paragraph">
<p>The following JavaScript code, which can simply be copied to the <a href="https://sandcastle.cesium.com/">Cesium Sand Castle</a>, can be used to visualize the data as 3D Tiles, including textures. It sets up the buildings, trees as well as the Coronado Bridge, together with the Cesium world terrain. One limitation is that the generated tileset is still missing multiple level of details, therefore visualizing a large area will be quite slow.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="js"><span class="keyword">var</span> worldTerrain = Cesium.createWorldTerrain({ <span class="key">requestWaterMask</span>: <span class="predefined-constant">true</span>, <span class="key">requestVertexNormals</span>: <span class="predefined-constant">true</span> });
<span class="keyword">var</span> viewer = <span class="keyword">new</span> Cesium.Viewer(<span class="string"><span class="delimiter">&quot;</span><span class="content">cesiumContainer</span><span class="delimiter">&quot;</span></span>, { <span class="key">terrainProvider</span>: worldTerrain });
<span class="keyword">var</span> scene = viewer.scene;
<span class="keyword">var</span> trees = scene.primitives.add(<span class="keyword">new</span> Cesium.Cesium3DTileset(
   { <span class="key">url</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">https://maps.ecere.com/ogcapi/collections/SanDiegoCDB:Trees/3DTiles/tileset.json</span><span class="delimiter">&quot;</span></span> }));
<span class="keyword">var</span> bridge = scene.primitives.add(<span class="keyword">new</span> Cesium.Cesium3DTileset(
   { <span class="key">url</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">https://maps.ecere.com/ogcapi/collections/SanDiegoCDB:CoronadoBridge/3DTiles/tileset.json</span><span class="delimiter">&quot;</span></span> }));
<span class="keyword">var</span> buildings = scene.primitives.add(<span class="keyword">new</span> Cesium.Cesium3DTileset(
   { <span class="key">url</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">https://maps.ecere.com/ogcapi/collections/SanDiegoCDB:Buildings/3DTiles/tileset.json</span><span class="delimiter">&quot;</span></span> }));</code></pre>
</div>
</div>
<div class="paragraph">
<p>This 3D Tiles distribution is currently being generated from the GNOSIS Data Store / E3D models. Support to stream as 3D Tiles straight from CDBX GeoPackages should also be achievable.</p>
</div>
</div>
<div class="sect3">
<h4 id="_future_work"><a class="anchor" href="#_future_work"></a>13.14.6. Future work</h4>
<div class="ulist">
<ul>
<li>
<p>Support for visualizing 3D models directly from the CDB X/GeoPackages dataset in GNOSIS Cartographer client</p>
</li>
<li>
<p>Support for GNOSIS Map Server streaming 3D models directly from CDB X/GeoPackage</p>
</li>
<li>
<p>Support for unifying split GeoPackages making up the CDB X dataset as a single data source</p>
</li>
<li>
<p>Attribution per model within the single tile model. This is supported directly in E3D for triangular face-level attribution (it was clarified that glTF2 does not supports this, and extensions were considering vertex rather than face attributions).</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_flightsafety_geopackage_tiling_experiments"><a class="anchor" href="#_flightsafety_geopackage_tiling_experiments"></a>13.15. FlightSafety GeoPackage Tiling Experiments</h3>
<div class="paragraph">
<p><strong>Setup</strong>: The data used for these experiments are primarily freely available, and include the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Blue Marble (NASA) that was georeferenced using GDAL - <a href="https://visibleearth.nasa.gov/collection/1484/blue-marble" class="bare">https://visibleearth.nasa.gov/collection/1484/blue-marble</a></p>
</li>
<li>
<p>The high resolution inset is from USGS downloads of Central Park in New York City</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Tiling Scheme</strong>: The tiling scheme uses the <a href="https://maps.ecere.com/ogcapi/tileMatrixSets/GNOSISGlobalGrid">GNOSIS Global Grid</a> (using TMS extension&#8201;&#8212;&#8201;<a href="https://gitlab.com/imagemattersllc/ogc-vtp2/-/blob/master/extensions/14-tile-matrix-set.adoc" class="bare">https://gitlab.com/imagemattersllc/ogc-vtp2/-/blob/master/extensions/14-tile-matrix-set.adoc</a>).  We are using the same type of json file that Ecere is using in their experiment.</p>
</div>
<div class="paragraph">
<p><strong>LOD Grouping</strong> The grouping is pre-set per experiment.  The groups are calculated from the highest LOD, back to coarser LODs.  For example, if there are 7 LODs (0-6) and a grouping of 4, then LODs 3 through 7 are in one GeoPackage, and LODs 0 through 2 are in another GeoPackage.</p>
</div>
<div class="paragraph">
<p><strong>Directory and Naming Scheme</strong> Each top level tile is within a directory that encodes the LOD, the row (rows are counted from the top, so north to south), and the column (longitude west to east).  Fox example, "L0_R1_C2".  Each tile directory contains one GeoPackage file (for example "Imagery_L0_L2_R1_C2.gpkg") and all the tile directories that refine this area (such as "L3_R9_C22").  There were two intentions to this directory structure:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Limit the number of files in a directory (to keep from running into OS limitations).</p>
</li>
<li>
<p>Make it a bit easier to export a portion of the world by hand from one CDB X to another.</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="_flightsafety_experiment_1"><a class="anchor" href="#_flightsafety_experiment_1"></a>13.15.1. FlightSafety Experiment 1</h4>
<div class="sect4">
<h5 id="_purpose_of_experiment"><a class="anchor" href="#_purpose_of_experiment"></a>Purpose of Experiment</h5>
<div class="paragraph">
<p>This experiment was designed to:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Show how the top levels of the tiling scheme work,</p>
</li>
<li>
<p>Show the LOD groupings within multiple GeoPackage files, and</p>
</li>
<li>
<p>Show the proposed directory and file naming.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>There were eight top level tiles (2 rows and 4 columns) and all GeoPackages that refine one of these tiles are under that tile&#8217;s directory structure.</p>
</div>
</div>
<div class="sect4">
<h5 id="_processing"><a class="anchor" href="#_processing"></a>Processing</h5>
<div class="paragraph">
<p>This experiment uses the NASA Blue Marble imagery to approximate world-wide imagery at a high level.  This provides seven levels of detail of data (L0 to L6).  Normally, the GeoPackage files should be larger for efficient use. However to demonstrate the LOD groupings, only four LODs were grouped together.  So that tools can view the imagery more easily, the imagery is stored as JPEGs.  Originally the thought was to create Jpeg2000 files but checking the results in a tool such as "DB Browser for SQLite" was harder.  The content volume for the data used this experiment was around 300 MB.</p>
</div>
</div>
<div class="sect4">
<h5 id="_data_location"><a class="anchor" href="#_data_location"></a>Data Location</h5>
<div class="paragraph">
<p>Compressed 7-zip file with test data can be found at:  <a href="https://portal.ogc.org/files/?artifact_id=95358" class="bare">https://portal.ogc.org/files/?artifact_id=95358</a></p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_flightsafety_experiment_2"><a class="anchor" href="#_flightsafety_experiment_2"></a>13.15.2. FlightSafety Experiment 2</h4>
<div class="sect4">
<h5 id="_purpose_of_experiment_2"><a class="anchor" href="#_purpose_of_experiment_2"></a>Purpose of Experiment</h5>
<div class="paragraph">
<p>This experiment was designed to further test the limits of the LOD grouping and directory organization.  This experiment is similar to the World CDB X Experiment 1 but with a small higher resolution inset of imagery.  Images added were 15m data at LOD level 12 covering New York City and 2 ft imagery covering Central Park on Manhattan Island at LOD level 16.</p>
</div>
</div>
<div class="sect4">
<h5 id="_processing_2"><a class="anchor" href="#_processing_2"></a>Processing</h5>
<div class="paragraph">
<p>The same processing was used as in  Experiment 1 but with an LOD grouping of 6. During the sub-groups planning for this experiment, the hyposthesis was that was an ideal balancing size and number of sub-directories ( (2<sup>6)</sup>2 = 4096 maximum directories within one folder.  The maximum LOD for this experiment was 16 (60cm).  To find the highest resolution data, look at file CDBX_highres\Imagery\L0_R0_C1\L5_R17_C37\L11_R1120_C2412\Imagery_L11_L16_R1120_C2412.gpkg.  The data size for this experiment was almost 1.5 GB.</p>
</div>
</div>
<div class="sect4">
<h5 id="_data_location_2"><a class="anchor" href="#_data_location_2"></a>Data Location</h5>
<div class="paragraph">
<p>The full compressed file had to be split into two pieces as a multi-part zip file, to enable saving on the OGC portal.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://portal.ogc.org/files/?artifact_id=95361" class="bare">https://portal.ogc.org/files/?artifact_id=95361</a></p>
</li>
<li>
<p><a href="https://portal.ogc.org/files/?artifact_id=95371" class="bare">https://portal.ogc.org/files/?artifact_id=95371</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_observations_from_experiments_1_and_2"><a class="anchor" href="#_observations_from_experiments_1_and_2"></a>13.15.3. Observations from Experiments 1 and 2</h4>
<div class="ulist">
<ul>
<li>
<p>The file names and directory names are pretty hard to read and understand by looking at the files. However, since the tiles are rarely on a "geocell" boundary, a good naming scheme may not exist.</p>
</li>
<li>
<p>Creating the LOD groupings based on the highest LOD of data makes it difficult to add data of a higher resolution later on.  This might also make it harder to create "Versions" of the data that have been updated.</p>
</li>
<li>
<p>There were a considerable number of directories created with this tiling and naming scheme.  In general, there is a 1-to-1 ratio of files to directories.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_flightsafety_experiments_3_and_4"><a class="anchor" href="#_flightsafety_experiments_3_and_4"></a>13.15.4. FlightSafety Experiments 3 and 4</h4>
<div class="sect4">
<h5 id="_purpose_of_experiment_3"><a class="anchor" href="#_purpose_of_experiment_3"></a>Purpose of Experiment</h5>
<div class="paragraph">
<p>These experiments utilized two different tiled layers: Imagery and Elevation.  The constraints for this experiment were :</p>
</div>
<div class="ulist">
<ul>
<li>
<p>There are two different tiled layers: Imagery and Elevation.</p>
</li>
<li>
<p>The data coverage was world-wide, containing 1000m resolution imagery and elevation.</p>
</li>
<li>
<p>The directory structure was reworked to reduce the number of directories produced so that it was no longer a 1-to-1 file to directory ratio.  To copy over a section of the world, one would need to copy both the GeoPackage and the directory with similar names</p>
</li>
<li>
<p>The GeoPackage files were renamed to be <strong>lod_row_col_endlod</strong>.gpkg, to keep the lod/row/column triplet together.  For example, Imagery_L4_R9_C6_L6.gpkg</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_updated_directory_structure"><a class="anchor" href="#_updated_directory_structure"></a>Updated Directory Structure</h5>
<div class="paragraph">
<p>The directory structure was changed from having each GeoPackage within a directory of the same name (yielding a 1:1 ratio of files to directories) to having a finer resolution GeoPackage in a directory with the coarser tile name.  If there is even finer/higher resolution data beyond this GeoPackage, that data will be found in a directory at the same level as the GeoPackage with the tile name that matches most of the GeoPackage filename (except for the end lod value).  Pictures of the structure below:</p>
</div>
<div id="img_topTilesNew" class="imageblock text-center">
<div class="content">
<img src="images/topTilesNew.JPG" alt="topTilesNew" width="400">
</div>
<div class="title">Figure Mtd_Ph3 - 30. Top GeoPackage Level.</div>
</div>
<div id="img_level0New" class="imageblock text-center">
<div class="content">
<img src="images/level0New.JPG" alt="level0New" width="400">
</div>
<div class="title">Figure Mtd_Ph3 - 31. Mid-level directory structure.</div>
</div>
<div id="img_level4New" class="imageblock text-center">
<div class="content">
<img src="images/level4New.JPG" alt="level4New" width="400">
</div>
<div class="title">Figure Mtd_Ph3 - 32. Leaf directory structure.</div>
</div>
</div>
<div class="sect4">
<h5 id="_processing_3"><a class="anchor" href="#_processing_3"></a>Processing</h5>
<div class="paragraph">
<p>This experiment uses the NASA Blue Marble imagery as world-wide imagery and USGS GTOPO30 elevation data.  This provides 7 levels of detail of data (L0 to L6).  Normally, the GeoPackage files should be larger for efficient use, but to show the LOD groupings, only 3 LODs are grouped together.  The imagery is stored as Jpeg, so that SQLite tools can view the imagery easier, and the elevation is stored as 32-bit floating point GeoTiff files.  The uncompressed data size for this experiment is around 3.05 GB.</p>
</div>
<div class="paragraph">
<p>For Experiment 3, the imagery and elevation layers were built into different GeoPackages and different directory structures.  For Experiment 4, the imagery and elevation were combined into a single set of GeoPackages and directories while keeping the LOD grouping.</p>
</div>
</div>
<div class="sect4">
<h5 id="_data_location_3"><a class="anchor" href="#_data_location_3"></a>Data Location</h5>
<div class="paragraph">
<p>The full compressed files had to be split into multiple pieces as a multi-part zip file, to enable saving on the OGC portal.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Experiment 3 compressed zip files containing both data layers as separate GeoPackage layers in the CDB X tiling output:</p>
<div class="ulist">
<ul>
<li>
<p><a href="https://portal.ogc.org/files/?artifact_id=95374" class="bare">https://portal.ogc.org/files/?artifact_id=95374</a></p>
</li>
<li>
<p><a href="https://portal.ogc.org/files/?artifact_id=95375" class="bare">https://portal.ogc.org/files/?artifact_id=95375</a></p>
</li>
<li>
<p><a href="https://portal.ogc.org/files/?artifact_id=95376" class="bare">https://portal.ogc.org/files/?artifact_id=95376</a></p>
</li>
</ul>
</div>
</li>
<li>
<p>Experiment 4 compressed zip files containing both data layers in a merged GeoPackage layer in the CDB X tiling output</p>
<div class="ulist">
<ul>
<li>
<p><a href="https://portal.ogc.org/files/?artifact_id=95379" class="bare">https://portal.ogc.org/files/?artifact_id=95379</a></p>
</li>
<li>
<p><a href="https://portal.ogc.org/files/?artifact_id=95380" class="bare">https://portal.ogc.org/files/?artifact_id=95380</a></p>
</li>
<li>
<p><a href="https://portal.ogc.org/files/?artifact_id=95381" class="bare">https://portal.ogc.org/files/?artifact_id=95381</a></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_observations_for_experiments_3_and_4"><a class="anchor" href="#_observations_for_experiments_3_and_4"></a>13.15.5. Observations for Experiments 3 and 4</h4>
<div class="ulist">
<ul>
<li>
<p>The file names and directory names are pretty hard to read and understand by looking at the files. However since the tiles are rarely on a "geocell" boundary, their might not be a good naming scheme.</p>
</li>
<li>
<p>Creating the LOD groupings based on the highest LOD of data makes it difficult to add data of a higher resolution later on.  This might also make it harder to create "Versions" of the data that have been updated.</p>
</li>
<li>
<p>There are a lot of directories created with this tiling and naming scheme.  In general, there is a 1-to-1 ratio of files to directories, and directories seem to be more work for an OS to create/modify/delete.</p>
</li>
<li>
<p>Official GeoPackage standards are pretty rigid for raster data.  Tiles support a very limited set of raster types (PNG or JPG), and the coverage extension supports only 16-bit PNG or 32-bit float GeoTiff.  Current OGC CDB 1.1 supports data types of 8-bit unsigned, 8/16/32 bit signed, and 32-bit floating point data types, with CDB 1.2 adding the capability to support Tiff bilevel images (1-bit).</p>
</li>
<li>
<p>Do we need the extra flexibility of putting different layers in different directory structures (and thus different GeoPackage files)?</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For the GeoPackage CDB Interoperabilty Experiment, FlightSafety strictly tested existing Shapefile performance vs GeoPackage performance from a flight simulation runtime perspective.  So how fast can we pull data out of a GeoPackage in the same manner that we process shapefiles.  GeoPackage creation timing wasn&#8217;t that interesting to us at the time.  We were also testing the different approaches put forward on how to structure the GeoPackage to contain the data, whether that was one GeoPackage containing a single shapefile&#8217;s features, one GeoPackage table containing all the features at a given level of detail, or one GeoPackage table containing all the features at all the levels of detail.  Changing the CDB conceptual model or levels of detail was outside the scope of this project.</p>
</div>
<div class="paragraph">
<p>FlightSafety found that querying large numbers of features out of very large tables was dependent on how the GeoPackage was structured.  The original conversion of the field columns queried was to a string, making these fields integers made it faster, but creating an index on those columns was an order of magnitude faster.
The table here shows the three different GeoPackage organizations, how many features ended up in the table we are querying, and how fast we could pull out 16k of rows from that table.  Each test pulled out the same set of 16k rows.  The highlighted data shows how structuring the GeoPackage matters when it comes to performance.</p>
</div>
<div id="img_fs-gpkg-performance" class="imageblock text-center">
<div class="content">
<img src="images/fs-gpkg-performance.png" alt="fs gpkg performance" width="800">
</div>
<div class="title">Figure Mtd_Ph3 - 33. Performance.</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="RevisionHistory"><a class="anchor" href="#RevisionHistory"></a>Annex A: Revision History</h2>
<div class="sectionbody">
<div class="exampleblock">
<div class="content">
<div class="paragraph">
<p>replace below entries as needed</p>
</div>
</div>
</div>
<table class="tableblock frame-all grid-all" style="width: 90%;">
<caption class="title">Table 1. Revision History</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Date</th>
<th class="tableblock halign-left valign-top">Editor</th>
<th class="tableblock halign-left valign-top">Release</th>
<th class="tableblock halign-left valign-top">Primary clauses modified</th>
<th class="tableblock halign-left valign-top">Descriptions</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">June 2020</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">C. Reed</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">.1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">all</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Clone template and initial version</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="Bibliography"><a class="anchor" href="#Bibliography"></a>Annex B: Bibliography</h2>
<div class="sectionbody">
<div id="STAC2017" class="paragraph">
<p>[1] STAC: <a href="https://stacspec.org/">Spatio Temporal Asset Catalogs.</a> (2017).</p>
</div>
<div id="GGDM2020" class="paragraph">
<p>[2] <a href="https://ggdm.erdc.dren.mil/">Ground-Warfighter Geospatial Data Model (GGDM)</a> (2020)</p>
</div>
</div>
</div>
</div>
<div id="footnotes">
<hr>
<div class="footnote" id="_footnotedef_1">
<a href="#_footnoteref_1">1</a>. DCAT does not have a concept “abstract”. Use description instead.
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2020-11-02 17:20:28 UTC
</div>
</div>
<style>
/* Stylesheet for CodeRay to match GitHub theme | MIT License | http://foundation.zurb.com */
pre.CodeRay{background:#f7f7f8}
.CodeRay .line-numbers{border-right:1px solid currentColor;opacity:.35;padding:0 .5em 0 0}
.CodeRay span.line-numbers{display:inline-block;margin-right:.75em}
.CodeRay .line-numbers strong{color:#000}
table.CodeRay{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.CodeRay td{vertical-align:top;line-height:inherit}
table.CodeRay td.line-numbers{text-align:right}
table.CodeRay td.code{padding:0 0 0 .75em}
.CodeRay .debug{color:#fff !important;background:#000080 !important}
.CodeRay .annotation{color:#007}
.CodeRay .attribute-name{color:#000080}
.CodeRay .attribute-value{color:#700}
.CodeRay .binary{color:#509}
.CodeRay .comment{color:#998;font-style:italic}
.CodeRay .char{color:#04d}
.CodeRay .char .content{color:#04d}
.CodeRay .char .delimiter{color:#039}
.CodeRay .class{color:#458;font-weight:bold}
.CodeRay .complex{color:#a08}
.CodeRay .constant,.CodeRay .predefined-constant{color:#008080}
.CodeRay .color{color:#099}
.CodeRay .class-variable{color:#369}
.CodeRay .decorator{color:#b0b}
.CodeRay .definition{color:#099}
.CodeRay .delimiter{color:#000}
.CodeRay .doc{color:#970}
.CodeRay .doctype{color:#34b}
.CodeRay .doc-string{color:#d42}
.CodeRay .escape{color:#666}
.CodeRay .entity{color:#800}
.CodeRay .error{color:#808}
.CodeRay .exception{color:inherit}
.CodeRay .filename{color:#099}
.CodeRay .function{color:#900;font-weight:bold}
.CodeRay .global-variable{color:#008080}
.CodeRay .hex{color:#058}
.CodeRay .integer,.CodeRay .float{color:#099}
.CodeRay .include{color:#555}
.CodeRay .inline{color:#000}
.CodeRay .inline .inline{background:#ccc}
.CodeRay .inline .inline .inline{background:#bbb}
.CodeRay .inline .inline-delimiter{color:#d14}
.CodeRay .inline-delimiter{color:#d14}
.CodeRay .important{color:#555;font-weight:bold}
.CodeRay .interpreted{color:#b2b}
.CodeRay .instance-variable{color:#008080}
.CodeRay .label{color:#970}
.CodeRay .local-variable{color:#963}
.CodeRay .octal{color:#40e}
.CodeRay .predefined{color:#369}
.CodeRay .preprocessor{color:#579}
.CodeRay .pseudo-class{color:#555}
.CodeRay .directive{font-weight:bold}
.CodeRay .type{font-weight:bold}
.CodeRay .predefined-type{color:inherit}
.CodeRay .reserved,.CodeRay .keyword {color:#000;font-weight:bold}
.CodeRay .key{color:#808}
.CodeRay .key .delimiter{color:#606}
.CodeRay .key .char{color:#80f}
.CodeRay .value{color:#088}
.CodeRay .regexp .delimiter{color:#808}
.CodeRay .regexp .content{color:#808}
.CodeRay .regexp .modifier{color:#808}
.CodeRay .regexp .char{color:#d14}
.CodeRay .regexp .function{color:#404;font-weight:bold}
.CodeRay .string{color:#d20}
.CodeRay .string .string .string{background:#ffd0d0}
.CodeRay .string .content{color:#d14}
.CodeRay .string .char{color:#d14}
.CodeRay .string .delimiter{color:#d14}
.CodeRay .shell{color:#d14}
.CodeRay .shell .delimiter{color:#d14}
.CodeRay .symbol{color:#990073}
.CodeRay .symbol .content{color:#a60}
.CodeRay .symbol .delimiter{color:#630}
.CodeRay .tag{color:#008080}
.CodeRay .tag-special{color:#d70}
.CodeRay .variable{color:#036}
.CodeRay .insert{background:#afa}
.CodeRay .delete{background:#faa}
.CodeRay .change{color:#aaf;background:#007}
.CodeRay .head{color:#f8f;background:#505}
.CodeRay .insert .insert{color:#080}
.CodeRay .delete .delete{color:#800}
.CodeRay .change .change{color:#66f}
.CodeRay .head .head{color:#f4f}
</style>
</body>
</html>